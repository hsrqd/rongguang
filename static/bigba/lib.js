define("bigba:static/utils/GlobalErrorMonitor.js",function(r,e,n){function i(r){var e,n={};if("object"==typeof r){if(n.ua=window.navigator.userAgent,n.page_url=window.location.href,e=r.stack)n.stack=e;else for(var i in r)r.hasOwnProperty(i)&&"string"==typeof r[i]&&(n[i]=r[i]);(new Image).src=o+encodeURIComponent(JSON.stringify(n))}}var o="/waimai?qt=feerror&msg=";n.exports={error:function(r,e,n){if(1===arguments.length)return void i(r);if(e){var o={};o.message=r,o.url=e,o.line=n,i(o)}}}});
;define("bigba:static/utils/Cookie.js",function(e,n,t){var i=function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},o=function(e){if(i(e)){var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),t=n.exec(document.cookie);if(t)return t[2]||null}return null},r=function(e){var n=o(e);return"string"==typeof n?n=decodeURIComponent(n):null},u=function(e,n,t){if(i(e)){t=t||{};var o=t.expires;"number"==typeof t.expires&&(o=new Date,o.setTime(o.getTime()+t.expires)),document.cookie=e+"="+n+(t.path?"; path="+t.path:"")+(o?"; expires="+o.toGMTString():"")+(t.domain?"; domain="+t.domain:"")+(t.secure?"; secure":"")}},f=function(e,n){n=n||{},n.expires=new Date(0),u(e,"",n)},c=function(e,n,t){u(e,encodeURIComponent(n),t)};t.exports={getRaw:o,get:r,remove:f,setRaw:u,set:c}});
;define("bigba:static/utils/AddressDataCenter.js",function(t,e,n){function r(t){for(;t&&t.length>c;)t.pop();return t}function a(t,e){return t&&e&&i(t)===i(e)}function i(t){var e="";for(var n in t)t.hasOwnProperty(n)&&"shopnum"!=n&&"city_id"!=n&&(e+=t[n]);return e}function s(t){for(var e=!0,n=0,r=l.length;r>n;n++)"address"!=l[n]&&(e=e&&t[l[n]]);return e}var o,u=t("bigba:static/utils/Cookie.js"),d=(t("bigba:static/util.js"),864e5),_=(new Date).getTime(),c=5,l=["name","lat","lng","address","shopnum","city_id"];o={COOKIE_ADDR_KEY:"wm_search_addr",COOKIE_ADDR_EXPIRES:_+365*d,DEFAULT_PATH:"/"},n.exports={add:function(t){if(s(t)){var e,n={},i=[],d=this.getAll();n.name=encodeURIComponent(t.name),n.address=encodeURIComponent(t.address),n.lat=t.lat,n.lng=t.lng,n.shopnum=t.shopnum,n.city_id=t.city_id;for(var _=0,c=d.length;c>_;_++){var l=d[_];a(l,n)&&d.splice(_,1)}d.unshift(n),i=r(d),e=JSON.stringify(i),u.setRaw(o.COOKIE_ADDR_KEY,e,{expires:o.COOKIE_ADDR_EXPIRES,path:o.DEFAULT_PATH})}},getAll:function(){var t=u.getRaw(o.COOKIE_ADDR_KEY);return t?JSON.parse(t):[]},clearAll:function(){return u.setRaw(o.COOKIE_ADDR_KEY,[],{expires:_,path:o.DEFAULT_PATH}),!0}}});
;define("bigba:static/utils/Browser.js",function(e,r,i){var o,s,n=function(e){e=e.toLowerCase();var r=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:r[1]||"",version:r[2]||"0"}};o=n(navigator.userAgent),s={},o.browser&&(s[o.browser]=!0,s.version=o.version),s.webkit&&(s.safari=!0),i.exports=s});
;define("bigba:static/utils/store.js",function(e,t,n){!function(){function e(){try{return l in u&&u[l]}catch(e){return!1}}function t(){try{return f in u&&u[f]&&u[f][u.location.hostname]}catch(e){return!1}}function r(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(o),s.appendChild(o),o.addBehavior("#default#userData"),o.load(l);var n=e.apply(a,t);return s.removeChild(o),n}}function i(e){return e.replace(g,"___")}var o,a={},u=window,c=u.document,l="localStorage",f="globalStorage",d="__storejs__";if(a.disabled=!1,a.set=function(){},a.get=function(){},a.remove=function(){},a.clear=function(){},a.transact=function(e,t,n){var r=a.get(e);null==n&&(n=t,t=null),"undefined"==typeof r&&(r=t||{}),n(r),a.set(e,r)},a.getAll=function(){},a.serialize=function(e){return JSON.stringify(e)},a.deserialize=function(e){return"string"!=typeof e?void 0:JSON.parse(e)},e())o=u[l],a.set=function(e,t){return void 0===t?a.remove(e):void o.setItem(e,a.serialize(t))},a.get=function(e){return a.deserialize(o.getItem(e))},a.remove=function(e){o.removeItem(e)},a.clear=function(){o.clear()},a.getAll=function(){for(var e={},t=0;t<o.length;++t){var n=o.key(t);e[n]=a.get(n)}return e};else if(t())o=u[f][u.location.hostname],a.set=function(e,t){return void 0===t?a.remove(e):void(o[e]=a.serialize(t))},a.get=function(e){return a.deserialize(o[e]&&o[e].value)},a.remove=function(e){delete o[e]},a.clear=function(){for(var e in o)delete o[e]},a.getAll=function(){for(var e={},t=0;t<o.length;++t){var n=o.key(t);e[n]=a.get(n)}return e};else if(c.documentElement.addBehavior){var s,v;try{v=new ActiveXObject("htmlfile"),v.open(),v.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),v.close(),s=v.w.frames[0].document,o=s.createElement("div")}catch(m){o=c.createElement("div"),s=c.body}var g=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");a.set=r(function(e,t,n){return t=i(t),void 0===n?a.remove(t):(e.setAttribute(t,a.serialize(n)),void e.save(l))}),a.get=r(function(e,t){return t=i(t),a.deserialize(e.getAttribute(t))}),a.remove=r(function(e,t){t=i(t),e.removeAttribute(t),e.save(l)}),a.clear=r(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(l);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(l)}),a.getAll=r(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(l);for(var n,r={},i=0;n=t[i];++i)r[n]=a.get(n);return r})}try{a.set(d,d),a.get(d)!=d&&(a.disabled=!0),a.remove(d)}catch(m){a.disabled=!0}a.enabled=!a.disabled,"undefined"!=typeof n&&"function"!=typeof n?n.exports=a:"function"==typeof define&&define.amd?define(a):this.store=a}()});
;define("bigba:static/utils/CartDataCenter.js",function(e,t,r){function i(e){return(Math.round(10*e)/10).toFixed(1)}function o(e,t){_value=encodeURIComponent(t),f.setRaw("s"+e+"s",_value,{path:"/"}),v.set("s"+e+"s",t)}function n(e){return v.get("s"+e+"s")||f.get("s"+e+"s")}function a(e){u(n(e));f.remove("s"+e+"s"),v.remove("s"+e+"s"),v.clear()}function s(e){var t,r=[];return $.each(e.shopItem,function(e,t){r.push([t.itemId,t.itemCount,t.itemName,t.itemPrice,t.packCount,t.packPrice,t.minOrderNumber,t.itemStock,t.itemDishType,t.itemStockId].join(g.item))}),t=[e.shopName,e.shopId,e.deliveryFee,e.takeOutPrice,r.join(g.itemToItem)].join(g.shopToItem)}function u(e){if(!e)return{shopName:"",shopId:"",deliveryFee:0,takeOutPrice:0,shopItem:[]};var t=e.split(g.shopToItem),r={};return t.length>=1&&(r.shopName=t[0]),t.length>=2&&(r.shopId=t[1]+""),t.length>=3&&(r.deliveryFee=t[2]),t.length>=4&&(r.takeOutPrice=t[3]),r.shopItem=[],t.length>=5&&(t=t[4])&&(t=t.split(g.itemToItem),$.each(t,function(e,t){var i=t.split(g.item);if(i[0]&&2==i[8]){var o=v.get("s"+i[0]+"s");if(!o)return}r.shopItem.push({itemId:i[0],itemCount:parseInt(i[1]),itemName:i[2],itemPrice:i[3],packCount:i[4],packPrice:i[5],minOrderNumber:i[6],itemStock:parseInt(i[7]),itemDishType:i[8],itemStockId:i[9]})})),r}function m(){o(I,s(l))}function c(){l=u(n(I)),l.shopId=I}function d(e,r,i,o){var n=0,a=!1;for(o=parseInt(o),i=parseInt(i),itemIdex=0,len=l.shopItem.length;len>itemIdex;itemIdex++)l.shopItem[itemIdex].itemStockId==r&&(l.shopItem[itemIdex].itemId==e?(n+=i,a=!0):n+=l.shopItem[itemIdex].itemCount);return a||(n+=i),n>=o?$(t).trigger("features.stockTight",{sid:r,num:o}):o>n&&$(t).trigger("features.stockNormal",r),n>o?i+o-n:i}function p(e,t,r){if(r){var i={product_id:r.itemId,product_quantity:t,feature_id:[]};for(var o in r.select)"规格"!=o?i.feature_id.push(r.select[o].id):i.product_id=r.select[o].id;return $.extend({},i)}}function h(e,t,r){if(r){var i,o,n,a={product_id:r.basic.id,product_quantity:t,groupons:[]};for(var s in r.data)if(r.data[s].total&&r.data[s].total.count){i={dish_group_id:s,ids:[]};for(var u in r.data[s])if("total"!=u&&(n=r.data[s][u],n.count)){if(n.features&&n.features.length){var m=$.extend([],n.features);n.realId?(m.splice($.inArray(n.realId,m),1),o={product_id:n.realId,product_quantity:n.count,feature_id:m}):o={product_id:u,product_quantity:n.count,feature_id:m}}else o={product_id:u,product_quantity:n.count};i.ids.push($.extend({},o))}a.groupons.push($.extend({},i))}return $.extend({},a)}}var t,l,I,f=e("bigba:static/utils/Cookie.js"),g=(e("bigba:static/util.js"),{shopToItem:"##",itemToItem:"$$",item:"^^"}),C=e("bigba:widget/common/ui/cartAlert/cartAlert.js"),v=e("bigba:static/utils/store.js"),y={url:"/waimai/trade/getorderprice",timer:null,delay:200,recount:3,restore:function(){$(t).trigger("failpremium.shopCar")},retry:function(e){var r=this;e=e||0,e<r.recount?(clearTimeout(r.timer),r.timer=setTimeout(function(){$.ajax({url:r.url,data:r.params,type:"post",dataType:"json",success:function(e){if(0==e.error_no){var i=e.result.order_info,o=e.result.discount_info;$(t).trigger("premium.shopCar",{prices:i,discounts:o})}else e.error_no?(e.error_msg||(e.error_msg="餐厅太忙，暂时不能接单"),C.alert(e),r.restore()):r.restore()},error:function(){r.retry(++e)}})},r.delay)):r.restore()},get:function(e){var t=this;t.params=e,t.retry()},JSONStringify:function(e){return JSON.stringify(e)},adaptParam:function(e,t){var r=this,i=[];for(var o in t){var n=t[o].itemId,a=t[o].itemCount;if(!t[o].itemDishType||2!=t[o].itemDishType&&"attr"!=t[o].itemDishType)i.push({product_id:n,product_quantity:a});else{var s=v.get("s"+n+"s")||JSON.parse(f.get("s"+n+"s"));i.push(2==t[o].itemDishType?h(n,a,s):p(n,a,s))}}return{shop_id:e,products:r.JSONStringify(i)}}};t=r.exports={fetchPremium:function(){var e=y.adaptParam(this.getCurShopId(),this.getCarItems());y.get(e)},fetchItems:function(){return y.adaptParam(this.getCurShopId(),this.getCarItems())},setCarItem:function(e){var r,o;for(e.itemPrice&&(e.itemPrice=i(e.itemPrice)),o=0,len=l.shopItem.length;len>o;o++)if(l.shopItem[o].itemId==e.itemId){r=l.shopItem[o];break}e.itemCount=parseInt(e.itemCount,10),"append"==e.type&&r&&(e.itemCount+=r.itemCount||0);try{if(e.selectFeatures||r&&"attr"==r.itemDishType){if(e=$.extend(r||{},e),e.itemStockId=e.itemStockId||e.selectFeatures.itemId,e.itemCount=d(e.itemId,e.itemStockId,e.itemCount,e.itemStock),e.itemCount<0)return;e.selectFeatures&&v.set("s"+e.itemId+"s",e.selectFeatures)}}catch(n){}if(("2"==e.itemDishType||r&&"2"==r.itemDishType)&&(e=$.extend(r||{},e),e.itemStockId=e.itemStockId||e.orignItemId,e.itemCount=d(e.itemId,e.itemStockId,e.itemCount,e.itemStock)),r)if($.extend(r,e),r.itemCount<r.minOrderNumber){if(l.shopItem.splice(o,1),$(t).trigger("delete.shopCar",r),2==r.itemDishType||r.selectFeatures){var a=new Date;a.setFullYear(a.getFullYear()-1),v.remove("s"+r.itemId+"s")}}else $("#source_name").val()&&"baidu"==$("#source_name").val()&&r.itemCount>=r.itemStock&&(r.itemCount=r.itemStock),$(t).trigger("update.shopCar",r);else{if(!e.itemName)return;if($("#source_name").val()&&"baidu"==$("#source_name").val()){if(!e.itemStock||!e.itemCount)return;if(parseInt(e.itemStock)<parseInt(e.minOrderNumber))return;e.itemCount<e.minOrderNumber&&(e.itemCount=e.minOrderNumber),e.itemCount>e.itemStock&&(e.itemCount=e.itemStock)}l.shopItem.push(e),$(t).trigger("add.shopCar",e)}0==l.shopItem.length&&$(t).trigger("clear.shopCar"),m()},setCurShopInfo:function(e,t,r,i){l||(l={}),l.shopId=e||l.shopId,l.shopName=t||l.shopName,l.deliveryFee=r||l.deliveryFee,l.takeOutPrice=i||l.takeOutPrice},getCurShopName:function(){return l.shopName},getCurShopId:function(){return l.shopId},getCarItems:function(){return l.shopItem},clearCar:function(e){l.shopItem=[],m(),!e&&$(t).trigger("clear.shopCar")},init:function(e){I=e+"",c();setTimeout(function(){$(t).trigger("inited.shopCar",l)},0)},getAmount:function(){var e=0,t=0;return $.each(l.shopItem,function(r,i){t+=i.packCount*i.packPrice*i.itemCount,e+=i.itemCount*i.itemPrice}),{deliveryFee:i(l.deliveryFee),packFee:i(t),productAmount:i(e),amount:i(e+t+parseFloat(l.deliveryFee)),takeOutPrice:i(l.takeOutPrice),cha:i(l.takeOutPrice-e-t),isEmpty:0==l.shopItem.length}},isEmpty:function(){return l&&l.shopItem.length>0?!1:!0},resetCar:function(e){l.shopItem=e,m()},adaptSetMealForServer:h,adaptFeatureForServer:p,clearData:a}});
;define("bigba:static/utils/CookieDataCenter.js",function(t,e,i){var n,C=t("bigba:static/utils/Cookie.js"),E=t("bigba:static/util.js"),a=864e5,o=(new Date).getTime();n={COOKIE_CITY_KEY:"wm_city",COOKIE_CITY_EXPIRES:o+5e3*a,COOKIE_ADDR_KEY:"wm_addr",COOKIE_ADDR_EXPIRES:o+7*a,DEFAULT_CITY:{code:131,name:"北京"},CITY_SUPPORT:{131:1,289:1,179:1,315:1,224:1},DEFAULT_PATH:"/"},i.exports={initCity:function(){var t=this.getCity(n.COOKIE_CITY_KEY);t&&t.code||this.setCity(n.DEFAULT_CITY)},setCity:function(t){if(t&&t.name){var e=encodeURIComponent(JSON.stringify(t));C.setRaw(n.COOKIE_CITY_KEY,e,{expires:n.COOKIE_CITY_EXPIRES,path:n.DEFAULT_PATH})}},getCity:function(){var t=decodeURIComponent(C.getRaw(n.COOKIE_CITY_KEY)),e=JSON.parse(t);return this.isEmpty(e)?n.DEFAULT_CITY:e},setAddr:function(t){if(t.address){var e={};e.address=E.encodeHTML(decodeURIComponent(t.address)),e.lat=t.lat,e.lng=t.lng;var i=encodeURIComponent(JSON.stringify(e));C.setRaw(n.COOKIE_ADDR_KEY,i,{expires:n.COOKIE_ADDR_EXPIRES,path:n.DEFAULT_PATH})}},getAddr:function(){var t=decodeURIComponent(C.getRaw(n.COOKIE_ADDR_KEY));return JSON.parse(t)},isEmpty:function(t){for(var e in t)return!1;return!0}}});
;define("bigba:static/utils/GlobalTips.js",function(t,o,e){function i(){c&&clearTimeout(c),l.fixTo("#content","top",{top:0}),l.hide()}function n(t){var o=$(window).scrollTop(),e=o>r?o-r+SELF_HEIGHT+20:SELF_HEIGHT+1,i={top:e};"top"===t&&(i={top:o}),l.show(),l.fixTo("#content","top",i)}var s,l,p,c,a=3e3,r=82;SELF_HEIGHT=45,s=t("jsmod/ui/fixElement"),l=new s('<div class="global-tips"><span class="gt-msg"></span></div>',{targetType:"top",zIndex:3e3,preventShow:!0}),p=l.getElement(),$(window).on("scroll.globaltips",function(){i()}),$(".global-tips .close-btn").on("click",function(){i()}),e.exports={tip:function(t,o){c&&clearTimeout(c),p.find(".gt-msg").html(t),l.redraw(),n(o),c=setTimeout(function(){i()},a)},topTip:function(t,o){o?p.addClass("reverse"):p.removeClass("reverse"),this.tip(t,"top")},hide:function(){i()}}});
;define("bigba:static/utils/LocalDataCenter.js",function(t,e,i){var a=t("bigba:static/utils/store.js"),n=t("bigba:static/util.js");i.exports={eLength:5,schema:["address","lat","lng"],key:"LocalDataCenter",add:function(t){var e=this,i=a.get(e.key)||[];if(e._validate(t)){t.address=encodeURIComponent(n.encodeHTML(decodeURIComponent(t.address)));for(var r in i){var s=i[r];if(e._equal(t,s))return}i.unshift(t),i=e._cut(i),a.set(e.key,i)}},getAll:function(){return this._cut(a.get(this.key))},_validate:function(t){var e=!0;for(var i in this.schema)e=e&&t[this.schema[i]];return e},_cut:function(t){for(;t&&t.length>this.eLength;)t.pop();return t},_equal:function(t,e){return t&&e&&this._serialize(t)===this._serialize(e)},_serialize:function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e+=t[i]);return e}}});
;define("bigba:static/utils/SlidePlayer.js",function(i,t,n){var o,a={autoPlay:!0,current:0,duration:3e3,width:"100%",height:"100%",autoAdaptive:!1},e=function(i,t){var n=this;0!=$(i).length&&(n.$el=$(i),n.option=$.extend({},a,t),n.init())};$.extend(e.prototype,{init:function(){var i=this;return i.$el.css({position:"relative",overflow:"hidden"}),i.$imgList=i.$el.find(".slide-container li"),i.$navContainer=i.$el.find(".slide-indicators"),i.imgCount=i.$imgList.size(),i.cur=i.option.current,0==i.imgCount?void i.$el.hide():(i.option.autoAdaptive&&(i.option.height="100%",i.option.width="100%"),i.$imgList.css({position:"relative","float":"left","margin-right":"-100%"}),i.$imgList.find("img").css({height:i.option.height,width:i.option.width}),i.$imgList.hide(),i.$imgList.eq(i.cur).show(),void(i.imgCount>1&&(i.addNav(),i.$navContainer.find("li").removeClass("active"),i.$navContainer.find("li").eq(i.cur).addClass("active"))))},addNav:function(){for(var i=this,t="",n=0;n<i.imgCount;n++)t+=n==i.cur?"<li class='active'></li>":"<li></li>";i.$navContainer.append(t),i.bindEvent(),i.option.autoPlay&&i.startAutoPlay()},showCur:function(){var i=this;i.$imgList.fadeOut(1e3),i.$imgList.eq(i.cur).fadeIn(1e3),i.$navContainer.find("li").removeClass("active"),i.$navContainer.find("li").eq(i.cur).addClass("active")},autoPlay:function(i){var t=i||this;t.cur>=t.imgCount-1?t.cur=0:t.cur++,t.showCur()},startAutoPlay:function(){var i=this;o=setInterval(function(){i.autoPlay(i)},i.option.duration)},stopAutoPlay:function(){clearInterval(o)},bindEvent:function(){var i=this;i.option.autoPlay&&i.$navContainer.hover(function(){i.stopAutoPlay()},function(){i.startAutoPlay()}),i.$navContainer.on("click","li",function(t){t.stopPropagation(),t.preventDefault();var n=$(t.currentTarget);n.hasClass("active")||(i.stopAutoPlay(),i.cur=n.index(),i.showCur())})}}),n.exports=e});
;define("bigba:static/utils/Template.js",function(n,e,t){function r(n){return(""+n).replace(c,function(n){return o[n]})}function u(n){return n.replace(v,function(n,e){return s[e]})}function a(n,e){for(var t in e)n[t]=e[t];return n}var i="<&",p="&>",o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},c=/[&<>"'\/]/g,l={evaluate:new RegExp(i+"([\\s\\S]+?)"+p,"g"),interpolate:new RegExp(i+"=([\\s\\S]+?)"+p,"g"),escape:new RegExp(i+"-([\\s\\S]+?)"+p,"g"),interpolateNonEmpty:new RegExp(i+"#([\\s\\S]+?)"+p,"g")},f=/.^/,s={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"},g=/\\|'|\r|\n|\t|\u2028|\u2029/g,v=/\\(\\|'|r|n|t|u2028|u2029)/g;for(var j in s)s[s[j]]=j;t.exports=function(n,e,t){var o,c;if("[object String]"==Object.prototype.toString.call(n)){var v=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");(o=document.getElementById(n))&&(n=/^(textarea|input)$/i.test(o.nodeName)?o.value:o.innerHTML),n=n.replace(v,""),n=n.split("\n")}if("[object Array]"==Object.prototype.toString.call(n))for(var j,x=0;j=n[x];x++){var b=[];j.replace(l.interpolateNonEmpty,function(n,e){b.push(e)}),b.length>0&&n.splice(x,1,i+" if ("+b.join("&&")+") { "+p+j+i+" } "+p)}n=n.join(""),c=a(c||{},l);var m="__p.push('"+n.replace(g,function(n){return"\\"+s[n]}).replace(c.escape||f,function(n,e){return"'+\n((__t=("+u(e)+"))==null?'':__.escape(__t))+\n'"}).replace(c.interpolate||f,function(n,e){return"'+\n((__t=("+u(e)+"))==null?'':__t)+\n'"}).replace(c.interpolateNonEmpty||f,function(n,e){return"'+\n((__t=("+u(e)+"))==null?'':__t)+\n'"}).replace(c.evaluate||f,function(n,e){return"');\n"+u(e)+"\n__p.push('"})+"');\n";c.variable||(m="with(obj||{}){\n"+m+"}\n"),m="var __t,__p=[],__j=Array.prototype.join,print=function(){__p.push(__j.call(arguments,''))};\n"+m+"return __p.join('');\n";var y=new Function(c.variable||"obj","__",m),E={__escape:r};if(_.extend(E,t||{}),e)return y(e,E);var h=function(n,e){return _.extend(E,e),y.call(this,n,E)};return h}});
;define("bigba:static/utils/timer.js",function(n,e,t){!function(){var n={tmpl:function(n,e){var t=/\{([^\}]*)\}/g;return n.replace(t,function(n,t){return"undefined"!=typeof e[t]?e[t]:""})}},e=function(n,t){var o=this;if(o.nodeMapList=[],$.isPlainObject(n)?(t=n,t.container=$(document.body)):(t=t||{},t.container=$(n)),o.options=$.extend({},e.DEFAULTS,t),!o.paramsCheck())throw new Error("参数配置有误");return o.init(),o};e.PRECISION={day:"day",hour:"hour",minute:"minute",second:"second"},e.DEFAULTS={selector:"[data-role='timer']",step:1,now:0,end:null,precision:e.PRECISION.second,timingTpl:"{days}天{hours}小时{minutes}分{seconds}秒",endTpl:"已结束"},e.prototype={init:function(){var n,e=this,t=e.options,o=$(t.selector,t.container),i=e.nodeMapList;o.each(function(e,o){n=o.getAttribute("data-end"),n||(n=t.end>0?t.end:t.now),i.push({node:o,life:n-t.now})}),e.loop()},paramsCheck:function(){var n=this,e=n.options,t=function(){};return e.now=e.now,e.end=e.end?e.end:0,e.step=parseInt(e.step),e.on=e.on||{},e.on.end=$.isFunction(e.on.end)?e.on.end:t,e.selector&&e.now&&!isNaN(e.step)?(e.step=Math.max(1e3*e.step,1e3),!0):!1},loop:function(){var n=this;clearTimeout(n.loopTimer),n.burn(),n.filter(),n.refresh(),n.nodeMapList.length>0&&(n.loopTimer=setTimeout(function(){n.loop()},n.options.step))},refresh:function(){var e=this,t=e.options.timingTpl,o=(e.options.endTpl,e.nodeMapList);$.each(o,function(o,i){i.node.innerHTML=n.tmpl(t,e.convertDate(i.life))})},filter:function(){{var n=this,e=[],t=[];n.options,n.nodeMapList}$.each(n.nodeMapList,function(n,o){o.life<=0?t.push(o):e.push(o)}),t.length>0&&n.onEnd(t),n.nodeMapList=e},burn:function(){var n=this,e=n.options,t=n.nodeMapList;$.each(t,function(n,t){t.life-=e.step})},convertDate:function(n){var t=this.options.precision,o=1e3,i=60*o,s=60*i,r=24*s,a=0,p=0,c=0,d=0;switch(t){case e.PRECISION.day:a=parseInt(n/r);break;case e.PRECISION.hour:a=parseInt(n/r),p=parseInt(n%r/s);break;case e.PRECISION.minute:a=parseInt(n/r),p=parseInt(n%r/s),c=parseInt(n%s/i);break;case e.PRECISION.second:a=parseInt(n/r),p=parseInt(n%r/s),c=parseInt(n%s/i),d=parseInt(n%i/o)}return{days:a,hours:p,minutes:c,seconds:d}},restart:function(n,e,t){var o,i=this,s={},r=i.nodeMapList;if(o=$(n,i.container)[0],e&&t)if(s.node=o,s.life=t-e,s.life<=0)i.onEnd([s]);else{for(var a=0;a<r.length;a++)if(r[a].node==o){r.splice(a,1);break}r.push(s),i.loop()}},onEnd:function(n){var e=this,t=e.options.on.end;$.each(n,function(n,t){t.node.innerHTML=e.options.endTpl}),t(n)}},t.exports=e}()});
;!function(){var n=50,t=25,e={},r=[].slice,a={},c=function(n,t,r,c){var o=a[n];o||(o=a[n]={}),o[t]=o[t]||[],o[t].push({func:r,context:c||e})},o=function(n,t,r,a){var o=function(){return e.off(n,t,o),r.apply(a||e,arguments)};c(n,t,o,a)},f=function(e,c){if(a[e]&&a[e][c]&&a[e][c].length){for(var o=a[e][c],f=[],i=o.length;i--;)f.push({handler:o[i],args:r.call(arguments,1)});!function(){var e=+new Date;do{var r=f.shift(),a=r.handler;try{a.func.apply(a.context,r.args)}catch(c){}}while(f.length&&+new Date-e<n);f.length>0&&setTimeout(arguments.callee,t)}()}},i=function(n,t,r,c){if(c=c||e,a[n]&&a[n][t]&&a[n][t].length)for(var o,f=a[n][t],i=f.length;i--;)o=f[i],o.func===r&&o.context===c&&f.splice(i,1)};e.on=c,e.once=o,e.trigger=f,e.off=i,window.listener=window.listener||e}();
;var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"/static/waimai/images/forapp/ZeroClipboard.swf",nextId:1,$:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e),this.className+=" "+e},e.removeClass=function(e){for(var t=this.className.split(/\s+/),i=-1,s=0;s<t.length;s++)t[s]==e&&(i=s,s=t.length);return i>-1&&(t.splice(i,1),this.className=t.join(" ")),this},e.hasClass=function(e){return!!this.className.match(new RegExp("\\s*"+e+"\\s*"))}),e},setMoviePath:function(e){this.moviePath=e},dispatch:function(e,t,i){var s=this.clients[e];s&&s.receiveEvent(t,i)},register:function(e,t){this.clients[e]=t},getDOMObjectPosition:function(e,t){for(var i=$("body").scrollTop(),s={left:0,top:0,width:e.width?e.width:e.offsetWidth,height:e.height?e.height:e.offsetHeight};e&&e!=t;)s.left+=e.offsetLeft,s.top+=e.offsetTop,e=e.offsetParent;return s.top+=i,s},Client:function(e){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),e&&this.glue(e)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(e,t,i){this.domElement=ZeroClipboard.$(e);var s=9999;this.domElement.style.zIndex&&(s=parseInt(this.domElement.style.zIndex,10)+1),"string"==typeof t?t=ZeroClipboard.$(t):"undefined"==typeof t&&(t=document.getElementsByTagName("body")[0]);var o=ZeroClipboard.getDOMObjectPosition(this.domElement,t);this.div=document.createElement("div"),this.div.id="flashCopy";var a=this.div.style;if(a.position="absolute",a.left=""+o.left+"px",a.top=""+o.top+"px",a.width=""+o.width+"px",a.height=""+o.height+"px",a.zIndex=s,"object"==typeof i)for(addedStyle in i)a[addedStyle]=i[addedStyle];t.appendChild(this.div),this.div.innerHTML=this.getHTML(o.width,o.height)},getHTML:function(e,t){var i="",s="id="+this.id+"&width="+e+"&height="+t;if(navigator.userAgent.match(/MSIE/)){var o=location.href.match(/^https/i)?"https://":"http://";i+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+o+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+e+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+s+'"/><param name="wmode" value="transparent"/></object>'}else i+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+s+'" wmode="transparent" />';return i},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var e=document.getElementsByTagName("body")[0];try{e.removeChild(this.div)}catch(t){}this.domElement=null,this.div=null}},reposition:function(e){if(e&&(this.domElement=ZeroClipboard.$(e),this.domElement||this.hide()),this.domElement&&this.div){var t=ZeroClipboard.getDOMObjectPosition(this.domElement),i=this.div.style;i.left=""+t.left+"px",i.top=""+t.top+"px"}},setText:function(e){this.clipText=e,this.ready&&this.movie.setText(e)},addEventListener:function(e,t){e=e.toString().toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},setHandCursor:function(e){this.handCursorEnabled=e,this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(e,t){switch(e=e.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=document.getElementById(this.movieId),!this.movie){var i=this;return void setTimeout(function(){i.receiveEvent("load",null)},1)}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var i=this;return setTimeout(function(){i.receiveEvent("load",null)},100),void(this.ready=!0)}this.ready=!0,this.movie.setText(this.clipText),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[e])for(var s=0,o=this.handlers[e].length;o>s;s++){var a=this.handlers[e][s];"function"==typeof a?a(this,t):"object"==typeof a&&2==a.length?a[0][a[1]](this,t):"string"==typeof a&&window[a](this,t)}}};
;!function(e,t,o,n){var i=e(t);e.fn.lazyload=function(r){function f(){var t=0;clearTimeout(a),a=setTimeout(function(){d.each(function(){var o=e(this),n=this;if(!h.skip_invisible||o.is(":visible"))if(e.abovethetop(n,h)||e.leftofbegin(n,h));else if(e.belowthefold(n,h)||e.rightoffold(n,h)){if(++t>h.failure_limit)return!1}else o.trigger("appear"),t=0})},500)}var l,a,d=this,h={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return r&&(n!==r.failurelimit&&(r.failure_limit=r.failurelimit,delete r.failurelimit),n!==r.effectspeed&&(r.effect_speed=r.effectspeed,delete r.effectspeed),e.extend(h,r)),l=h.container===n||h.container===t?i:e(h.container),0===h.event.indexOf("scroll")&&l.bind(h.event,function(){return f()}),this.each(function(){var t=this,o=e(t);t.loaded=!1,o.one("appear",function(){if(!this.loaded){if(h.appear){var n=d.length;h.appear.call(t,n,h)}e("<img />").bind("load",function(){o.hide().attr("src",o.data(h.data_attribute))[h.effect](h.effect_speed),t.loaded=!0;var n=e.grep(d,function(e){return!e.loaded});if(d=e(n),h.load){var i=d.length;h.load.call(t,i,h)}}).attr("src",o.data(h.data_attribute))}}),0!==h.event.indexOf("scroll")&&o.bind(h.event,function(){t.loaded||o.trigger("appear")})}),i.bind("resize",function(){f()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&d.each(function(){e(this).trigger("appear")})}),e(o).ready(function(){f()}),this},e.belowthefold=function(o,r){var f;return f=r.container===n||r.container===t?i.height()+i.scrollTop():e(r.container).offset().top+e(r.container).height(),f<=e(o).offset().top-r.threshold},e.rightoffold=function(o,r){var f;return f=r.container===n||r.container===t?i.width()+i.scrollLeft():e(r.container).offset().left+e(r.container).width(),f<=e(o).offset().left-r.threshold},e.abovethetop=function(o,r){var f;return f=r.container===n||r.container===t?i.scrollTop():e(r.container).offset().top,f>=e(o).offset().top+r.threshold+e(o).height()},e.leftofbegin=function(o,r){var f;return f=r.container===n||r.container===t?i.scrollLeft():e(r.container).offset().left,f>=e(o).offset().left+r.threshold+e(o).width()},e.inviewport=function(t,o){return!(e.rightoffold(t,o)||e.leftofbegin(t,o)||e.belowthefold(t,o)||e.abovethetop(t,o))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document);
;!function(e,a,t){function l(e){var a={},l=/^jQuery\d+$/;return t.each(e.attributes,function(e,t){t.specified&&!l.test(t.name)&&(a[t.name]=t.value)}),a}function r(e,l){var r=this,o=t(r);if(r.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){if(o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id")),e===!0)return o[0].value=l;o.focus()}else r.value="",o.removeClass("placeholder"),r==a.activeElement&&r.select()}function o(){var e,a=this,o=t(a),d=this.id;if(""==a.value){if("password"==a.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(c){e=t("<input>").attr(t.extend(l(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":d}).bind("focus.placeholder",r),o.data({"placeholder-textinput":e,"placeholder-id":d}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",d).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}var d,c,n="placeholder"in a.createElement("input"),i="placeholder"in a.createElement("textarea"),u=t.fn,h=t.valHooks,p=t.propHooks;n&&i?(c=u.placeholder=function(){return this},c.input=c.textarea=!0):(c=u.placeholder=function(){var e=this;return e.filter((n?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},c.input=n,c.textarea=i,d={get:function(e){var a=t(e),l=a.data("placeholder-password");return l?l[0].value:a.data("placeholder-enabled")&&a.hasClass("placeholder")?"":e.value},set:function(e,l){var d=t(e),c=d.data("placeholder-password");return c?c[0].value=l:d.data("placeholder-enabled")?(""==l?(e.value=l,e!=a.activeElement&&o.call(e)):d.hasClass("placeholder")?r.call(e,!0,l)||(e.value=l):e.value=l,d):e.value=l}},n||(h.input=d,p.value=d),i||(h.textarea=d,p.value=d),t(function(){t(a).delegate("form","submit.placeholder",function(){var e=t(".placeholder",this).each(r);setTimeout(function(){e.each(o)},10)})}),t(e).bind("beforeunload.placeholder",function(){t(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery);
;this.JSON||(this.JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,f,o,u,i=gap,a=e[t];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(t)),"function"==typeof rep&&(a=rep.call(e,t,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(o=a.length,n=0;o>n;n+=1)u[n]=str(n,a)||"null";return f=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,f}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)r=rep[n],"string"==typeof r&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));else for(r in a)Object.hasOwnProperty.call(a,r)&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));return f=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,f}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,f=t[e];if(f&&"object"==typeof f)for(n in f)Object.hasOwnProperty.call(f,n)&&(r=walk(f,n),void 0!==r?f[n]=r:delete f[n]);return reviver.call(t,e,f)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),$.toJSON=JSON.stringify,$.evalJSON=JSON.parse}();
;function $JssorObject$(){function n(n,t){$JssorDebug$.$Execute(function(){if(void 0==n||null==n)throw new Error("param 'eventName' is null or empty.");if("function"!=typeof t)throw"param 'handler' must be a function.";$Jssor$.$Each(i,function(e){if(e.$EventName==n&&e.$Handler===t)throw new Error("The handler listened to the event already, cannot listen to the same event of the same object with the same handler twice.")})}),i.push({$EventName:n,$Handler:t})}function t(n,t){$JssorDebug$.$Execute(function(){if(void 0==n||null==n)throw new Error("param 'eventName' is null or empty.");if("function"!=typeof t)throw"param 'handler' must be a function."}),$Jssor$.$Each(i,function(e,r){e.$EventName==n&&e.$Handler===t&&i.splice(r,1)})}function e(){i=[]}function r(){$Jssor$.$Each(a,function(n){$Jssor$.$RemoveEvent(n.$Obj,n.$EventName,n.$Handler)}),a=[]}var o=this,i=[],a=[];o.$Listen=function(n,t,e,r){$JssorDebug$.$Execute(function(){if(!n)throw new Error("param 'obj' is null or empty.");if(void 0==t||null==t)throw new Error("param 'eventName' is null or empty.");if("function"!=typeof e)throw"param 'handler' must be a function.";$Jssor$.$Each(a,function(r){if(r.$Obj===n&&r.$EventName==t&&r.$Handler===e)throw new Error("The handler listened to the event already, cannot listen to the same event of the same object with the same handler twice.")})}),$Jssor$.$AddEvent(n,t,e,r),a.push({$Obj:n,$EventName:t,$Handler:e})},o.$Unlisten=function(n,t,e){$JssorDebug$.$Execute(function(){if(!n)throw new Error("param 'obj' is null or empty.");if(void 0==t||null==t)throw new Error("param 'eventName' is null or empty.");if("function"!=typeof e)throw"param 'handler' must be a function."}),$Jssor$.$Each(a,function(r,o){r.$Obj===n&&r.$EventName==t&&r.$Handler===e&&($Jssor$.$RemoveEvent(n,t,e),a.splice(o,1))})},o.$UnlistenAll=r,o.$On=o.addEventListener=n,o.$Off=o.removeEventListener=t,o.$TriggerEvent=function(n){var t=[].slice.call(arguments,1);$Jssor$.$Each(i,function(e){e.$EventName==n&&e.$Handler.apply(window,t)})},o.$Destroy=function(){r(),e();for(var n in o)delete o[n]},$JssorDebug$.$C_AbstractClass(o)}function $JssorAnimator$(n,t,e,r,o,i){function a(n){b+=n,I+=n,P+=n,A+=n,J+=n,D+=n,S=n}function s(t,e){var r=t-b+n*e;return a(r),I}function u(n,a){var s=n;if(T&&(s>=I||b>=s)&&(s=((s-b)%T+T)%T+b),!y||E||a||J!=s){var u=Math.min(s,I);if(u=Math.max(u,b),!y||E||a||u!=D){if(i){var $=(u-P)/(t||1);e.$Reverse&&($=1-$);var c=$Jssor$.$Cast(o,i,$,p,w,g,e);$Jssor$.$Each(c,function(n,t){M[t]&&M[t](r,n)})}x.$OnInnerOffsetChange(D-P,u-P),D=u,$Jssor$.$Each(R,function(t,e){var r=J>n?R[R.length-e-1]:t;r.$GoToPosition(D-S,a)});var f=J,l=D;J=s,y=!0,x.$OnPositionChange(f,l)}}}function $(n,t,e){$JssorDebug$.$Execute(function(){0!==t&&1!==t&&$JssorDebug$.$Fail("Argument out of range, the value of 'combineMode' should be either 0 or 1.")}),t&&n.$Locate(I,1),e||(b=Math.min(b,n.$GetPosition_OuterBegin()+S),I=Math.max(I,n.$GetPosition_OuterEnd()+S)),R.push(n)}function c(){if(d){var n=$Jssor$.$GetNow(),t=Math.min(n-O,e.$IntervalMax),r=J+t*m;O=n,r*m>=h*m&&(r=h),u(r),!E&&r*m>=h*m?l(C):L(c)}}function f(n,t,e){d||(d=!0,E=e,C=t,n=Math.max(n,b),n=Math.min(n,I),h=n,m=J>h?-1:1,x.$OnStart(),O=$Jssor$.$GetNow(),L(c))}function l(n){d&&(E=d=C=!1,x.$OnStop(),n&&n())}n=n||0;var d,v,h,m,E,p,g,w,C,y,b,I,T,M,x=this,O=0,S=0,J=0,D=0,P=n,A=n+t,R=[],L=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;$Jssor$.$IsBrowserSafari()&&$Jssor$.$BrowserVersion()<7&&(L=null),L=L||function(n){$Jssor$.$Delay(n,e.$Interval)},x.$Play=function(n,t,e){f(n?J+n:I,t,e)},x.$PlayToPosition=f,x.$PlayToBegin=function(n,t){f(b,n,t)},x.$PlayToEnd=function(n,t){f(I,n,t)},x.$Stop=l,x.$Continue=function(n){f(n)},x.$GetPosition=function(){return J},x.$GetPlayToPosition=function(){return h},x.$GetPosition_Display=function(){return D},x.$GoToPosition=u,x.$GoToBegin=function(){u(b,!0)},x.$GoToEnd=function(){u(I,!0)},x.$Move=function(n){u(J+n)},x.$CombineMode=function(){return v},x.$GetDuration=function(){return t},x.$IsPlaying=function(){return d},x.$IsOnTheWay=function(){return J>P&&A>=J},x.$SetLoopLength=function(n){T=n},x.$Locate=s,x.$Shift=a,x.$Join=$,x.$Combine=function(n){$(n,0)},x.$Chain=function(n){$(n,1)},x.$GetPosition_InnerBegin=function(){return P},x.$GetPosition_InnerEnd=function(){return A},x.$GetPosition_OuterBegin=function(){return b},x.$GetPosition_OuterEnd=function(){return I},x.$OnPositionChange=x.$OnStart=x.$OnStop=x.$OnInnerOffsetChange=$Jssor$.$EmptyFunction,x.$Version=$Jssor$.$GetNow(),e=$Jssor$.$Extend({$Interval:16,$IntervalMax:50},e),$JssorDebug$.$Execute(function(){e=$Jssor$.$Extend({$LoopLength:void 0,$Setter:void 0,$Easing:void 0},e)}),T=e.$LoopLength,M=$Jssor$.$Extend({},$Jssor$.$StyleSetter(),e.$Setter),b=P=n,I=A=n+t,g=e.$Round||{},w=e.$During||{},p=$Jssor$.$Extend({$Default:$Jssor$.$IsFunction(e.$Easing)&&e.$Easing||$JssorEasing$.$EaseSwing},e.$Easing)}function $JssorPlayerClass$(){function n(n){function t(e){var o=$Jssor$.$EvtSrc(e);r=o.pInstance,$Jssor$.$RemoveEvent(o,"dataavailable",t),$Jssor$.$Each(i,function(n){n!=r&&n.$Remove()}),n.pTagName=r.tagName,i=null}function e(e){var r;if(!e.pInstance){var o=$Jssor$.$AttributeEx(e,"pHandler");$JssorPlayer$[o]&&($Jssor$.$AddEvent(e,"dataavailable",t),r=new $JssorPlayer$[o](n,e),i.push(r),$JssorDebug$.$Execute(function(){"function"!=$Jssor$.$Type(r.$Remove)&&$JssorDebug$.$Fail("'pRemove' interface not implemented for player handler '"+o+"'.")}))}return r}var r,o=this,i=[];o.$InitPlayerController=function(){if(!n.pInstance&&!e(n)){var t=$Jssor$.$Children(n);$Jssor$.$Each(t,function(n){e(n)})}}}var t=this,e=[];t.$EVT_SWITCH=21,t.$FetchPlayers=function(t){t=t||document.body;var r=$Jssor$.$FindChildren(t,"player");$Jssor$.$Each(r,function(t){e[t.pId]||(t.pId=e.length,e.push(new n(t)));var r=e[t.pId];r.$InitPlayerController()})}}var $JssorDebug$=new function(){function n(t){if(t.constructor===n.caller)throw new Error("Cannot create instance of an abstract class.")}this.$DebugMode=!0,this.$Log=function(n,t){var e=window.console||{},r=this.$DebugMode;r&&e.log?e.log(n):r&&t&&alert(n)},this.$Error=function(n,t){var e=window.console||{},r=this.$DebugMode;if(r&&e.error?e.error(n):r&&alert(n),r)throw t||new Error(n)},this.$Fail=function(n){throw new Error(n)},this.$Assert=function(n,t){var e=this.$DebugMode;if(e&&!n)throw new Error("Assert failed "+t||"")},this.$Trace=function(n){var t=window.console||{},e=this.$DebugMode;e&&t.log&&t.log(n)},this.$Execute=function(n){var t=this.$DebugMode;t&&n()},this.$LiveStamp=function(n,t){var e=this.$DebugMode;if(e){var r=document.createElement("DIV");r.setAttribute("id",t),n.$Live=r}},this.$C_AbstractProperty=function(){throw new Error("The property is abstract, it should be implemented by subclass.")},this.$C_AbstractMethod=function(){throw new Error("The method is abstract, it should be implemented by subclass.")},this.$C_AbstractClass=n},$JssorEasing$=window.$JssorEasing$={$EaseSwing:function(n){return-Math.cos(n*Math.PI)/2+.5},$EaseLinear:function(n){return n},$EaseInQuad:function(n){return n*n},$EaseOutQuad:function(n){return-n*(n-2)},$EaseInOutQuad:function(n){return(n*=2)<1?.5*n*n:-0.5*(--n*(n-2)-1)},$EaseInCubic:function(n){return n*n*n},$EaseOutCubic:function(n){return(n-=1)*n*n+1},$EaseInOutCubic:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},$EaseInQuart:function(n){return n*n*n*n},$EaseOutQuart:function(n){return-((n-=1)*n*n*n-1)},$EaseInOutQuart:function(n){return(n*=2)<1?.5*n*n*n*n:-0.5*((n-=2)*n*n*n-2)},$EaseInQuint:function(n){return n*n*n*n*n},$EaseOutQuint:function(n){return(n-=1)*n*n*n*n+1},$EaseInOutQuint:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},$EaseInSine:function(n){return 1-Math.cos(n*Math.PI/2)},$EaseOutSine:function(n){return Math.sin(n*Math.PI/2)},$EaseInOutSine:function(n){return-0.5*(Math.cos(Math.PI*n)-1)},$EaseInExpo:function(n){return 0==n?0:Math.pow(2,10*(n-1))},$EaseOutExpo:function(n){return 1==n?1:-Math.pow(2,-10*n)+1},$EaseInOutExpo:function(n){return 0==n||1==n?n:(n*=2)<1?.5*Math.pow(2,10*(n-1)):.5*(-Math.pow(2,-10*--n)+2)},$EaseInCirc:function(n){return-(Math.sqrt(1-n*n)-1)},$EaseOutCirc:function(n){return Math.sqrt(1-(n-=1)*n)},$EaseInOutCirc:function(n){return(n*=2)<1?-0.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},$EaseInElastic:function(n){if(!n||1==n)return n;var t=.3,e=.075;return-(Math.pow(2,10*(n-=1))*Math.sin(2*(n-e)*Math.PI/t))},$EaseOutElastic:function(n){if(!n||1==n)return n;var t=.3,e=.075;return Math.pow(2,-10*n)*Math.sin(2*(n-e)*Math.PI/t)+1},$EaseInOutElastic:function(n){if(!n||1==n)return n;var t=.45,e=.1125;return(n*=2)<1?-.5*Math.pow(2,10*(n-=1))*Math.sin(2*(n-e)*Math.PI/t):Math.pow(2,-10*(n-=1))*Math.sin(2*(n-e)*Math.PI/t)*.5+1},$EaseInBack:function(n){var t=1.70158;return n*n*((t+1)*n-t)},$EaseOutBack:function(n){var t=1.70158;return(n-=1)*n*((t+1)*n+t)+1},$EaseInOutBack:function(n){var t=1.70158;return(n*=2)<1?.5*n*n*(((t*=1.525)+1)*n-t):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},$EaseInBounce:function(n){return 1-$JssorEasing$.$EaseOutBounce(1-n)},$EaseOutBounce:function(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},$EaseInOutBounce:function(n){return.5>n?.5*$JssorEasing$.$EaseInBounce(2*n):.5*$JssorEasing$.$EaseOutBounce(2*n-1)+.5},$EaseGoBack:function(n){return 1-Math.abs((n*=2)-1)},$EaseInWave:function(n){return 1-Math.cos(n*Math.PI*2)},$EaseOutWave:function(n){return Math.sin(n*Math.PI*2)},$EaseOutJump:function(n){return 1-((n*=2)<1?(n=1-n)*n*n:(n-=1)*n*n)},$EaseInJump:function(n){return(n*=2)<1?n*n*n:(n=2-n)*n*n}},$JssorDirection$=window.$JssorDirection$={$TO_LEFT:1,$TO_RIGHT:2,$TO_TOP:4,$TO_BOTTOM:8,$HORIZONTAL:3,$VERTICAL:12,$GetDirectionHorizontal:function(n){return 3&n},$GetDirectionVertical:function(n){return 12&n},$IsHorizontal:function(n){return 3&n},$IsVertical:function(n){return 12&n}},$JssorKeyCode$={$BACKSPACE:8,$COMMA:188,$DELETE:46,$DOWN:40,$END:35,$ENTER:13,$ESCAPE:27,$HOME:36,$LEFT:37,$NUMPAD_ADD:107,$NUMPAD_DECIMAL:110,$NUMPAD_DIVIDE:111,$NUMPAD_ENTER:108,$NUMPAD_MULTIPLY:106,$NUMPAD_SUBTRACT:109,$PAGE_DOWN:34,$PAGE_UP:33,$PERIOD:190,$RIGHT:39,$SPACE:32,$TAB:9,$UP:38},$Jssor$=window.$Jssor$=new function(){function n(){if(!X){X={$Touchable:"ontouchstart"in window||"createTouch"in document};var n;(ft.pointerEnabled||(n=ft.msPointerEnabled))&&(X.$TouchActionAttr=n?"msTouchAction":"touchAction")}return X}function t(n){if(!at)if(at=-1,"Microsoft Internet Explorer"==lt&&window.attachEvent&&window.ActiveXObject){var t=dt.indexOf("MSIE");at=tt,ut=Et(dt.substring(t+5,dt.indexOf(";",t))),st=document.documentMode||ut}else if("Netscape"==lt&&window.addEventListener){var e=dt.indexOf("Firefox"),r=dt.indexOf("Safari"),o=dt.indexOf("Chrome"),i=dt.indexOf("AppleWebKit");if(e>=0)at=et,st=Et(dt.substring(e+8));else if(r>=0){var a=dt.substring(0,r).lastIndexOf("/");at=o>=0?ot:rt,st=Et(dt.substring(a+1,r))}else{var s=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/i.exec(dt);s&&(at=tt,st=ut=Et(s[1]))}i>=0&&(ct=Et(dt.substring(i+12)))}else{var s=/(opera)(?:.*version|)[ \/]([\w.]+)/i.exec(dt);s&&(at=it,st=Et(s[2]))}return n==at}function e(){return t(tt)}function r(){return e()&&(6>st||"BackCompat"==document.compatMode)}function o(){return t(et)}function i(){return t(rt)}function a(){return t(ot)}function s(){return t(it)}function u(){return i()&&ct>534&&535>ct}function $(){return e()&&9>st}function c(n){return Y||(d(["transform","WebkitTransform","msTransform","MozTransform","OTransform"],function(t){return void 0!=n.style[t]?(Y=t,!0):void 0}),Y=Y||"transform"),Y}function f(n){return{}.toString.call(n)}function l(){return Z||(Z={},d(["Boolean","Number","String","Function","Array","Date","RegExp","Object"],function(n){Z["[object "+n+"]"]=n.toLowerCase()})),Z}function d(n,t){if("[object Array]"==f(n)){for(var e=0;e<n.length;e++)if(t(n[e],e,n))return!0}else for(var r in n)if(t(n[r],r,n))return!0}function v(n){return null==n?String(n):l()[f(n)]||"object"}function h(n){for(var t in n)return!0}function m(n){try{return"object"==v(n)&&!n.nodeType&&n!=n.window&&(!n.constructor||{}.hasOwnProperty.call(n.constructor.prototype,"isPrototypeOf"))}catch(t){}}function E(n,t){return{x:n,y:t}}function p(n,t){setTimeout(n,t||0)}function g(n,t,e){var r=n&&"inherit"!=n?n:"";return d(t,function(n){var t=n.exec(r);if(t){var e=r.substr(0,t.index),o=r.substr(t.lastIndex+1,r.length-(t.lastIndex+1));r=e+o}}),r=e+(0!=r.indexOf(" ")?" ":"")+r}function w(n,t){9>st&&(n.style.filter=t)}function C(n,t,e){if(9>$t){var r=n.style.filter,o=new RegExp(/[\s]*progid:DXImageTransform\.Microsoft\.Matrix\([^\)]*\)/g),i=t?"progid:DXImageTransform.Microsoft.Matrix(M11="+t[0][0]+", M12="+t[0][1]+", M21="+t[1][0]+", M22="+t[1][1]+", SizingMethod='auto expand')":"",a=g(r,[o],i);w(n,a),K.$CssMarginTop(n,e.y),K.$CssMarginLeft(n,e.x)}}function y(n){n.constructor===y.caller&&n.$Construct&&n.$Construct.apply(n,y.caller.arguments)}function b(n){return n||window.event}function I(n,t,e){if(void 0==e){var r=n.currentStyle||n.style;return e=r[t],""==e&&window.getComputedStyle&&(r=n.ownerDocument.defaultView.getComputedStyle(n,null),r&&(e=r.getPropertyValue(t)||r[t])),e}n.style[t]=e}function T(n,t,e,r){return void 0==e?Et(I(n,t)):(r&&(e+="px"),void I(n,t,e))}function M(n,t,e){return T(n,t,e,!0)}function x(n,t){var e=2&t,r=t?T:I;return function(t,o){return r(t,n,o,e)}}function O(n){if(e()&&9>ut){var t=/opacity=([^)]*)/.exec(n.style.filter||"");return t?Et(t[1])/100:1}return Et(n.style.opacity||"1")}function S(n,t,r){if(e()&&9>ut){var o=n.style.filter||"",i=new RegExp(/[\s]*alpha\([^\)]*\)/g),a=Math.round(100*t),s="";(100>a||r)&&(s="alpha(opacity="+a+") ");var u=g(o,[i],s);w(n,u)}else n.style.opacity=1==t?"":Math.round(100*t)/100}function J(n,t){var e=t.$Rotate||0,r=void 0==t.$Scale?1:t.$Scale;if($()){var o=K.$CreateMatrix(e/180*Math.PI,r,r);C(n,e||1!=r?o:null,K.$GetMatrixOffset(o,t.$OriginalWidth,t.$OriginalHeight))}else{var i=c(n);if(i){var s="rotate("+e%360+"deg) scale("+r+")";a()&&ct>535&&"ontouchstart"in window&&(s+=" perspective(2000px)"),n.style[i]=s}}}function D(n,t,e,r){for(r=r||"u",n=n?n.firstChild:null;n;n=n.nextSibling)if(1==n.nodeType){if(F(n,r)==t)return n;if(!e){var o=D(n,t,e,r);if(o)return o}}}function P(n,t,e,r){r=r||"u";var o=[];for(n=n?n.firstChild:null;n;n=n.nextSibling)if(1==n.nodeType&&(F(n,r)==t&&o.push(n),!e)){var i=P(n,t,e,r);i.length&&(o=o.concat(i))}return o}function A(n,t,e){for(n=n?n.firstChild:null;n;n=n.nextSibling)if(1==n.nodeType){if(n.tagName==t)return n;if(!e){var r=A(n,t,e);if(r)return r}}}function R(n,t,e){var r=[];for(n=n?n.firstChild:null;n;n=n.nextSibling)if(1==n.nodeType&&(t&&n.tagName!=t||r.push(n),!e)){var o=R(n,t,e);o.length&&(r=r.concat(o))}return r}function L(){var n,t,e,r,o=arguments,i=1&o[0],a=1+i;for(n=o[a-1]||{};a<o.length;a++)if(t=o[a])for(e in t)r=t[e],void 0!==r&&(r=t[e],n[e]=i&&m(n[e])?L(i,{},r):r);return n}function N(n,t){$JssorDebug$.$Assert(t);var e,r,o,i={};for(e in n)if(r=n[e],o=t[e],r!==o){var a;m(r)&&m(o)&&(r=N(o),a=!h(r)),!a&&(i[e]=r)}return i}function B(n){return document.createElement(n)}function H(n,t,e){return void 0==e?n.getAttribute(t):void n.setAttribute(t,e)}function F(n,t){return H(n,t)||H(n,"data-"+t)}function G(n,t){return void 0==t?n.className:void(n.className=t)}function W(n){var t={};return d(n,function(n){t[n]=n}),t}function _(n,t){return n.match(t||nt)}function j(n,t){return W(_(n||"",t))}function U(n,t){var e="";return d(t,function(t){e&&(e+=n),e+=t}),e}function V(n,t,e){G(n,U(" ",L(N(j(G(n)),j(t)),j(e))))}function k(n,t,e){var r=n.cloneNode(!t);return e||K.$RemoveAttribute(r,"id"),r}function q(n){function t(){V(n,o,u[f||$||2&c||c])}function e(){$=0,t(),K.$RemoveEvent(document,"mouseup",e),K.$RemoveEvent(document,"touchend",e),K.$RemoveEvent(document,"touchcancel",e)}function r(n){f?K.$CancelEvent(n):($=4,t(),K.$AddEvent(document,"mouseup",e),K.$AddEvent(document,"touchend",e),K.$AddEvent(document,"touchcancel",e))}var o,i=this,a="",s=["av","pv","ds","dn"],u=[],$=0,c=0,f=0;i.$Selected=function(n){return void 0==n?c:(c=2&n||1&n,void t())},i.$Enable=function(n){return void 0==n?!f:(f=n?0:3,void t())},n=K.$GetElement(n);var l=$Jssor$.$Split(G(n));l&&(a=l.shift()),d(s,function(n){u.push(a+n)}),o=U(" ",u),u.unshift(""),K.$AddEvent(n,"mousedown",r),K.$AddEvent(n,"touchstart",r)}function z(){return pt||(pt=L({$MarginTop:K.$CssMarginTop,$MarginLeft:K.$CssMarginLeft,$Clip:K.$SetStyleClip,$Transform:K.$SetStyleTransform},gt)),pt}function Q(){return z(),pt.$Transform=pt.$Transform,pt}var X,Y,Z,K=this,nt=/\S+/g,tt=1,et=2,rt=3,ot=4,it=5,at=0,st=0,ut=0,$t=0,ct=0,ft=navigator,lt=ft.appName,dt=(ft.appVersion,ft.userAgent),vt=document.documentElement;K.$Device=n,K.$IsBrowserIE=e,K.$IsBrowserIeQuirks=r,K.$IsBrowserFireFox=o,K.$IsBrowserSafari=i,K.$IsBrowserChrome=a,K.$IsBrowserOpera=s,K.$IsBrowserBadTransform=u,K.$IsBrowserIe9Earlier=$,K.$BrowserVersion=function(){return st},K.$BrowserEngineVersion=function(){return ut||st},K.$WebKitVersion=function(){return t(),ct},K.$Delay=p,K.$Inherit=function(n,t){return t.call(n),L({},n)},K.$Construct=y,K.$GetElement=function(n){return K.$IsString(n)&&(n=document.getElementById(n)),n},K.$GetEvent=b,K.$EvtSrc=function(n){return n=b(n),n.target||n.srcElement||document},K.$EvtTarget=function(n){return n=b(n),n.relatedTarget||n.toElement},K.$EvtWhich=function(n){return n=b(n),n.which||[0,1,3,0,2][n.button]||n.charCode||n.keyCode},K.$MousePosition=function(n){return n=b(n),{x:n.pageX||n.clientX||0,y:n.pageY||n.clientY||0}},K.$PageScroll=function(){var n=document.body;return{x:(window.pageXOffset||vt.scrollLeft||n.scrollLeft||0)-(vt.clientLeft||n.clientLeft||0),y:(window.pageYOffset||vt.scrollTop||n.scrollTop||0)-(vt.clientTop||n.clientTop||0)}},K.$WindowSize=function(){var n=document.body;return{x:n.clientWidth||vt.clientWidth,y:n.clientHeight||vt.clientHeight}},K.$SetStyleTransform=function(n,t){u()?p(K.$CreateCallback(null,J,n,t)):J(n,t)},K.$SetStyleTransformOrigin=function(n,t){var e=c(n);e&&(n.style[e+"Origin"]=t)},K.$CssScale=function(n,t){if(e()&&9>ut||10>ut&&r())n.style.zoom=1==t?"":t;else{var o=c(n);if(o){var i="scale("+t+")",a=n.style[o],s=new RegExp(/[\s]*scale\(.*?\)/g),u=g(a,[s],i);n.style[o]=u}}},K.$EnableHWA=function(n){n.style[c(n)]&&"none"!=n.style[c(n)]||(n.style[c(n)]="perspective(2000px)")},K.$DisableHWA=function(n){n.style[c(n)]="none"};var ht=0,mt=0;K.$WindowResizeFilter=function(n,t){return $()?function(){var e=!0,o=r()?n.document.body:n.document.documentElement;if(o){var i=o.offsetWidth-ht,a=o.offsetHeight-mt;i||a?(ht+=i,mt+=a):e=!1}e&&t()}:t},K.$MouseOverOutFilter=function(n,t){return $JssorDebug$.$Execute(function(){if(!t)throw new Error('Null reference, parameter "target".')}),function(e){e=b(e);var r=e.type,o=e.relatedTarget||("mouseout"==r?e.toElement:e.fromElement);(!o||o!==t&&!K.$IsChild(t,o))&&n(e)}},K.$AddEvent=function(n,t,e,r){n=K.$GetElement(n),$JssorDebug$.$Execute(function(){n||$JssorDebug$.$Fail("Parameter 'elmt' not specified."),e||$JssorDebug$.$Fail("Parameter 'handler' not specified."),n.addEventListener||n.attachEvent||$JssorDebug$.$Fail("Unable to attach event handler, no known technique.")}),n.addEventListener?("mousewheel"==t&&n.addEventListener("DOMMouseScroll",e,r),n.addEventListener(t,e,r)):n.attachEvent&&(n.attachEvent("on"+t,e),r&&n.setCapture&&n.setCapture())},K.$RemoveEvent=function(n,t,e,r){n=K.$GetElement(n),n.removeEventListener?("mousewheel"==t&&n.removeEventListener("DOMMouseScroll",e,r),n.removeEventListener(t,e,r)):n.detachEvent&&(n.detachEvent("on"+t,e),r&&n.releaseCapture&&n.releaseCapture())},K.$FireEvent=function(n,t){$JssorDebug$.$Execute(function(){document.createEvent||document.createEventObject||$JssorDebug$.$Fail("Unable to fire event, no known technique."),n.dispatchEvent||n.fireEvent||$JssorDebug$.$Fail("Unable to fire event, no known technique.")});var e;if(document.createEvent)e=document.createEvent("HTMLEvents"),e.initEvent(t,!1,!1),n.dispatchEvent(e);else{var r="on"+t;e=document.createEventObject(),n.fireEvent(r,e)}},K.$CancelEvent=function(n){n=b(n),n.preventDefault&&n.preventDefault(),n.cancel=!0,n.returnValue=!1},K.$StopEvent=function(n){n=b(n),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0},K.$CreateCallback=function(n,t){var e=[].slice.call(arguments,2),r=function(){var r=e.concat([].slice.call(arguments,0));return t.apply(n,r)};return r},K.$InnerText=function(n,t){if(void 0==t)return n.textContent||n.innerText;var e=document.createTextNode(t);K.$Empty(n),n.appendChild(e)},K.$InnerHtml=function(n,t){return void 0==t?n.innerHTML:void(n.innerHTML=t)},K.$GetClientRect=function(n){var t=n.getBoundingClientRect();return{x:t.left,y:t.top,w:t.right-t.left,h:t.bottom-t.top}},K.$ClearInnerHtml=function(n){n.innerHTML=""},K.$EncodeHtml=function(n){var t=K.$CreateDiv();return K.$InnerText(t,n),K.$InnerHtml(t)},K.$DecodeHtml=function(n){var t=K.$CreateDiv();return K.$InnerHtml(t,n),K.$InnerText(t)},K.$SelectElement=function(n){var t;window.getSelection&&(t=window.getSelection());var e=null;document.createRange?(e=document.createRange(),e.selectNode(n)):(e=document.body.createTextRange(),e.moveToElementText(n),e.select()),t&&t.addRange(e)},K.$DeselectElements=function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},K.$Children=function(n,t){for(var e=[],r=n.firstChild;r;r=r.nextSibling)(t||1==r.nodeType)&&e.push(r);return e},K.$FindChild=D,K.$FindChildren=P,K.$FindChildByTag=A,K.$FindChildrenByTag=R,K.$GetElementsByTag=function(n,t){return n.getElementsByTagName(t)},K.$Extend=L,K.$Unextend=N,K.$IsFunction=function(n){return"function"==v(n)},K.$IsArray=function(n){return"array"==v(n)},K.$IsString=function(n){return"string"==v(n)},K.$IsNumeric=function(n){return!isNaN(Et(n))&&isFinite(n)},K.$Type=v,K.$Each=d,K.$IsNotEmpty=h,K.$IsPlainObject=m,K.$CreateElement=B,K.$CreateDiv=function(){return B("DIV")},K.$CreateSpan=function(){return B("SPAN")},K.$EmptyFunction=function(){},K.$Attribute=H,K.$AttributeEx=F,K.$ClassName=G,K.$ToHash=W,K.$Split=_,K.$Join=U,K.$AddClass=function(n,t){V(n,null,t)},K.$RemoveClass=V,K.$ReplaceClass=V,K.$ParentNode=function(n){return n.parentNode},K.$HideElement=function(n){K.$CssDisplay(n,"none")},K.$EnableElement=function(n,t){t?K.$Attribute(n,"disabled",!0):K.$RemoveAttribute(n,"disabled")},K.$HideElements=function(n){for(var t=0;t<n.length;t++)K.$HideElement(n[t])},K.$ShowElement=function(n,t){K.$CssDisplay(n,t?"none":"")},K.$ShowElements=function(n,t){for(var e=0;e<n.length;e++)K.$ShowElement(n[e],t)},K.$RemoveAttribute=function(n,t){n.removeAttribute(t)},K.$CanClearClip=function(){return e()&&10>st},K.$SetStyleClip=function(n,t){if(t)n.style.clip="rect("+Math.round(t.$Top)+"px "+Math.round(t.$Right)+"px "+Math.round(t.$Bottom)+"px "+Math.round(t.$Left)+"px)";else{var e=n.style.cssText,r=[new RegExp(/[\s]*clip: rect\(.*?\)[;]?/i),new RegExp(/[\s]*cliptop: .*?[;]?/i),new RegExp(/[\s]*clipright: .*?[;]?/i),new RegExp(/[\s]*clipbottom: .*?[;]?/i),new RegExp(/[\s]*clipleft: .*?[;]?/i)],o=g(e,r,"");$Jssor$.$CssCssText(n,o)}},K.$GetNow=function(){return(new Date).getTime()},K.$AppendChild=function(n,t){n.appendChild(t)},K.$AppendChildren=function(n,t){d(t,function(t){K.$AppendChild(n,t)})},K.$InsertBefore=function(n,t,e){(e||t.parentNode).insertBefore(n,t)},K.$InsertAfter=function(n,t,e){K.$InsertBefore(n,t.nextSibling,e||t.parentNode)},K.$InsertAdjacentHtml=function(n,t,e){n.insertAdjacentHTML(t,e)},K.$RemoveElement=function(n,t){(t||n.parentNode).removeChild(n)},K.$RemoveElements=function(n,t){d(n,function(n){K.$RemoveElement(n,t)})},K.$Empty=function(n){K.$RemoveElements(K.$Children(n,!0),n)},K.$ParseInt=function(n,t){return parseInt(n,t||10)};var Et=parseFloat;K.$ParseFloat=Et,K.$IsChild=function(n,t){for(var e=document.body;t&&n!==t&&e!==t;)try{t=t.parentNode}catch(r){return!1}return n===t},K.$CloneNode=k,K.$LoadImage=function(n,t){function e(n,i){K.$RemoveEvent(o,"load",e),K.$RemoveEvent(o,"abort",r),K.$RemoveEvent(o,"error",r),t&&t(o,i)}function r(n){e(n,!0)}var o=new Image;s()&&11.6>st||!n?e(!n):(K.$AddEvent(o,"load",e),K.$AddEvent(o,"abort",r),K.$AddEvent(o,"error",r),o.src=n)},K.$LoadImages=function(n,t,e){function r(n){o--,t&&n&&n.src==t.src&&(t=n),!o&&e&&e(t)}var o=n.length+1;d(n,function(n){K.$LoadImage(n.src,r)}),r()},K.$BuildElement=function(n,t,e,r){r&&(n=k(n));var o=P(n,t);o.length||(o=$Jssor$.$GetElementsByTag(n,t));for(var i=o.length-1;i>-1;i--){var a=o[i],s=k(e);G(s,G(a)),$Jssor$.$CssCssText(s,a.style.cssText),$Jssor$.$InsertBefore(s,a),$Jssor$.$RemoveElement(a)}return n},K.$Buttonize=function(n){return new q(n)},K.$Css=I,K.$CssN=T,K.$CssP=M,K.$CssOverflow=x("overflow"),K.$CssTop=x("top",2),K.$CssLeft=x("left",2),K.$CssWidth=x("width",2),K.$CssHeight=x("height",2),K.$CssMarginLeft=x("marginLeft",2),K.$CssMarginTop=x("marginTop",2),K.$CssPosition=x("position"),K.$CssDisplay=x("display"),K.$CssZIndex=x("zIndex",1),K.$CssFloat=function(n,t){return I(n,e()?"styleFloat":"cssFloat",t)},K.$CssOpacity=function(n,t,e){return void 0==t?O(n):void S(n,t,e)},K.$CssCssText=function(n,t){return void 0==t?n.style.cssText:void(n.style.cssText=t)};var pt,gt={$Opacity:K.$CssOpacity,$Top:K.$CssTop,$Left:K.$CssLeft,$Width:K.$CssWidth,$Height:K.$CssHeight,$Position:K.$CssPosition,$Display:K.$CssDisplay,$ZIndex:K.$CssZIndex};K.$StyleSetter=z,K.$StyleSetterEx=Q,K.$GetStyles=function(n,t){z();var e={};return d(t,function(t,r){gt[r]&&(e[r]=gt[r](n))}),e},K.$SetStyles=function(n,t){var e=z();d(t,function(t,r){e[r]&&e[r](n,t)})},K.$SetStylesEx=function(n,t){Q(),K.$SetStyles(n,t)};var wt=new function(){function n(n,t){for(var e=n[0].length,r=n.length,o=t[0].length,i=[],a=0;r>a;a++)for(var s=i[a]=[],u=0;o>u;u++){for(var $=0,c=0;e>c;c++)$+=n[a][c]*t[c][u];s[u]=$}return i}var t=this;t.$ScaleX=function(n,e){return t.$ScaleXY(n,e,0)},t.$ScaleY=function(n,e){return t.$ScaleXY(n,0,e)},t.$ScaleXY=function(t,e,r){return n(t,[[e,0],[0,r]])},t.$TransformPoint=function(t,e){var r=n(t,[[e.x],[e.y]]);return E(r[0][0],r[1][0])}};K.$CreateMatrix=function(n,t,e){var r=Math.cos(n),o=Math.sin(n);return[[r*t,-o*e],[o*t,r*e]]},K.$GetMatrixOffset=function(n,t,e){var r=wt.$TransformPoint(n,E(-t/2,-e/2)),o=wt.$TransformPoint(n,E(t/2,-e/2)),i=wt.$TransformPoint(n,E(t/2,e/2)),a=wt.$TransformPoint(n,E(-t/2,e/2));return E(Math.min(r.x,o.x,i.x,a.x)+t/2,Math.min(r.y,o.y,i.y,a.y)+e/2)},K.$Cast=function(n,t,e,r,o,i,a){var s=t;if(n){s={};for(var u in t){var $=i[u]||1,c=o[u]||[0,1],f=(e-c[0])/c[1];f=Math.min(Math.max(f,0),1),f*=$;var l=Math.floor(f);f!=l&&(f-=l);var d,v=r[u]||r.$Default||$JssorEasing$.$EaseSwing,h=v(f),m=n[u],E=(t[u],t[u]);$Jssor$.$IsNumeric(E)?d=m+E*h:(d=$Jssor$.$Extend({$Offset:{}},n[u]),$Jssor$.$Each(E.$Offset,function(n,t){var e=n*h;d.$Offset[t]=e,d[t]+=e})),s[u]=d}(t.$Zoom||t.$Rotate)&&(s.$Transform={$Rotate:s.$Rotate||0,$Scale:s.$Zoom,$OriginalWidth:a.$OriginalWidth,$OriginalHeight:a.$OriginalHeight})}if(t.$Clip&&a.$Move){var p=s.$Clip.$Offset,g=(p.$Top||0)+(p.$Bottom||0),w=(p.$Left||0)+(p.$Right||0);s.$Left=(s.$Left||0)+w,s.$Top=(s.$Top||0)+g,s.$Clip.$Left-=w,s.$Clip.$Right-=w,s.$Clip.$Top-=g,s.$Clip.$Bottom-=g}return s.$Clip&&$Jssor$.$CanClearClip()&&!s.$Clip.$Top&&!s.$Clip.$Left&&s.$Clip.$Right==a.$OriginalWidth&&s.$Clip.$Bottom==a.$OriginalHeight&&(s.$Clip=null),s}};
;function $JssorCaptionSliderBase$(){$JssorAnimator$.call(this,0,0),this.$Revert=$Jssor$.$EmptyFunction}var $JssorSlideshowFormations$=window.$JssorSlideshowFormations$=new function(){function $($){return($&l)==l}function s($){return($&u)==u}function o($,s,o){o.push(s),$[s]=$[s]||[],$[s].push(o)}var e=this,t=0,i=1,r=2,n=3,a=1,l=2,u=4,c=8,d=256,J=512,h=1024,f=2048,g=f+a,p=f+l,E=J+a,v=J+l,C=d+u,b=d+c,S=h+u,m=h+c;e.$FormationStraight=function($){var s,e,t=$.$Cols,i=$.$Rows,r=$.$Assembly,n=$.$Count,a=[],l=0,u=0,c=t-1,d=i-1,J=n-1;for(u=0;i>u;u++)for(l=0;t>l;l++){switch(s=u+","+l,r){case g:e=J-(l*i+(d-u));break;case S:e=J-(u*t+(c-l));break;case E:e=J-(l*i+u);case C:e=J-(u*t+l);break;case p:e=l*i+u;break;case b:e=u*t+(c-l);break;case v:e=l*i+(d-u);break;default:e=u*t+l}o(a,e,[u,l])}return a},e.$FormationSwirl=function($){var s,e,a=$.$Cols,l=$.$Rows,u=$.$Assembly,c=$.$Count,d=[],J=[],h=0,f=0,m=0,w=a-1,O=l-1,T=0;switch(u){case g:f=w,m=0,e=[r,i,n,t];break;case S:f=0,m=O,e=[t,n,i,r];break;case E:f=w,m=O,e=[n,i,r,t];break;case C:f=w,m=O,e=[i,n,t,r];break;case p:f=0,m=0,e=[r,t,n,i];break;case b:f=w,m=0,e=[i,r,t,n];break;case v:f=0,m=O,e=[n,t,r,i];break;default:f=0,m=0,e=[t,r,i,n]}for(h=0;c>h;){if(s=m+","+f,f>=0&&a>f&&m>=0&&l>m&&!J[s])J[s]=!0,o(d,h++,[m,f]);else switch(e[T++%e.length]){case t:f--;break;case r:m--;break;case i:f++;break;case n:m++}switch(e[T%e.length]){case t:f++;break;case r:m++;break;case i:f--;break;case n:m--}}return d},e.$FormationZigZag=function($){var s,e,a=$.$Cols,l=$.$Rows,u=$.$Assembly,c=$.$Count,d=[],J=0,h=0,f=0,m=a-1,w=l-1,O=0;switch(u){case g:h=m,f=0,e=[r,i,n,i];break;case S:h=0,f=w,e=[t,n,i,n];break;case E:h=m,f=w,e=[n,i,r,i];break;case C:h=m,f=w,e=[i,n,t,n];break;case p:h=0,f=0,e=[r,t,n,t];break;case b:h=m,f=0,e=[i,r,t,r];break;case v:h=0,f=w,e=[n,t,r,t];break;default:h=0,f=0,e=[t,r,i,r]}for(J=0;c>J;)if(s=f+","+h,h>=0&&a>h&&f>=0&&l>f&&"undefined"==typeof d[s])switch(o(d,J++,[f,h]),e[O%e.length]){case t:h++;break;case r:f++;break;case i:h--;break;case n:f--}else{switch(e[O++%e.length]){case t:h--;break;case r:f--;break;case i:h++;break;case n:f++}switch(e[O++%e.length]){case t:h++;break;case r:f++;break;case i:h--;break;case n:f--}}return d},e.$FormationStraightStairs=function(e){var t,i=e.$Cols,r=e.$Rows,n=e.$Assembly,a=e.$Count,l=[],u=0,c=0,d=0,J=i-1,h=r-1,f=a-1;switch(n){case g:case v:case E:case p:var w=0,O=0;break;case b:case S:case C:case m:var w=J,O=0;break;default:n=m;var w=J,O=0}for(c=w,d=O;a>u;){switch(t=d+","+c,s(n)||$(n)?o(l,f-u++,[d,c]):o(l,u++,[d,c]),n){case g:case v:c--,d++;break;case E:case p:c++,d--;break;case b:case S:c--,d--;break;case m:case C:default:c++,d++}if(0>c||0>d||c>J||d>h){switch(n){case g:case v:w++;break;case b:case S:case E:case p:O++;break;case m:case C:default:w--}if(0>w||0>O||w>J||O>h){switch(n){case g:case v:w=J,O++;break;case E:case p:O=h,w++;break;case b:case S:O=h,w--;break;case m:case C:default:w=0,O++}O>h?O=h:0>O?O=0:w>J?w=J:0>w&&(w=0)}d=O,c=w}}return l},e.$FormationSquare=function($){var s,e,t,i,r,n=$.$Cols||1,a=$.$Rows||1,l=[];for(t=a>n?(a-n)/2:0,i=n>a?(n-a)/2:0,r=Math.round(Math.max(n/2,a/2))+1,s=0;n>s;s++)for(e=0;a>e;e++)o(l,r-Math.min(s+1+t,e+1+i,n-s+t,a-e+i),[e,s]);return l},e.$FormationRectangle=function($){var s,e,t,i=$.$Cols||1,r=$.$Rows||1,n=[];for(t=Math.round(Math.min(i/2,r/2))+1,s=0;i>s;s++)for(e=0;r>e;e++)o(n,t-Math.min(s+1,e+1,i-s,r-e),[e,s]);return n},e.$FormationRandom=function($){var s,e,t=[];for(s=0;s<$.$Rows;s++)for(e=0;e<$.$Cols;e++)o(t,Math.ceil(1e5*Math.random())%13,[s,e]);return t},e.$FormationCircle=function($){var s,e,t=$.$Cols||1,i=$.$Rows||1,r=[],n=t/2-.5,a=i/2-.5;for(s=0;t>s;s++)for(e=0;i>e;e++)o(r,Math.round(Math.sqrt(Math.pow(s-n,2)+Math.pow(e-a,2))),[e,s]);return r},e.$FormationCross=function($){var s,e,t=$.$Cols||1,i=$.$Rows||1,r=[],n=t/2-.5,a=i/2-.5;for(s=0;t>s;s++)for(e=0;i>e;e++)o(r,Math.round(Math.min(Math.abs(s-n),Math.abs(e-a))),[e,s]);return r},e.$FormationRectangleCross=function($){var s,e,t=$.$Cols||1,i=$.$Rows||1,r=[],n=t/2-.5,a=i/2-.5,l=Math.max(n,a)+1;for(s=0;t>s;s++)for(e=0;i>e;e++)o(r,Math.round(l-Math.max(n-Math.abs(s-n),a-Math.abs(e-a)))-1,[e,s]);return r}},$JssorSlideshowRunner$=window.$JssorSlideshowRunner$=function($,s,o,e,t){function i($,s){var o={$Interval:s,$Duration:1,$Delay:0,$Cols:1,$Rows:1,$Opacity:0,$Zoom:0,$Clip:0,$Move:!1,$SlideOut:!1,$Reverse:!1,$Formation:$JssorSlideshowFormations$.$FormationRandom,$Assembly:1032,$ChessMode:{$Column:0,$Row:0},$Easing:$JssorEasing$.$EaseSwing,$Round:{},$Blocks:[],$During:{}};return $Jssor$.$Extend(o,$),o.$Count=o.$Cols*o.$Rows,$Jssor$.$IsFunction(o.$Easing)&&(o.$Easing={$Default:o.$Easing}),o.$FramesCount=Math.ceil(o.$Duration/o.$Interval),o.$GetBlocks=function($,s){$/=o.$Cols,s/=o.$Rows;var e=$+"x"+s;if(!o.$Blocks[e]){o.$Blocks[e]={$Width:$,$Height:s};for(var t=0;t<o.$Cols;t++)for(var i=0;i<o.$Rows;i++)o.$Blocks[e][i+","+t]={$Top:i*s,$Right:t*$+$,$Bottom:i*s+s,$Left:t*$}}return o.$Blocks[e]},o.$Brother&&(o.$Brother=i(o.$Brother,s),o.$SlideOut=!0),o}function r($,s,o,e,t,i){function r($){var s=$.$Formation($);return $.$Reverse?s.reverse():s}var n,a,l,u,c,d=this,J={},h={},f=[],g=o.$ChessMode.$Column||0,p=o.$ChessMode.$Row||0,E=o.$GetBlocks(t,i),v=r(o),C=v.length-1,b=o.$Duration+o.$Delay*C,S=e+b,m=o.$SlideOut;if(S+=50,d.$EndTime=S,d.$ShowFrame=function($){$-=e;var s=b>$;if(s||c){c=s,m||($=b-$);var t=Math.ceil($/o.$Interval);$Jssor$.$Each(h,function($,s){var o=Math.max(t,$.$Min);o=Math.min(o,$.length-1),$.$LastFrameIndex!=o&&($.$LastFrameIndex||m?o==$.$Max&&m&&$Jssor$.$HideElement(f[s]):$Jssor$.$ShowElement(f[s]),$.$LastFrameIndex=o,$Jssor$.$SetStylesEx(f[s],$[o]))})}},s=$Jssor$.$CloneNode(s),$Jssor$.$IsBrowserIe9Earlier()){var w=!s["no-image"],O=$Jssor$.$FindChildrenByTag(s);$Jssor$.$Each(O,function($){(w||$["jssor-slider"])&&$Jssor$.$CssOpacity($,$Jssor$.$CssOpacity($),!0)})}$Jssor$.$Each(v,function($,s){$Jssor$.$Each($,function($){var e=$[0],r=$[1],c=e+","+r,d=!1,f=!1,v=!1;g&&r%2&&(3&g&&(d=!d),12&g&&(f=!f),16&g&&(v=!v)),p&&e%2&&(3&p&&(d=!d),12&p&&(f=!f),16&p&&(v=!v)),o.$Top=o.$Top||4&o.$Clip,o.$Bottom=o.$Bottom||8&o.$Clip,o.$Left=o.$Left||1&o.$Clip,o.$Right=o.$Right||2&o.$Clip;var C=f?o.$Bottom:o.$Top,b=f?o.$Top:o.$Bottom,S=d?o.$Right:o.$Left,w=d?o.$Left:o.$Right;o.$Clip=C||b||S||w,u={},l={$Top:0,$Left:0,$Opacity:1,$Width:t,$Height:i},a=$Jssor$.$Extend({},l),n=$Jssor$.$Extend({},E[c]),o.$Opacity&&(l.$Opacity=2-o.$Opacity),o.$ZIndex&&(l.$ZIndex=o.$ZIndex,a.$ZIndex=0);var O=o.$Cols*o.$Rows>1||o.$Clip;if(o.$Zoom||o.$Rotate){var T=!0;if($Jssor$.$IsBrowserIe9Earlier()&&(o.$Cols*o.$Rows>1?T=!1:O=!1),T){l.$Zoom=o.$Zoom?o.$Zoom-1:1,a.$Zoom=1,($Jssor$.$IsBrowserIe9Earlier()||$Jssor$.$IsBrowserOpera())&&(l.$Zoom=Math.min(l.$Zoom,2));var D=o.$Rotate;l.$Rotate=360*D*(v?-1:1),a.$Rotate=0}}if(O){if(o.$Clip){var x=o.$ScaleClip||1,y=n.$Offset={};C&&b?(y.$Top=E.$Height/2*x,y.$Bottom=-y.$Top):C?y.$Bottom=-E.$Height*x:b&&(y.$Top=E.$Height*x),S&&w?(y.$Left=E.$Width/2*x,y.$Right=-y.$Left):S?y.$Right=-E.$Width*x:w&&(y.$Left=E.$Width*x)}u.$Clip=n,a.$Clip=E[c]}var A=d?1:-1,I=f?1:-1;o.x&&(l.$Left+=t*o.x*A),o.y&&(l.$Top+=i*o.y*I),$Jssor$.$Each(l,function($,s){$Jssor$.$IsNumeric($)&&$!=a[s]&&(u[s]=$-a[s])}),J[c]=m?a:l;var P=o.$FramesCount,N=Math.round(s*o.$Delay/o.$Interval);h[c]=new Array(N),h[c].$Min=N,h[c].$Max=N+P-1;for(var M=0;P>=M;M++){var R=$Jssor$.$Cast(a,u,M/P,o.$Easing,o.$During,o.$Round,{$Move:o.$Move,$OriginalWidth:t,$OriginalHeight:i});R.$ZIndex=R.$ZIndex||1,h[c].push(R)}})}),v.reverse(),$Jssor$.$Each(v,function(o){$Jssor$.$Each(o,function(o){var e=o[0],t=o[1],i=e+","+t,r=s;(t||e)&&(r=$Jssor$.$CloneNode(s)),$Jssor$.$SetStyles(r,J[i]),$Jssor$.$CssOverflow(r,"hidden"),$Jssor$.$CssPosition(r,"absolute"),$.$AddClipElement(r),f[i]=r,$Jssor$.$ShowElement(r,!m)})})}function n(){var $=this,s=0;$JssorAnimator$.call($,0,a),$.$OnPositionChange=function($,o){o-s>p&&(s=o,u&&u.$ShowFrame(o),l&&l.$ShowFrame(o))},$.$Transition=J}var a,l,u,c,d,J,h=this,f=0,g=e.$TransitionsOrder,p=8;h.$GetTransition=function(){var $=0,s=e.$Transitions,o=s.length;return $=g?f++%o:Math.floor(Math.random()*o),s[$]&&(s[$].$Index=$),s[$]},h.$Initialize=function(e,t,n,f,g){$JssorDebug$.$Execute(function(){l&&$JssorDebug$.$Fail("slideshow runner has not been cleared.")}),J=g,g=i(g,p),d=n,c=f;var E=f.$Item,v=n.$Item;E["no-image"]=!f.$Image,v["no-image"]=!n.$Image;var C=E,b=v,S=g,m=g.$Brother||i({},p);g.$SlideOut||(C=v,b=E);var w=m.$Shift||0;l=new r($,b,m,Math.max(w-m.$Interval,0),s,o),u=new r($,C,S,Math.max(m.$Interval-w,0),s,o),l.$ShowFrame(0),u.$ShowFrame(0),a=Math.max(l.$EndTime,u.$EndTime),h.$Index=e},h.$Clear=function(){$.$Clear(),l=null,u=null},h.$GetProcessor=function(){var $=null;return u&&($=new n),$},($Jssor$.$IsBrowserIe9Earlier()||$Jssor$.$IsBrowserOpera()||t&&$Jssor$.$WebKitVersion()<537)&&(p=16),$JssorObject$.call(h),$JssorAnimator$.call(h,-1e7,1e7)},$JssorSlider$=window.$JssorSlider$=function($,s){function o(){var $=this;$JssorAnimator$.call($,-1e8,2e8),$.$GetCurrentSlideInfo=function(){var s=$.$GetPosition_Display(),o=Math.floor(s),e=O(o),t=s-Math.floor(s);return{$Index:e,$VirtualIndex:o,$Position:t}},$.$OnPositionChange=function($,s){var o=Math.floor(s);o!=s&&s>$&&o++,b(o,!0),F.$TriggerEvent($JssorSlider$.$EVT_POSITION_CHANGE,O(s),O($),s,$)}}function e(){var $=this;$JssorAnimator$.call($,0,0,{$LoopLength:_s}),$Jssor$.$Each(uo,function(s){1&Xs&&s.$SetLoopLength(_s),$.$Chain(s),s.$Shift(Ss/Vs)})}function t(){var $=this,s=so.$Elmt;$JssorAnimator$.call($,-1,2,{$Easing:$JssorEasing$.$EaseLinear,$Setter:{$Position:l},$LoopLength:_s},s,{$Position:1},{$Position:-2}),$.$Wrapper=s,$JssorDebug$.$Execute(function(){$Jssor$.$Attribute(so.$Elmt,"debug-id","slide_container")})}function i($,s){var e,t,i,r,n,a=this;$JssorAnimator$.call(a,-1e8,2e8,{$IntervalMax:100}),a.$OnStart=function(){Os=!0,Ds=null,F.$TriggerEvent($JssorSlider$.$EVT_SWIPE_START,O(Ps.$GetPosition()),Ps.$GetPosition())},a.$OnStop=function(){Os=!1,r=!1;var $=Ps.$GetCurrentSlideInfo();F.$TriggerEvent($JssorSlider$.$EVT_SWIPE_END,O(Ps.$GetPosition()),Ps.$GetPosition()),$.$Position||C($.$VirtualIndex,ks)},a.$OnPositionChange=function($,s){var o;if(r)o=n;else if(o=t,i){var a=s/i;o=L.$SlideEasing(a)*(t-e)+e}Ps.$GoToPosition(o)},a.$PlayCarousel=function($,s,o,r){$JssorDebug$.$Execute(function(){a.$IsPlaying()&&$JssorDebug$.$Fail("The carousel is already playing.")}),e=$,t=s,i=o,Ps.$GoToPosition($),a.$GoToPosition(0),a.$PlayToPosition(o,r)},a.$StandBy=function($){r=!0,n=$,a.$Play($,null,!0)},a.$SetStandByPosition=function($){n=$},a.$MoveCarouselTo=function($){Ps.$GoToPosition($)},Ps=new o,Ps.$Combine($),Ps.$Combine(s)}function r(){var $=this,s=w();$Jssor$.$CssZIndex(s,0),$Jssor$.$Css(s,"pointerEvents","none"),$.$Elmt=s,$.$AddClipElement=function($){$Jssor$.$AppendChild(s,$),$Jssor$.$ShowElement(s)},$.$Clear=function(){$Jssor$.$HideElement(s),$Jssor$.$Empty(s)}}function n($,s){function o(s){g&&g.$Revert(),f&&f.$Revert(),h($,s),T=!0,f=new W.$Class($,W,1),$JssorDebug$.$LiveStamp(f,"caption_slider_"+_+"_in"),g=new W.$Class($,W),$JssorDebug$.$LiveStamp(g,"caption_slider_"+_+"_out"),$JssorDebug$.$Execute(function(){_++}),g.$GoToPosition(0),f.$GoToPosition(0)}function e(){f.$Version<W.$Version&&o()}function t($,o,e){if(!m&&(m=!0,v&&e)){var t=e.width,i=e.height,r=t,n=i;if(t&&i&&L.$FillMode){if(3&L.$FillMode&&(!(4&L.$FillMode)||t>Ls||i>Gs)){var a=!1,l=Ls/Gs*i/t;1&L.$FillMode?a=l>1:2&L.$FillMode&&(a=1>l),r=a?t*Gs/i:Ls,n=a?Gs:i*Ls/t}$Jssor$.$CssWidth(v,r),$Jssor$.$CssHeight(v,n),$Jssor$.$CssTop(v,(Gs-n)/2),$Jssor$.$CssLeft(v,(Ls-r)/2)}$Jssor$.$CssPosition(v,"absolute"),F.$TriggerEvent($JssorSlider$.$EVT_LOAD_END,s)}$Jssor$.$HideElement(o),$&&$(I)}function i($,o,e,t){if(t==Ds&&ks==s&&vs&&!Es){var i=O($);oo.$Initialize(i,s,o,I,e),o.$HideContentForSlideshow(),Ns.$Locate(i,1),Ns.$GoToPosition(i),Ms.$PlayCarousel($,$,0)}}function r(o){if(o==Ds&&ks==s){if(!D){var t=null;oo&&(oo.$Index==s?t=oo.$GetProcessor():oo.$Clear()),e(),D=new a($,s,t,I.$GetCaptionSliderIn(),I.$GetCaptionSliderOut()),D.$SetPlayer(y)}!D.$IsPlaying()&&D.$Replay()}}function n($,o,e){if($==s){$!=o?uo[o]&&uo[o].$ParkOut():!e&&D&&D.$AdjustIdleOnPark(),y&&y.$Enable();var t=Ds=$Jssor$.$GetNow();I.$LoadImage($Jssor$.$CreateCallback(null,r,t))}else{var i=Math.abs(s-$),n=Zs+L.$LazyLoading-1;(!w||n>=i)&&I.$LoadImage()}}function u(){ks==s&&D&&(D.$Stop(),y&&y.$Quit(),y&&y.$Disable(),D.$OpenSlideshowPanel())}function c(){ks==s&&D&&D.$Stop()}function d($){ws||F.$TriggerEvent($JssorSlider$.$EVT_CLICK,s,$)}function J(){y=x.pInstance,D&&D.$SetPlayer(y)}function h($,s,o){if($JssorDebug$.$Execute(function(){$Jssor$.$Attribute($,"jssor-slider")&&$JssorDebug$.$Log("Child slider found.")}),!$Jssor$.$Attribute($,"jssor-slider")){o=o||0,T||("IMG"==$.tagName&&(N.push($),$Jssor$.$Attribute($,"src")||(w=!0,$["display-origin"]=$Jssor$.$CssDisplay($),$Jssor$.$HideElement($))),$Jssor$.$IsBrowserIe9Earlier()&&$Jssor$.$CssZIndex($,($Jssor$.$CssZIndex($)||0)+1),L.$HWA&&$Jssor$.$WebKitVersion()&&($Jssor$.$WebKitVersion()<534||!bs&&!$Jssor$.$IsBrowserChrome())&&$Jssor$.$EnableHWA($));var e=$Jssor$.$Children($);$Jssor$.$Each(e,function(e){var t=e.tagName,i=$Jssor$.$AttributeEx(e,"u");if("player"!=i||x||(x=e,x.pInstance?J():$Jssor$.$AddEvent(x,"dataavailable",J)),"caption"==i){if(!$Jssor$.$IsBrowserIE()&&!s){var r=$Jssor$.$CloneNode(e,!1,!0);$Jssor$.$InsertBefore(r,e,$),$Jssor$.$RemoveElement(e,$),e=r,s=!0}}else T||o||v||("A"==t?("image"==$Jssor$.$AttributeEx(e,"u")?(v=$Jssor$.$FindChildByTag(e,"IMG"),$JssorDebug$.$Execute(function(){v||$JssorDebug$.$Error("slide html code definition error, no 'IMG' found in a 'image with link' slide.\r\n"+$.outerHTML)})):v=$Jssor$.$FindChild(e,"image",!0),v&&(C=e,$Jssor$.$SetStyles(C,es),b=$Jssor$.$CloneNode(C,!0),$Jssor$.$CssDisplay(b,"block"),$Jssor$.$SetStyles(b,es),$Jssor$.$CssOpacity(b,0),$Jssor$.$Css(b,"backgroundColor","#000"))):"IMG"==t&&"image"==$Jssor$.$AttributeEx(e,"u")&&(v=e),v&&(v.border=0,$Jssor$.$SetStyles(v,es)));h(e,s,o+1)})}}var f,g,p,E,v,C,b,S,m,w,T,D,x,y,A,I=this,N=[];$JssorAnimator$.call(I,-Zs,Zs+1,{$SlideItemAnimator:!0}),I.$LoadImage=function($,o){o=o||E,N.length&&!m?($Jssor$.$ShowElement(o),S||(S=!0,F.$TriggerEvent($JssorSlider$.$EVT_LOAD_START,s),$Jssor$.$Each(N,function($){$Jssor$.$Attribute($,"src")||($.src=$Jssor$.$AttributeEx($,"src2"),$Jssor$.$CssDisplay($,$["display-origin"]))})),$Jssor$.$LoadImages(N,v,$Jssor$.$CreateCallback(null,t,$,o))):t($,o)},I.$GoForNextSlide=function(){if(oo){var $=oo.$GetTransition(_s);if($){var o=Ds=$Jssor$.$GetNow(),e=s+H,t=uo[O(e)];return t.$LoadImage($Jssor$.$CreateCallback(null,i,e,t,$,o),E)}}P(ks+L.$AutoPlaySteps*H)},I.$TryActivate=function(){n(s,s,!0)},I.$ParkOut=function(){y&&y.$Quit(),y&&y.$Disable(),I.$UnhideContentForSlideshow(),D&&D.$Abort(),D=null,o()},I.$StampSlideItemElements=function(s){s=A+"_"+s,$JssorDebug$.$Execute(function(){v&&$Jssor$.$Attribute(v,"debug-id",s+"_slide_item_image_id"),$Jssor$.$Attribute($,"debug-id",s+"_slide_item_item_id")}),$JssorDebug$.$Execute(function(){$Jssor$.$Attribute(p,"debug-id",s+"_slide_item_wrapper_id")}),$JssorDebug$.$Execute(function(){$Jssor$.$Attribute(E,"debug-id",s+"_loading_container_id")})},I.$HideContentForSlideshow=function(){$Jssor$.$HideElement($)},I.$UnhideContentForSlideshow=function(){$Jssor$.$ShowElement($)},I.$EnablePlayer=function(){y&&y.$Enable()},I.$OnInnerOffsetChange=function($,s){var o=Zs-s;l(p,o)},I.$GetCaptionSliderIn=function(){return f},I.$GetCaptionSliderOut=function(){return g},I.$Index=s,$JssorObject$.call(I);var M=$Jssor$.$FindChild($,"thumb",!0);M&&(I.$Thumb=$Jssor$.$CloneNode(M),$Jssor$.$RemoveAttribute(M,"id"),$Jssor$.$HideElement(M)),$Jssor$.$ShowElement($),E=$Jssor$.$CloneNode(z),$Jssor$.$CssZIndex(E,1e3),$Jssor$.$AddEvent($,"click",d),o(!0),I.$Image=v,I.$Link=b,I.$Item=$,I.$Wrapper=p=$,$Jssor$.$AppendChild(p,E),F.$On(203,n),F.$On(28,c),F.$On(24,u),$JssorDebug$.$Execute(function(){A=Fs++}),$JssorDebug$.$Execute(function(){$Jssor$.$Attribute(p,"debug-id","slide-"+s)})}function a($,s,o,e,t){function i(){$Jssor$.$Empty(eo),ps&&J&&C.$Link&&$Jssor$.$AppendChild(eo,C.$Link),$Jssor$.$ShowElement(eo,!J&&C.$Image)}function r(){h&&(h=!1,F.$TriggerEvent($JssorSlider$.$EVT_ROLLBACK_END,s,c,E,u,c,d),p.$GoToPosition(u)),p.$Replay()}function n($){g=$,p.$Stop(),p.$Replay()}var a,l,u,c,d,J,h,f,g,p=this,E=0,v=0,C=uo[s];$JssorAnimator$.call(p,0,0),p.$Replay=function(){var $=p.$GetPosition_Display();if(!Ts&&!Os&&!g&&ks==s){$||(a&&!J&&(J=!0,p.$OpenSlideshowPanel(!0),F.$TriggerEvent($JssorSlider$.$EVT_SLIDESHOW_START,s,E,v,a,d)),i());var o,e=$JssorSlider$.$EVT_STATE_CHANGE;$!=d&&($==c?o=d:$==u?o=c:$?$>c?(h=!0,o=c,e=$JssorSlider$.$EVT_ROLLBACK_START):o=p.$GetPlayToPosition():o=u),F.$TriggerEvent(e,s,$,E,u,c,d);var t=vs&&(!js||qs);$==d?(c!=d&&!(12&js)||t)&&C.$GoForNextSlide():(t||$!=c)&&p.$PlayToPosition(o,r)}},p.$AdjustIdleOnPark=function(){c==d&&c==p.$GetPosition_Display()&&p.$GoToPosition(u)},p.$Abort=function(){oo&&oo.$Index==s&&oo.$Clear();var $=p.$GetPosition_Display();d>$&&F.$TriggerEvent($JssorSlider$.$EVT_STATE_CHANGE,s,-$-1,E,u,c,d)},p.$OpenSlideshowPanel=function($){o&&$Jssor$.$CssOverflow(us,$&&o.$Transition.$Outside?"":"hidden")},p.$OnInnerOffsetChange=function($,o){J&&o>=a&&(J=!1,i(),C.$UnhideContentForSlideshow(),oo.$Clear(),F.$TriggerEvent($JssorSlider$.$EVT_SLIDESHOW_END,s,E,v,a,d)),F.$TriggerEvent($JssorSlider$.$EVT_PROGRESS_CHANGE,s,o,E,u,c,d)},p.$SetPlayer=function($){$&&!f&&(f=$,$.$On($JssorPlayer$.$EVT_SWITCH,n))},o&&p.$Chain(o),a=p.$GetPosition_OuterEnd(),l=p.$GetPosition_OuterEnd(),p.$Chain(e),u=e.$GetPosition_OuterEnd(),c=u+($Jssor$.$ParseFloat($Jssor$.$AttributeEx($,"idle"))||Ks),t.$Shift(c),p.$Combine(t),d=p.$GetPosition_OuterEnd()}function l($,s){var o=cs>0?cs:G,e=Bs*s*(1&o),t=Ws*s*(o>>1&1);e=Math.round(e),t=Math.round(t),$Jssor$.$CssLeft($,e),$Jssor$.$CssTop($,t)}function u(){ro=Os,no=Ms.$GetPlayToPosition(),io=Ps.$GetPosition()}function c(){u(),(Ts||!qs&&12&js)&&(Ms.$Stop(),F.$TriggerEvent($JssorSlider$.$EVT_FREEZE))}function d($){if(!(Ts||!qs&&12&js||Ms.$IsPlaying())){var s=Ps.$GetPosition(),o=Math.ceil(io);$&&Math.abs(xs)>=L.$MinDragOffsetToSlide&&(o=Math.ceil(s),o+=As),1&Xs||(o=Math.min(_s-Zs,Math.max(o,0)));var e=Math.abs(o-s);e=1-Math.pow(1-e,5),!ws&&ro?Ms.$Continue(no):s==o?(ls.$EnablePlayer(),ls.$TryActivate()):Ms.$PlayCarousel(s,o,e*Us)}}function J($){$Jssor$.$AttributeEx($Jssor$.$EvtSrc($),"nodrag")||$Jssor$.$CancelEvent($)}function h($){f($,1)}function f($,s){$=$Jssor$.$GetEvent($);var o=$Jssor$.$EvtSrc($);if(!(ds||$Jssor$.$AttributeEx(o,"nodrag")||!S()||s&&1!=$.touches.length)){if(Ts=!0,Js=!1,Ds=null,$Jssor$.$AddEvent(document,s?"touchmove":"mousemove",g),to=$Jssor$.$GetNow()-50,ws=0,c(),ro||(cs=0),s){var e=$.touches[0];Ys=e.clientX,$o=e.clientY}else{var t=$Jssor$.$MousePosition($);Ys=t.x,$o=t.y}xs=0,ys=0,As=0,F.$TriggerEvent($JssorSlider$.$EVT_DRAG_START,O(io),io,$)}}function g($){if(Ts){$=$Jssor$.$GetEvent($);var s;if("mousemove"!=$.type){var o=$.touches[0];s={x:o.clientX,y:o.clientY}}else s=$Jssor$.$MousePosition($);if(s){var e=s.x-Ys,t=s.y-$o;if(Math.floor(io)!=io&&(cs=cs||G&ds),!e&&!t||cs||(cs=3==ds?Math.abs(t)>Math.abs(e)?2:1:ds,Jo&&1==cs&&Math.abs(t)-Math.abs(e)>3&&(Js=!0)),cs){var i=t,r=Ws;if(1==cs&&(i=e,r=Bs),!(1&Xs)){if(i>0){var n=r*ks,a=i-n;a>0&&(i=n+5*Math.sqrt(a))}if(0>i){var n=r*(_s-Zs-ks),a=-i-n;a>0&&(i=-n-5*Math.sqrt(a))}}-2>xs-ys?As=0:xs-ys>2&&(As=-1),ys=xs,xs=i,ao=io-xs/r/(Rs||1),xs&&cs&&!Js&&($Jssor$.$CancelEvent($),Os?Ms.$SetStandByPosition(ao):Ms.$StandBy(ao))}}}}function p(){if(m(),Ts){Ts=!1,to=$Jssor$.$GetNow(),$Jssor$.$RemoveEvent(document,"mousemove",g),$Jssor$.$RemoveEvent(document,"touchmove",g),ws=xs,Ms.$Stop();var $=Ps.$GetPosition();F.$TriggerEvent($JssorSlider$.$EVT_DRAG_END,O($),$,O(io),io),12&js&&u(),d(!0)}}function E($){if(ws){$Jssor$.$StopEvent($);for(var s=$Jssor$.$EvtSrc($);s&&U!==s;){"A"==s.tagName&&$Jssor$.$CancelEvent($);try{s=s.parentNode}catch(o){break}}}}function v($){return as=uo[ks],rs=ks,ks=O($),ls=uo[ks],b($),ks}function C($,s){cs=0,v($),F.$TriggerEvent($JssorSlider$.$EVT_PARK,O($),s)}function b($,s){ns=$,$Jssor$.$Each(Qs,function(o){o.$SetCurrentIndex(O($),$,s)})}function S(){var $=$JssorSlider$.$DragRegistry||0,s=ms;return Jo&&1&s&&(s&=1),$JssorSlider$.$DragRegistry|=s,ds=s&~$}function m(){ds&&($JssorSlider$.$DragRegistry&=~ms,ds=0)}function w(){var $=$Jssor$.$CreateDiv();return $Jssor$.$SetStyles($,es),$Jssor$.$CssPosition($,"absolute"),$}function O($){return($%_s+_s)%_s}function T($,s){s&&(Xs?2&Xs&&($=O($+ns),s=!1):($=Math.min(Math.max($+ns,0),_s-Zs),s=!1)),P($,L.$SlideDuration,s)}function D(){$Jssor$.$Each(Qs,function($){$.$Show($.$Options.$ChanceToShow<=qs)})}function x(){qs||(qs=1,D(),Ts||(12&js&&d(),3&js&&uo[ks].$TryActivate()))}function y(){qs&&(qs=0,D(),Ts||!(12&js)||c())}function A(){es={$Width:Ls,$Height:Gs,$Top:0,$Left:0},$Jssor$.$Each(ts,function($){$Jssor$.$SetStyles($,es),$Jssor$.$CssPosition($,"absolute"),$Jssor$.$CssOverflow($,"hidden"),$Jssor$.$HideElement($)}),$Jssor$.$SetStyles(z,es)}function I($,s){P($,s,!0)}function P($,s,o){if(zs&&(!Ts||L.$NaviQuitDrag)){Os=!0,Ts=!1,Ms.$Stop(),void 0==s&&(s=Us);var e=Is.$GetPosition_Display(),t=$;o&&(t=e+$,t=$>0?Math.ceil(t):Math.floor(t)),2&Xs&&(t=O(t)),1&Xs||(t=Math.max(0,Math.min(t,_s-Zs)));var i=(t-e)%_s;t=e+i;var r=e==t?0:s*Math.abs(i);r=Math.min(r,s*Zs*1.5),Ms.$PlayCarousel(e,t,r||1)}}function N(){return $Jssor$.$CssWidth(j||$)}function M(){return $Jssor$.$CssHeight(j||$)}function R(s,o){if(void 0==s)return $Jssor$.$CssWidth($);if(!j){$JssorDebug$.$Execute(function(){var s=$Jssor$.$Css($,"width"),o=$Jssor$.$Css($,"height"),e=$Jssor$.$CssP($,"width"),t=$Jssor$.$CssP($,"height");s&&-1!=s.indexOf("px")||$JssorDebug$.$Fail("Cannot scale jssor slider, 'width' of 'outer container' not specified. Please specify 'width' in pixel. e.g. 'width: 600px;'"),o&&-1!=o.indexOf("px")||$JssorDebug$.$Fail("Cannot scale jssor slider, 'height' of 'outer container' not specified. Please specify 'height' in pixel. e.g. 'height: 300px;'"),-1!=s.indexOf("%")&&$JssorDebug$.$Fail("Cannot scale jssor slider, 'width' of 'outer container' not valid. Please specify 'width' in pixel. e.g. 'width: 600px;'"),-1!=o.indexOf("%")&&$JssorDebug$.$Fail("Cannot scale jssor slider, 'height' of 'outer container' not valid. Please specify 'height' in pixel. e.g. 'height: 300px;'"),e||$JssorDebug$.$Fail("Cannot scale jssor slider, 'width' of 'outer container' not valid. 'width' of 'outer container' should be positive number. e.g. 'width: 600px;'"),t||$JssorDebug$.$Fail("Cannot scale jssor slider, 'height' of 'outer container' not valid. 'height' of 'outer container' should be positive number. e.g. 'height: 300px;'")});var e=$Jssor$.$CreateDiv(document);$Jssor$.$ClassName(e,$Jssor$.$ClassName($)),$Jssor$.$CssCssText(e,$Jssor$.$CssCssText($)),$Jssor$.$CssDisplay(e,"block"),$Jssor$.$CssPosition(e,"relative"),$Jssor$.$CssTop(e,0),$Jssor$.$CssLeft(e,0),$Jssor$.$CssOverflow(e,"visible"),j=$Jssor$.$CreateDiv(document),$Jssor$.$CssPosition(j,"absolute"),$Jssor$.$CssTop(j,0),$Jssor$.$CssLeft(j,0),$Jssor$.$CssWidth(j,$Jssor$.$CssWidth($)),$Jssor$.$CssHeight(j,$Jssor$.$CssHeight($)),$Jssor$.$SetStyleTransformOrigin(j,"0 0"),$Jssor$.$AppendChild(j,e);var t=$Jssor$.$Children($);$Jssor$.$AppendChild($,j),$Jssor$.$Css($,"backgroundImage",""),$Jssor$.$Each(t,function(s){$Jssor$.$AppendChild($Jssor$.$AttributeEx(s,"noscale")?$:e,s)})}$JssorDebug$.$Execute(function(){(!s||0>s)&&$JssorDebug$.$Fail("'$ScaleWidth' error, 'dimension' should be positive value.")}),$JssorDebug$.$Execute(function(){k||(k=F.$Elmt.scrollWidth)}),Rs=s/(o?$Jssor$.$CssHeight:$Jssor$.$CssWidth)(j),$Jssor$.$CssScale(j,Rs);var i=o?Rs*N():s,r=o?s:Rs*M();$Jssor$.$CssWidth($,i),$Jssor$.$CssHeight($,r),$Jssor$.$Each(Qs,function($){$.$Relocate(i,r)})}var F=this;F.$PlayTo=P,F.$GoTo=function($){P($,1)},F.$Next=function(){I(1)},F.$Prev=function(){I(-1)},F.$Pause=function(){vs=!1},F.$Play=function(){vs||(vs=!0,uo[ks]&&uo[ks].$TryActivate())},F.$SetSlideshowTransitions=function($){$JssorDebug$.$Execute(function(){$&&$.length||$JssorDebug$.$Error("Can not set slideshow transitions, no transitions specified.")}),L.$SlideshowOptions.$Transitions=$},F.$SetCaptionTransitions=function($){$JssorDebug$.$Execute(function(){$&&$.length||$JssorDebug$.$Error("Can not set caption transitions, no transitions specified")}),W.$CaptionTransitions=$,W.$Version=$Jssor$.$GetNow()},F.$SlidesCount=function(){return ts.length},F.$CurrentIndex=function(){return ks},F.$IsAutoPlaying=function(){return vs},F.$IsDragging=function(){return Ts},F.$IsSliding=function(){return Os},F.$IsMouseOver=function(){return!qs},F.$LastDragSucceded=function(){return ws},F.$OriginalWidth=F.$GetOriginalWidth=N,F.$OriginalHeight=F.$GetOriginalHeight=M,F.$ScaleHeight=F.$GetScaleHeight=function(s){return void 0==s?$Jssor$.$CssHeight($):void R(s,!0)},F.$ScaleWidth=F.$SetScaleWidth=F.$GetScaleWidth=R,F.$GetVirtualIndex=function($){var s=Math.ceil(O(Ss/Vs)),o=O($-ks+s);return o>Zs?$-ks>_s/2?$-=_s:-_s/2>=$-ks&&($+=_s):$=ks+o-s,$},$JssorObject$.call(F),$JssorDebug$.$Execute(function(){var s=$Jssor$.$GetElement($);s||$JssorDebug$.$Fail("Outer container '"+$+"' not found.")}),F.$Elmt=$=$Jssor$.$GetElement($);var k,_=1,L=$Jssor$.$Extend({$FillMode:0,$LazyLoading:1,$StartIndex:0,$AutoPlay:!1,$Loop:1,$HWA:!0,$NaviQuitDrag:!0,$AutoPlaySteps:1,$AutoPlayInterval:3e3,$PauseOnHover:1,$SlideDuration:500,$SlideEasing:$JssorEasing$.$EaseOutQuad,$MinDragOffsetToSlide:20,$SlideSpacing:0,$DisplayPieces:1,$ParkingPosition:0,$UISearchMode:1,$PlayOrientation:1,$DragOrientation:1},s);void 0!=L.$Idle&&(L.$AutoPlayInterval=L.$Idle),void 0!=L.$Cols&&(L.$DisplayPieces=L.$Cols),$JssorDebug$.$Execute(function(){L=$Jssor$.$Extend({$ArrowKeyNavigation:void 0,$SlideWidth:void 0,$SlideHeight:void 0,$SlideshowOptions:void 0,$CaptionSliderOptions:void 0,$BulletNavigatorOptions:void 0,$ArrowNavigatorOptions:void 0,$ThumbnailNavigatorOptions:void 0},L)});var G=3&L.$PlayOrientation,H=(4&L.$PlayOrientation)/-4||1,B=L.$SlideshowOptions,W=$Jssor$.$Extend({$Class:$JssorCaptionSliderBase$,$PlayInMode:1,$PlayOutMode:1},L.$CaptionSliderOptions),V=L.$BulletNavigatorOptions,Z=L.$ArrowNavigatorOptions,Q=L.$ThumbnailNavigatorOptions;$JssorDebug$.$Execute(function(){B&&!B.$Class&&$JssorDebug$.$Fail("Option $SlideshowOptions error, class not specified.")}),$JssorDebug$.$Execute(function(){L.$CaptionSliderOptions&&!L.$CaptionSliderOptions.$Class&&$JssorDebug$.$Fail("Option $CaptionSliderOptions error, class not specified.")}),$JssorDebug$.$Execute(function(){V&&!V.$Class&&$JssorDebug$.$Fail("Option $BulletNavigatorOptions error, class not specified.")}),$JssorDebug$.$Execute(function(){Z&&!Z.$Class&&$JssorDebug$.$Fail("Option $ArrowNavigatorOptions error, class not specified.")}),$JssorDebug$.$Execute(function(){Q&&!Q.$Class&&$JssorDebug$.$Fail("Option $ThumbnailNavigatorOptions error, class not specified.")});var j,K=!L.$UISearchMode,U=$Jssor$.$FindChild($,"slides",K),z=$Jssor$.$FindChild($,"loading",K)||$Jssor$.$CreateDiv(document),X=$Jssor$.$FindChild($,"navigator",K),q=$Jssor$.$FindChild($,"arrowleft",K),Y=$Jssor$.$FindChild($,"arrowright",K),$s=$Jssor$.$FindChild($,"thumbnavigator",K);$JssorDebug$.$Execute(function(){if(X&&!V)throw new Error("Bullet navigator container defined but $BulletNavigatorOptions not specified.");if((q||Y)&&!Z)throw new Error("arrowleft or arrowright defined, but $ArrowNavigatorOptions not specified.");if($s&&!Q)throw new Error("Thumbnail navigator container defined, but $ThumbnailNavigatorOptions not specified.")});var ss=$Jssor$.$CssWidth(U),os=$Jssor$.$CssHeight(U);$JssorDebug$.$Execute(function(){isNaN(ss)&&$JssorDebug$.$Fail("Width of slides container wrong specification, it should be specified in pixel (like style='width: 600px;')."),void 0==ss&&$JssorDebug$.$Fail("Width of slides container not specified, it should be specified in pixel (like style='width: 600px;')."),isNaN(os)&&$JssorDebug$.$Fail("Height of slides container wrong specification, it should be specified in pixel (like style='height: 300px;')."),void 0==os&&$JssorDebug$.$Fail("Height of slides container not specified, it should be specified in pixel (like style='height: 300px;').");var $=$Jssor$.$CssOverflow(U),s=$Jssor$.$Css(U,"overflowX"),o=$Jssor$.$Css(U,"overflowY");"hidden"==$||"hidden"==s&&"hidden"==o||$JssorDebug$.$Fail("Overflow of slides container wrong specification, it should be specified as 'hidden' (style='overflow:hidden;').")}),$JssorDebug$.$Execute(function(){$Jssor$.$IsNumeric(L.$DisplayPieces)||$JssorDebug$.$Fail("Option $DisplayPieces error, it should be a numeric value and greater than or equal to 1."),L.$DisplayPieces<1&&$JssorDebug$.$Fail("Option $DisplayPieces error, it should be greater than or equal to 1."),L.$DisplayPieces>1&&L.$DragOrientation&&L.$DragOrientation!=G&&$JssorDebug$.$Fail("Option $DragOrientation error, it should be 0 or the same of $PlayOrientation when $DisplayPieces is greater than 1."),$Jssor$.$IsNumeric(L.$ParkingPosition)||$JssorDebug$.$Fail("Option $ParkingPosition error, it should be a numeric value."),L.$ParkingPosition&&L.$DragOrientation&&L.$DragOrientation!=G&&$JssorDebug$.$Fail("Option $DragOrientation error, it should be 0 or the same of $PlayOrientation when $ParkingPosition is not equal to 0.")});var es,ts=[],is=$Jssor$.$Children(U);$Jssor$.$Each(is,function($){"DIV"!=$.tagName||$Jssor$.$AttributeEx($,"u")?$Jssor$.$IsBrowserIe9Earlier()&&$Jssor$.$CssZIndex($,($Jssor$.$CssZIndex($)||0)+1):ts.push($)}),$JssorDebug$.$Execute(function(){ts.length<1&&$JssorDebug$.$Error("Slides html code definition error, there must be at least 1 slide to initialize a slider.")});var rs,ns,as,ls,us,cs,ds,Js,hs,fs,gs,ps,Es,vs,Cs,bs,Ss,ms,ws,Os,Ts,Ds,xs,ys,As,Is,Ps,Ns,Ms,Rs,Fs=0,ks=-1,_s=ts.length,Ls=L.$SlideWidth||ss,Gs=L.$SlideHeight||os,Hs=L.$SlideSpacing,Bs=Ls+Hs,Ws=Gs+Hs,Vs=1&G?Bs:Ws,Zs=Math.min(L.$DisplayPieces,_s),Qs=[],js=(L.$AutoPlaySteps,L.$PauseOnHover),Ks=L.$AutoPlayInterval,Us=L.$SlideDuration,zs=_s>Zs,Xs=zs?L.$Loop:0,qs=1,Ys=0,$o=0,so=new r;vs=L.$AutoPlay,F.$Options=s,A(),$Jssor$.$Attribute($,"jssor-slider",!0),$Jssor$.$CssZIndex(U,$Jssor$.$CssZIndex(U)||0),$Jssor$.$CssPosition(U,"absolute"),us=$Jssor$.$CloneNode(U,!0),$Jssor$.$InsertBefore(us,U),B&&(ps=B.$ShowLink,Cs=B.$Class,$JssorDebug$.$Execute(function(){B.$Transitions&&B.$Transitions.length||$JssorDebug$.$Error("Invalid '$SlideshowOptions', no '$Transitions' specified.")}),bs=1==Zs&&_s>1&&Cs&&(!$Jssor$.$IsBrowserIE()||$Jssor$.$BrowserVersion()>=8)),Ss=bs||Zs>=_s||!(1&Xs)?0:L.$ParkingPosition,ms=(Zs>1||Ss?G:-1)&L.$DragOrientation;var oo,eo,to,io,ro,no,ao,lo=U,uo=[],co=$Jssor$.$Device(),Jo=co.$Touchable;co.$TouchActionAttr&&$Jssor$.$Css(lo,co.$TouchActionAttr,[null,"pan-y","pan-x","none"][ms]||""),Ns=new t,bs&&(oo=new Cs(so,Ls,Gs,B,Jo)),$Jssor$.$AppendChild(us,Ns.$Wrapper),$Jssor$.$CssOverflow(U,"hidden"),eo=w(),$Jssor$.$Css(eo,"backgroundColor","#000"),$Jssor$.$CssOpacity(eo,0),$Jssor$.$InsertBefore(eo,lo.firstChild,lo);for(var ho=0;ho<ts.length;ho++){var fo=ts[ho],go=new n(fo,ho);uo.push(go)}$Jssor$.$HideElement(z),$JssorDebug$.$Execute(function(){$Jssor$.$Attribute(z,"debug-id","loading-container")}),Is=new e,Ms=new i(Is,Ns),$JssorDebug$.$Execute(function(){$Jssor$.$Attribute(lo,"debug-id","slide-board")}),ms&&($Jssor$.$AddEvent(U,"mousedown",f),$Jssor$.$AddEvent(U,"touchstart",h),$Jssor$.$AddEvent(U,"dragstart",J),$Jssor$.$AddEvent(U,"selectstart",J),$Jssor$.$AddEvent(document,"mouseup",p),$Jssor$.$AddEvent(document,"touchend",p),$Jssor$.$AddEvent(document,"touchcancel",p),$Jssor$.$AddEvent(window,"blur",p)),js&=Jo?10:5,X&&V&&(hs=new V.$Class(X,V,N(),M()),Qs.push(hs)),Z&&q&&Y&&(Z.$Loop=Xs,Z.$DisplayPieces=Zs,fs=new Z.$Class(q,Y,Z,N(),M()),Qs.push(fs)),$s&&Q&&(Q.$StartIndex=L.$StartIndex,gs=new Q.$Class($s,Q),Qs.push(gs)),$Jssor$.$Each(Qs,function($){$.$Reset(_s,uo,z),$.$On($JssorNavigatorEvents$.$NAVIGATIONREQUEST,T)}),R(N()),$Jssor$.$AddEvent(U,"click",E),$Jssor$.$AddEvent($,"mouseout",$Jssor$.$MouseOverOutFilter(x,$)),$Jssor$.$AddEvent($,"mouseover",$Jssor$.$MouseOverOutFilter(y,$)),D(),L.$ArrowKeyNavigation&&$Jssor$.$AddEvent(document,"keydown",function($){37==$.keyCode?I(-1):39==$.keyCode&&I(1)
});var po=L.$StartIndex;1&Xs||(po=Math.max(0,Math.min(po,_s-Zs))),Ms.$PlayCarousel(po,po,0)},$JssorSlideo$=window.$JssorSlideo$=$JssorSlider$;$JssorSlider$.$EVT_CLICK=21,$JssorSlider$.$EVT_DRAG_START=22,$JssorSlider$.$EVT_DRAG_END=23,$JssorSlider$.$EVT_SWIPE_START=24,$JssorSlider$.$EVT_SWIPE_END=25,$JssorSlider$.$EVT_LOAD_START=26,$JssorSlider$.$EVT_LOAD_END=27,$JssorSlider$.$EVT_FREEZE=28,$JssorSlider$.$EVT_POSITION_CHANGE=202,$JssorSlider$.$EVT_PARK=203,$JssorSlider$.$EVT_SLIDESHOW_START=206,$JssorSlider$.$EVT_SLIDESHOW_END=207,$JssorSlider$.$EVT_PROGRESS_CHANGE=208,$JssorSlider$.$EVT_STATE_CHANGE=209,$JssorSlider$.$EVT_ROLLBACK_START=210,$JssorSlider$.$EVT_ROLLBACK_END=211;var $JssorNavigatorEvents$={$NAVIGATIONREQUEST:1,$INDEXCHANGE:2,$RESET:3},$JssorBulletNavigator$=window.$JssorBulletNavigator$=function($,s){function o($){-1!=$&&b[$].$Selected($==v)}function e($){t.$TriggerEvent($JssorNavigatorEvents$.$NAVIGATIONREQUEST,$*c)}var t=this;$JssorObject$.call(t),$=$Jssor$.$GetElement($);var i,r,n,a,l,u,c,d,J,h,f,g,p,E,v=0,C=[],b=[];t.$Elmt=$,t.$GetCurrentIndex=function(){return l},t.$SetCurrentIndex=function($){if($!=l){var s=v,e=Math.floor($/c);v=e,l=$,o(s),o(e)}},t.$Show=function(s){$Jssor$.$ShowElement($,s)};var S;t.$Relocate=function(s,o){if(!S||0==u.$Scale){var s=$Jssor$.$ParentNode($).clientWidth,o=$Jssor$.$ParentNode($).clientHeight;1&u.$AutoCenter&&$Jssor$.$CssLeft($,(s-n)/2),2&u.$AutoCenter&&$Jssor$.$CssTop($,(o-a)/2),S=!0}};var m;t.$Reset=function(s){if(!m){r=s,i=Math.ceil(s/c),v=0;var o=p+J,t=E+h,l=Math.ceil(i/d)-1;n=p+o*(f?d-1:l),a=E+t*(f?l:d-1),$Jssor$.$CssWidth($,n),$Jssor$.$CssHeight($,a);for(var S=0;i>S;S++){var w=$Jssor$.$CreateSpan();$Jssor$.$InnerText(w,S+1);var O=$Jssor$.$BuildElement(g,"numbertemplate",w,!0);$Jssor$.$CssPosition(O,"absolute");var T=S%(l+1);$Jssor$.$CssLeft(O,f?S%d*o:o*T),$Jssor$.$CssTop(O,f?t*T:Math.floor(S/(l+1))*t),$Jssor$.$AppendChild($,O),C[S]=O,1&u.$ActionMode&&$Jssor$.$AddEvent(O,"click",$Jssor$.$CreateCallback(null,e,S)),2&u.$ActionMode&&$Jssor$.$AddEvent(O,"mouseover",$Jssor$.$MouseOverOutFilter($Jssor$.$CreateCallback(null,e,S),O)),b[S]=$Jssor$.$Buttonize(O)}m=!0}},t.$Options=u=$Jssor$.$Extend({$SpacingX:0,$SpacingY:0,$Orientation:1,$ActionMode:1},s),$JssorDebug$.$Execute(function(){u=$Jssor$.$Extend({$Steps:void 0,$Lanes:void 0},u)}),g=$Jssor$.$FindChild($,"prototype"),$JssorDebug$.$Execute(function(){g||$JssorDebug$.$Fail("Navigator item prototype not defined."),isNaN($Jssor$.$CssWidth(g))&&$JssorDebug$.$Fail("Width of 'navigator item prototype' not specified."),isNaN($Jssor$.$CssHeight(g))&&$JssorDebug$.$Fail("Height of 'navigator item prototype' not specified.")}),p=$Jssor$.$CssWidth(g),E=$Jssor$.$CssHeight(g),$Jssor$.$RemoveElement(g,$),c=u.$Steps||1,d=u.$Lanes||1,J=u.$SpacingX,h=u.$SpacingY,f=u.$Orientation-1,0==u.$Scale&&$Jssor$.$Attribute($,"noscale",!0)},$JssorArrowNavigator$=window.$JssorArrowNavigator$=function($,s,o){function e($){i.$TriggerEvent($JssorNavigatorEvents$.$NAVIGATIONREQUEST,$,!0)}function t(e){$Jssor$.$ShowElement($,e||!o.$Loop&&0==a),$Jssor$.$ShowElement(s,e||!o.$Loop&&a>=n-o.$DisplayPieces),r=e}var i=this;$JssorObject$.call(i),$JssorDebug$.$Execute(function(){$||$JssorDebug$.$Fail("Option '$ArrowNavigatorOptions' spepcified, but UI 'arrowleft' not defined. Define 'arrowleft' to enable direct navigation, or remove option '$ArrowNavigatorOptions' to disable direct navigation."),s||$JssorDebug$.$Fail("Option '$ArrowNavigatorOptions' spepcified, but UI 'arrowright' not defined. Define 'arrowright' to enable direct navigation, or remove option '$ArrowNavigatorOptions' to disable direct navigation."),isNaN($Jssor$.$CssWidth($))&&$JssorDebug$.$Fail("Width of 'arrow left' not specified."),isNaN($Jssor$.$CssWidth(s))&&$JssorDebug$.$Fail("Width of 'arrow right' not specified."),isNaN($Jssor$.$CssHeight($))&&$JssorDebug$.$Fail("Height of 'arrow left' not specified."),isNaN($Jssor$.$CssHeight(s))&&$JssorDebug$.$Fail("Height of 'arrow right' not specified.")});var r,n,a,l,u,c=$Jssor$.$CssWidth($),d=$Jssor$.$CssHeight($);i.$GetCurrentIndex=function(){return a},i.$SetCurrentIndex=function($,s,o){o?a=s:(a=$,t(r))},i.$Show=t;var J;i.$Relocate=function(o,e){if(!J||0==l.$Scale){var t=$Jssor$.$ParentNode($).clientWidth,e=$Jssor$.$ParentNode($).clientHeight;1&l.$AutoCenter&&($Jssor$.$CssLeft($,(t-c)/2),$Jssor$.$CssLeft(s,(t-c)/2)),2&l.$AutoCenter&&($Jssor$.$CssTop($,(e-d)/2),$Jssor$.$CssTop(s,(e-d)/2)),J=!0}};var h;i.$Reset=function(o){n=o,a=0,h||($Jssor$.$AddEvent($,"click",$Jssor$.$CreateCallback(null,e,-u)),$Jssor$.$AddEvent(s,"click",$Jssor$.$CreateCallback(null,e,u)),$Jssor$.$Buttonize($),$Jssor$.$Buttonize(s),h=!0)},i.$Options=l=$Jssor$.$Extend({$Steps:1},o),u=l.$Steps,0==l.$Scale&&($Jssor$.$Attribute($,"noscale",!0),$Jssor$.$Attribute(s,"noscale",!0))},$JssorThumbnailNavigator$=window.$JssorThumbnailNavigator$=function($,s){function o($,s){function o(){n.$Selected(i==s)}function e(){if(!f.$LastDragSucceded()){var $=l-s%l,o=f.$GetVirtualIndex((s+$)/l-1),e=o*l+l-$;E.$TriggerEvent($JssorNavigatorEvents$.$NAVIGATIONREQUEST,e)}}var t,n,a,u=this;$JssorDebug$.$Execute(function(){u.$Wrapper=void 0}),u.$Index=s,u.$Highlight=o,a=$.$Thumb||$.$Image||$Jssor$.$CreateDiv(),u.$Wrapper=t=$Jssor$.$BuildElement(p,"thumbnailtemplate",a,!0),n=$Jssor$.$Buttonize(t),1&r.$ActionMode&&$Jssor$.$AddEvent(t,"click",e),2&r.$ActionMode&&$Jssor$.$AddEvent(t,"mouseover",$Jssor$.$MouseOverOutFilter(e,t))}var e,t,i,r,n,a,l,u,c,d,J,h,f,g,p,E=this,v=[];$JssorObject$.call(E),$=$Jssor$.$GetElement($),E.$GetCurrentIndex=function(){return i},E.$SetCurrentIndex=function($,s,o){var e=i;i=$,-1!=e&&v[e].$Highlight(),v[$].$Highlight(),o||f.$PlayTo(f.$GetVirtualIndex(Math.floor(s/l)))},E.$Show=function(s){$Jssor$.$ShowElement($,s)},E.$Relocate=$Jssor$.$EmptyFunction;var C;E.$Reset=function(s,p){if(!C){e=s,t=Math.ceil(e/l),i=-1,h=Math.min(h,p.length);var E=1&r.$Orientation,b=d+(d+u)*(l-1)*(1-E),S=J+(J+c)*(l-1)*E,m=b+(b+u)*(h-1)*E,w=S+(S+c)*(h-1)*(1-E);$Jssor$.$CssPosition(g,"absolute"),$Jssor$.$CssOverflow(g,"hidden"),1&r.$AutoCenter&&$Jssor$.$CssLeft(g,(n-m)/2),2&r.$AutoCenter&&$Jssor$.$CssTop(g,(a-w)/2),$Jssor$.$CssWidth(g,m),$Jssor$.$CssHeight(g,w);var O=[];$Jssor$.$Each(p,function($,s){var e=new o($,s),t=e.$Wrapper,i=Math.floor(s/l),r=s%l;$Jssor$.$CssLeft(t,(d+u)*r*(1-E)),$Jssor$.$CssTop(t,(J+c)*r*E),O[i]||(O[i]=$Jssor$.$CreateDiv(),$Jssor$.$AppendChild(g,O[i])),$Jssor$.$AppendChild(O[i],t),v.push(e)});var T=$Jssor$.$Extend({$HWA:!1,$AutoPlay:!1,$NaviQuitDrag:!1,$SlideWidth:b,$SlideHeight:S,$SlideSpacing:u*E+c*(1-E),$MinDragOffsetToSlide:12,$SlideDuration:200,$PauseOnHover:1,$PlayOrientation:r.$Orientation,$DragOrientation:r.$DisableDrag?0:r.$Orientation},r);f=new $JssorSlider$($,T),C=!0}},E.$Options=r=$Jssor$.$Extend({$SpacingX:3,$SpacingY:3,$DisplayPieces:1,$Orientation:1,$AutoCenter:3,$ActionMode:1},s),void 0!=r.$Rows&&(r.$Lanes=r.$Rows),$JssorDebug$.$Execute(function(){r=$Jssor$.$Extend({$Lanes:void 0,$Width:void 0,$Height:void 0},r)}),n=$Jssor$.$CssWidth($),a=$Jssor$.$CssHeight($),$JssorDebug$.$Execute(function(){n||$JssorDebug$.$Fail("width of 'thumbnavigator' container not specified."),a||$JssorDebug$.$Fail("height of 'thumbnavigator' container not specified.")}),g=$Jssor$.$FindChild($,"slides",!0),p=$Jssor$.$FindChild(g,"prototype"),$JssorDebug$.$Execute(function(){p||$JssorDebug$.$Fail("prototype of 'thumbnavigator' not defined.")}),d=$Jssor$.$CssWidth(p),J=$Jssor$.$CssHeight(p),$Jssor$.$RemoveElement(p,g),l=r.$Lanes||1,u=r.$SpacingX,c=r.$SpacingY,h=r.$DisplayPieces,0==r.$Scale&&$Jssor$.$Attribute($,"noscale",!0)},$JssorCaptionSlider$=window.$JssorCaptionSlider$=function($,s,o){function e($,s){function t($,s){var o={};return $Jssor$.$Each(u,function(e,t){var i=$Jssor$.$AttributeEx($,e+(s||""));if(i){var r={};"t"==e?r.$Value=i:i.indexOf("%")+1?r.$Percent=$Jssor$.$ParseFloat(i)/100:r.$Value=$Jssor$.$ParseFloat(i),o[t]=r}}),o}function i(){return l[Math.floor(Math.random()*l.length)]}function r($){var s;if("*"==$)s=i();else if($){var o=l[$Jssor$.$ParseInt($)]||l[$];$Jssor$.$IsArray(o)&&($!=n?(n=$,h[$]=0,J[$]=o[Math.floor(Math.random()*o.length)]):h[$]++,o=J[$],$Jssor$.$IsArray(o)&&(o=o.length&&o[h[$]%o.length],$Jssor$.$IsArray(o)&&(o=o[Math.floor(Math.random()*o.length)]))),s=o,$Jssor$.$IsString(s)&&(s=r(s))}return s}var n,d=[],J=[],h=[],f=$Jssor$.$Children($);return $Jssor$.$Each(f,function($){var i=[];i.$Elmt=$;var n="caption"==$Jssor$.$AttributeEx($,"u");$Jssor$.$Each(o?[0,3]:[2],function(o,l){if(n){var u,d;if(2==o&&$Jssor$.$AttributeEx($,"t3")||(d=t($,o),2!=o||d.$Transition||(d.$Delay=d.$Delay||{$Value:0},d=$Jssor$.$Extend(t($,0),d))),d&&d.$Transition&&(u=r(d.$Transition.$Value))){var J=$Jssor$.$Extend({$Delay:0},u);$Jssor$.$Each(d,function($,s){var o=(c[s]||c.$Default).apply(c,[J[s],d[s]]);isNaN(o)||(J[s]=o)}),l||(d.$BeginTime?J.$BeginTime=d.$BeginTime.$Value||0:2&a&&(J.$BeginTime=0))}i.push(J)}s%2&&!l&&(i.$Children=e($,s+1))}),d.push(i)}),d}function t($,s,e){var t={$Easing:s.$Easing,$Round:s.$Round,$During:s.$During,$Reverse:o&&!e};$JssorDebug$.$Execute(function(){t.$CaptionAnimator=!0});var i=$,r=$Jssor$.$ParentNode($),n=$Jssor$.$CssWidth(i),a=$Jssor$.$CssHeight(i),l=$Jssor$.$CssWidth(r),u=$Jssor$.$CssHeight(r),c={},d={},J=s.$ScaleClip||1;if(s.$Opacity&&(d.$Opacity=1-s.$Opacity),t.$OriginalWidth=n,t.$OriginalHeight=a,s.$Zoom||s.$Rotate){d.$Zoom=(s.$Zoom||2)-2,($Jssor$.$IsBrowserIe9Earlier()||$Jssor$.$IsBrowserOpera())&&(d.$Zoom=Math.min(d.$Zoom,1)),c.$Zoom=1;var h=s.$Rotate||0;d.$Rotate=360*h,c.$Rotate=0}else if(s.$Clip){var f={$Top:0,$Right:n,$Bottom:a,$Left:0},g=$Jssor$.$Extend({},f),p=g.$Offset={},E=4&s.$Clip,v=8&s.$Clip,C=1&s.$Clip,b=2&s.$Clip;E&&v?(p.$Top=a/2*J,p.$Bottom=-p.$Top):E?p.$Bottom=-a*J:v&&(p.$Top=a*J),C&&b?(p.$Left=n/2*J,p.$Right=-p.$Left):C?p.$Right=-n*J:b&&(p.$Left=n*J),t.$Move=s.$Move,d.$Clip=g,c.$Clip=f}var S=0,m=0;s.x&&(S-=l*s.x),s.y&&(m-=u*s.y),(S||m||t.$Move)&&(d.$Left=S,d.$Top=m);var w=s.$Duration;return c=$Jssor$.$Extend(c,$Jssor$.$GetStyles(i,d)),t.$Setter=$Jssor$.$StyleSetterEx(),new $JssorAnimator$(s.$Delay,w,t,i,c,d)}function i($,s){return $Jssor$.$Each(s,function(s,o){$JssorDebug$.$Execute(function(){if(s.length){var $=$Jssor$.$CssTop(s.$Elmt),e=$Jssor$.$CssLeft(s.$Elmt),t=$Jssor$.$CssWidth(s.$Elmt),i=$Jssor$.$CssHeight(s.$Elmt),r=null;isNaN($)?r="Style 'top' for caption not specified. Please always specify caption like 'position: absolute; top: ...px; left: ...px; width: ...px; height: ...px;'.":isNaN(e)?r="Style 'left' not specified. Please always specify caption like 'position: absolute; top: ...px; left: ...px; width: ...px; height: ...px;'.":isNaN(t)?r="Style 'width' not specified. Please always specify caption like 'position: absolute; top: ...px; left: ...px; width: ...px; height: ...px;'.":isNaN(i)&&(r="Style 'height' not specified. Please always specify caption like 'position: absolute; top: ...px; left: ...px; width: ...px; height: ...px;'."),r&&$JssorDebug$.$Error("Caption "+(o+1)+" definition error, \r\n"+r+"\r\n"+s.$Elmt.outerHTML)}});var e,a=s.$Elmt,l=s[0],u=s[1];if(l&&(e=t(a,l),$=e.$Locate(void 0==l.$BeginTime?$:l.$BeginTime,1)),$=i($,s.$Children),u){var c=t(a,u,1);c.$Locate($,1),n.$Combine(c),r.$Combine(c)}e&&n.$Combine(e)}),$}$JssorDebug$.$Execute(function(){s.$CaptionTransitions||$JssorDebug$.$Error("'$CaptionSliderOptions' option error, '$CaptionSliderOptions.$CaptionTransitions' not specified.")});var r,n=this,a=o?s.$PlayInMode:s.$PlayOutMode,l=s.$CaptionTransitions,u={$Transition:"t",$Delay:"d",$Duration:"du",x:"x",y:"y",$Rotate:"r",$Zoom:"z",$Opacity:"f",$BeginTime:"b"},c={$Default:function($,s){return isNaN(s.$Value)?$*=s.$Percent:$=s.$Value,$},$Opacity:function($,s){return this.$Default($-1,s)}};c.$Zoom=c.$Opacity,$JssorAnimator$.call(n,0,0),n.$Revert=function(){n.$GoToPosition(n.$GetPosition_OuterEnd()*(o||0)),r.$GoToPosition(0)},r=new $JssorAnimator$(0,0),i(0,a?e($,1):[])},$JssorCaptionSlideo$=function($,s,o){function e($,s){$Jssor$.$Each($,function(o,t){var i=l[t];i&&((s||"e"==t)&&($Jssor$.$IsNumeric(o)?o=n[o]:$Jssor$.$IsPlainObject(o)&&e(o,!0)),$[i]=o,delete $[t])})}function t($,s){var o=[],e=$Jssor$.$Children($);return $Jssor$.$Each(e,function($){var e="caption"==$Jssor$.$AttributeEx($,"u");if(e){var i=$Jssor$.$AttributeEx($,"t"),r=u[$Jssor$.$ParseInt(i)]||u[i],n=$Jssor$.$AttributeEx($,"t2"),a=u[$Jssor$.$ParseInt(n)]||u[n],l={$Elmt:$,$Transition:r,$Transition2:a};3>s&&o.concat(t($,s+1)),o.push(l)}}),o}function i($,s,t,i){return $Jssor$.$Each(s,function(s){e(s);var r={$Easing:s.$Easing,$Round:s.$Round,$During:s.$During,$Setter:$Jssor$.$StyleSetterEx()},n=$Jssor$.$Extend($Jssor$.$GetStyles(captionItem,s),t),l=new $JssorAnimator$(s.b||0,s.d,r,$,n,s);!i==!o&&a.$Combine(l);var u;t=$Jssor$.$Extend(t,$Jssor$.$Cast(n,s,1,r.$Easing,r.$During,r.$Round,r,u))}),t}function r($){$Jssor$.$Each($,function($,s){$JssorDebug$.$Execute(function(){if($.length){var o=$Jssor$.$CssTop($.$Elmt),e=$Jssor$.$CssLeft($.$Elmt),t=$Jssor$.$CssWidth($.$Elmt),i=$Jssor$.$CssHeight($.$Elmt),r=null;if(isNaN(o)?r="style 'top' not specified":isNaN(e)?r="style 'left' not specified":isNaN(t)?r="style 'width' not specified":isNaN(i)&&(r="style 'height' not specified"),r)throw new Error("Caption "+(s+1)+" definition error, "+r+".\r\n"+$.$Elmt.outerHTML)}});var o=$.$Elmt,e=$Jssor$.$CssWidth($),t=$Jssor$.$CssHeight($),r=($Jssor$.$CssWidth(captionParent),$Jssor$.$CssHeight(captionParent),{$Zoom:1,$Rotate:0,$Clip:{$Top:0,$Right:e,$Bottom:t,$Left:0}});r=i(o,$.$Transition,r,!0),i(o,$.$Transition2,r,!1)})}$JssorDebug$.$Execute(function(){s.$CaptionTransitions?$Jssor$.$IsArray(s.$CaptionTransitions)||$JssorDebug$.$Error("'$CaptionSlideoOptions' option error, '$CaptionSlideoOptions.$CaptionTransitions' is not an array."):$JssorDebug$.$Error("'$CaptionSlideoOptions' option error, '$CaptionSlideoOptions.$CaptionTransitions' not specified.")});var n,a=this,l={},u=s.$CaptionTransitions;$JssorAnimator$.call(a,0,0),a.$Revert=function(){a.$GoToPosition(-1,!0)},n=[$JssorEasing$.$EaseSwing,$JssorEasing$.$EaseLinear,$JssorEasing$.$EaseInQuad,$JssorEasing$.$EaseOutQuad,$JssorEasing$.$EaseInOutQuad,$JssorEasing$.$EaseInCubic,$JssorEasing$.$EaseOutCubic,$JssorEasing$.$EaseInOutCubic,$JssorEasing$.$EaseInQuart,$JssorEasing$.$EaseOutQuart,$JssorEasing$.$EaseInOutQuart,$JssorEasing$.$EaseInQuint,$JssorEasing$.$EaseOutQuint,$JssorEasing$.$EaseInOutQuint,$JssorEasing$.$EaseInSine,$JssorEasing$.$EaseOutSine,$JssorEasing$.$EaseInOutSine,$JssorEasing$.$EaseInExpo,$JssorEasing$.$EaseOutExpo,$JssorEasing$.$EaseInOutExpo,$JssorEasing$.$EaseInCirc,$JssorEasing$.$EaseOutCirc,$JssorEasing$.$EaseInOutCirc,$JssorEasing$.$EaseInElastic,$JssorEasing$.$EaseOutElastic,$JssorEasing$.$EaseInOutElastic,$JssorEasing$.$EaseInBack,$JssorEasing$.$EaseOutBack,$JssorEasing$.$EaseInOutBack,$JssorEasing$.$EaseInBounce,$JssorEasing$.$EaseOutBounce,$JssorEasing$.$EaseInOutBounce];var c={$Top:"y",$Left:"x",$Bottom:"m",$Right:"t",$Zoom:"s",$Rotate:"r",$Opacity:"o",$Easing:"e",$ZIndex:"i",$Round:"rd",$During:"du",$Duration:"d"};$Jssor$.$Each(c,function($,s){l[$]=s}),r(t($,1))};
;window.baidu=window.baidu||{},baidu.template=baidu.template||{},baidu.template._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},baidu.template._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")};
;define("bigba:widget/common/ui/cartAlert/cartAlert.js",function(require,exports,module){function dialogAlert(a){var e={};e.error_msg="非常抱歉，"+a.error_msg;var t=alertTpl(e);if(alertDialog){var r=alertDialog.getElement();r.html(t)}else{alertDialog=new Dialog({html:t,width:250});var r=alertDialog.getElement();r.addClass("alertDialog")}clearTimeout(timerDialog),timerDialog=setTimeout(function(){alertDialog.show({fade:!0})},500)}var Dialog=require("jsmod/ui/dialog"),alertDialog,timerDialog,alertTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<p class="mc-desc">',"undefined"==typeof error_msg?"":baidu.template._encodeHTML(error_msg),'</p><div class="submitBtns"><a class="mc-btn" href="http://waimai.baidu.com">看看其它餐厅</a><a class="mc-btn-dis closeBtn" href="javascript:;">取消</a></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];module.exports={alert:dialogAlert}});
;define("bigba:widget/common/ui/citybar/citybar.js",function(require,exports,module){function Citybar(t){$.extend(opt,t),bindEvent(),initHtml()}function bindEvent(){var t=opt.$el,e=0;t.on("click",function(t){e=!e,listener.trigger("city","select",{toggle:e}),t.stopPropagation()}),listener.on("muticities","selected",function(t,e){setCity(e),e.hasaoi?listener.trigger("city","hasaoi",e):listener.trigger("city","hide")}),$(document).on("click",function(){listener.trigger("city","hide")})}function setCity(t){var e=opt.$el;e.find(".current-city").html(t.name).attr("data-name",t.name).attr("data-code",t.code).attr("data-hasaoi",t.hasaoi)}function initHtml(){var t,e=opt.cityList,i=opt.currentCity;i&&i.name?CookieDataCenter.setCity(opt.currentCity):(i=CookieDataCenter.getCity(),opt.currentCity=i),t=cityBarTmpl({city_list:e,current_city:i}),opt.$el.append(t),opt.init&&opt.init(opt)}var CookieDataCenter=require("bigba:static/utils/CookieDataCenter.js"),cityBarTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="city-dropdown">    <div class="city-locate dropdown-toggle">        <a class="current-city" data-name="',"undefined"==typeof current_city.name?"":baidu.template._encodeHTML(current_city.name),'" data-code="',"undefined"==typeof current_city.code?"":baidu.template._encodeHTML(current_city.code),'">',"undefined"==typeof current_city.name?"":baidu.template._encodeHTML(current_city.name),'</a>        <b class="arrow"></b>    </div>    <div class="dropdown-menu hide">        <!-- <div class="city-disabled">已开通城市</div>        <ul class="city-list">            ');for(var i=0,len=city_list.length;len>i;i++){var item=city_list[i];_template_fun_array.push('                <li class="city-item" data-name = "',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'" data-code = "',"undefined"==typeof item.code?"":baidu.template._encodeHTML(item.code),'">',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),"</li>            ")}_template_fun_array.push("        </ul> -->    </div></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],exports,opt={$el:null,cityList:[],currentCity:null,init:null};exports=module.exports=Citybar});
;define("bigba:widget/common/ui/search/search.js",function(require,exports,module){var CookieDataCenter=require("bigba:static/utils/CookieDataCenter.js"),AddressDataCenter=require("bigba:static/utils/AddressDataCenter.js"),resultTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="search-title">    <div class="search-desc">请确定您的地址</div></div><div class="search-list s-list">    <ul>        ');for(var i=0,len=data.length;len>i;i++){var item=data[i];_template_fun_array.push('            <li data-uid = "',"undefined"==typeof item.uid?"":baidu.template._encodeHTML(item.uid),'" data-link = "/waimai?qt=shoplist&lat=',"undefined"==typeof item.latitude?"":baidu.template._encodeHTML(item.latitude),"&lng=","undefined"==typeof item.longitude?"":baidu.template._encodeHTML(item.longitude),"&address=","undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),"&city_id=","undefined"==typeof city_id?"":baidu.template._encodeHTML(city_id),'" data-msg = "',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),"$","undefined"==typeof(item.address?item.address:"")?"":baidu.template._encodeHTML(item.address?item.address:""),"$","undefined"==typeof item.latitude?"":baidu.template._encodeHTML(item.latitude),"$","undefined"==typeof item.longitude?"":baidu.template._encodeHTML(item.longitude),"$","undefined"==typeof item.shopnum?"":baidu.template._encodeHTML(item.shopnum),"$","undefined"==typeof city_id?"":baidu.template._encodeHTML(city_id),'" data-name="',"undefined"==typeof decodeURIComponent(item.name)?"":baidu.template._encodeHTML(decodeURIComponent(item.name)),'">                <div class="addr addr-icon"></div>                <div class="addr addr-content">                    <p class="addr-name">',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'</p>                    <p class="addr-desc">',"undefined"==typeof(item.address?item.address:"")?"":baidu.template._encodeHTML(item.address?item.address:""),"</p>                    "),item.shopnum&&0!==parseInt(item.shopnum,10)?_template_fun_array.push('                        <p class="addr-shop-num">',"undefined"==typeof item.shopnum?"":baidu.template._encodeHTML(item.shopnum),"家餐厅</p>                    "):_template_fun_array.push('                        <p class="addr-shop-num addr-no-open">暂无开通</p>                    '),_template_fun_array.push("                </div>            </li>        ")}_template_fun_array.push("    </ul></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],historyTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="s-list search-list">    <ul>        ');for(var i=0,len=data.length;len>i;i++){var item=data[i];_template_fun_array.push('        <li data-link = "/waimai?qt=shoplist&lat=',"undefined"==typeof item.lat?"":baidu.template._encodeHTML(item.lat),"&lng=","undefined"==typeof item.lng?"":baidu.template._encodeHTML(item.lng),"&address=","undefined"==typeof decodeURIComponent(item.name)?"":baidu.template._encodeHTML(decodeURIComponent(item.name)),"&city_id=","undefined"==typeof decodeURIComponent(item.city_id)?"":baidu.template._encodeHTML(decodeURIComponent(item.city_id)),'" data-name="',"undefined"==typeof decodeURIComponent(item.name)?"":baidu.template._encodeHTML(decodeURIComponent(item.name)),'">                <div class="addr his-icon"></div>                <div class="addr addr-content">                    <p class="addr-name">',"undefined"==typeof decodeURIComponent(item.name)?"":baidu.template._encodeHTML(decodeURIComponent(item.name)),'</p>                    <p class="addr-desc">',"undefined"==typeof decodeURIComponent(item.address)?"":baidu.template._encodeHTML(decodeURIComponent(item.address)),"</p>                    "),item.shopnum&&0!==parseInt(item.shopnum,10)?_template_fun_array.push('                        <p class="addr-shop-num">',"undefined"==typeof item.shopnum?"":baidu.template._encodeHTML(item.shopnum),"家外卖餐厅</p>                    "):_template_fun_array.push('                        <p class="addr-shop-num addr-no-open">暂无开通</p>                    '),_template_fun_array.push("                </div>            </li>        ")}_template_fun_array.push('    </ul></div><div class="search-history-clear">    <a class="clear-btn">清空历史记录</a></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],sugTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="search-list s-list">    <ul>        ');for(var i=0,len=data.length;len>i;i++){var item=data[i];_template_fun_array.push('            <li data-name="',"undefined"==typeof item.name3?"":baidu.template._encodeHTML(item.name3),'">                <div class="addr addr-icon"></div>                <div class="addr addr-content">                    <p class="addr-name">',"undefined"==typeof item.name3?"":baidu.template._encodeHTML(item.name3),'</p>                    <p class="addr-desc">',"undefined"==typeof item.name1?"":baidu.template._encodeHTML(item.name1),"","undefined"==typeof item.name2?"":baidu.template._encodeHTML(item.name2),"","undefined"==typeof item.name3?"":baidu.template._encodeHTML(item.name3),"</p>                </div>            </li>        ")}_template_fun_array.push("    </ul></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],emptyTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("<p>此地点附近暂时没有外卖餐厅，努力覆盖中...</p>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],_historyHtml,Search=function(e,t){var a=function(){function e(e){$.extend(y,e)}function t(){y.$resultEl.addClass("mod-search-hide mod-search-container")}function a(){y.$resultEl.addClass("mod-search-hide")}function n(){for(var e=y.$resultEl.find(".s-list li"),t=y.$resultEl.offset().top,a=0,n=e.length;n>a;a++){var i=e.eq(a).offset().top,d=e.eq(a).outerHeight(!0),s=i-d-t;e.eq(a).attr("data-top",s)}}function i(){var e;y.$resultEl.empty().removeClass("mod-search-result mod-search-sug mod-search-empty").addClass("mod-search-history"),e=c(),e?(y.$resultEl.removeClass("mod-search-hide").append(e).show(),n()):y.$resultEl.addClass("mod-search-hide")}function d(){y.$resultEl.hide().empty().removeClass("mod-search-history").addClass("mod-search-hide")}function s(e){y.$resultEl.empty().removeClass("mod-search-hide mod-search-result mod-search-history mod-search-empty").addClass("mod-search-sug").append(e).show(),n(),m()}function l(e){y.$resultEl.empty(),y.$resultEl.removeClass("mod-search-hide mod-search-sug mod-search-history mod-search-empty"),y.$resultEl.addClass("mod-search-result"),y.$resultEl.append(e).show(),n(),m()}function r(){if(y.NOListLiJump)y.$hiddenSearchPOI.val("0-0"),a();else{var e=emptyTmpl();y.$resultEl.empty(),y.$resultEl.removeClass("mod-search-hide mod-search-sug mod-search-history mod-search-result"),y.$resultEl.addClass("mod-search-empty"),y.$resultEl.append(e).show(),m()}}function o(){$(".s-loading").removeClass("mod-search-hide")}function m(){$(".s-loading").addClass("mod-search-hide")}function u(e){e.preventDefault(),e.stopPropagation()}function c(){if(_historyHtml)return _historyHtml;var e=AddressDataCenter.getAll();return e&&e.length?_historyHtml=historyTmpl({data:e}):null}function p(e){var t=CookieDataCenter.getCity().code,e=e?e:y.$searchConEl.val(),a="";$.ajax({url:"http://map.baidu.com/su?wd="+e,type:"GET",dataType:"jsonp",data:{cid:t,type:0},success:function(t){var n=t.s||[];if(n.length>0){if(y.NOListLiJump){a="";var i=[];$.each(n,function(t,a){{var n=a.split("$")[3];n.replace(e,"<b>"+e+"</b>")}i.push({name1:a.split("$")[0],name2:a.split("$")[1],name3:a.split("$")[3]})}),a=sugTmpl({data:i})}else a="<div class='search-list s-list'><ul>",$.each(n,function(t,n){var i=n.split("$")[3],d="<i></i><span>"+i.replace(e,"<b>"+e+"</b>")+"</span>";a+="<li data-name='"+i+"'>"+d+"</li>"}),a+="</ul></div>";s(a)}}})}function _(e){o();var e=e?e:y.$searchConEl.val();statis&&statis.trackEvent("find","poisearch",e),addNStat({da_src:"findBk.searchBtn",da_act:"click",da_trd:"waimai"});var t="/waimai?qt=poisearch&from=pc&ie=utf-8&sug=0&tn=B_NORMAL_MAP&oue=1&res=1&c="+CookieDataCenter.getCity().code;$.ajax({type:"GET",url:t,dataType:"json",data:{wd:e,_t:+new Date},timeout:1e4,success:function(e){if(0==e.error_no)if(""==e.result.url)if(y.NOListLiJump&&1==e.result.content.length){var t=e.result.content[0].name||"",n=e.result.content[0].latitude||"0",i=e.result.content[0].longitude||"0";y.$searchConEl.val(t),y.$hiddenSearchPOI.val(n+"-"+i),a()}else{var d=resultTmpl({data:e.result.content,city_id:e.result.city_id});l(d)}else{var s=e.result.content[0]||{shopnum:0};if(s.shopnum){var o={};o.name=s.name,o.address=s.address,o.lat=s.latitude,o.lng=s.longitude,o.shopnum=s.shopnum,o.city_id=e.result.city_id,AddressDataCenter.add(o),y.NOListLiJump?(y.$searchConEl.val(o.name),y.$hiddenSearchPOI.val(o.lat+"-"+o.lng),a()):window.location.href=e.result.url}else r()}else r()},error:function(){r()}})}function f(){var e=y.$resultEl.find(".s-list");if(e.length>0){var t=e.find("li.s-on");if(t.length>0)return void t.click()}y.$searchConEl.val()&&_(y.$searchConEl.val())}function h(){var e,t=y.$resultEl.find(".s-list li");if(t.length>0){if(y.$resultEl.hasClass("mod-search-result")){if(t.size()<5)return}else if(t.size()<7)return;e=y.$resultEl.find(".s-list li.s-on").attr("data-top"),y.$resultEl.scrollTop(e)}}function v(e){var t=y.$searchConEl,n=y.$resultEl,s="show.history";y.showHistoryTrg&&(s=y.showHistoryTrg);var l="hide.history";y.hideHistoryTrg&&(l=y.hideHistoryTrg),$(e).on(s,function(){setTimeout(function(){i()},0)}),$(e).on(l,function(){setTimeout(function(){d()},0)}),n.on("blur",function(){this.hide()}),t.on("click",function(e){var a=t.val(),n=CookieDataCenter.getCity();0==a.length?n.hasaoi||i():p(a),e.stopPropagation()}),t.on("keydown",function(e){if(window.NOBLUR="NOPE",y.$hiddenSearchPOI&&y.$hiddenSearchPOI.val(""),13==e.which)return void f();if(38!=e.which)if(40!=e.which){var a=CookieDataCenter.getCity();setTimeout(function(){var e=t.val();0==e.length?a.hasaoi||i():p(e)},0)}else{var d=n.find(".s-list");if(d.length>0){var s=d.find("li.s-on");0==s.length||s.index()==d.find("li").length-1?(d.find("li:first").addClass("s-on"),s.removeClass("s-on")):(s.next("li").addClass("s-on"),s.removeClass("s-on"));var l=d.find("li.s-on"),r=l.attr("data-name");h(),r&&t.val(r)}}else{var d=n.find(".s-list");if(d.length>0){var s=d.find("li.s-on");0==s.length||0==s.index()?(d.find("li:last").addClass("s-on"),s.removeClass("s-on")):(s.prev("li").addClass("s-on"),s.removeClass("s-on"));var l=d.find("li.s-on"),r=l.attr("data-name");h(),r&&t.val(r)}}}),n.on("click",".s-list li",function(e){if(u(e),n.hasClass("mod-search-sug")){var t=$(e.currentTarget).data("name");return t&&y.$searchConEl.val(t),void _()}var a={},i=$(this).attr("data-msg"),s=$(this).attr("data-link");if(n.hasClass("mod-search-result")){if(y.NOListLiJump);else if($(this).find(".addr-shop-num").hasClass("addr-no-open"))return;var l=i.split("$");a.name=l[0],a.address=l[1],a.lat=l[2],a.lng=l[3],a.shopnum=l[4],a.city_id=l[5],AddressDataCenter.add(a)}if(y.NOListLiJump){for(var l=s.split("&"),r=[],o=0;o<l.length;o++){var m=l[o].split("=")[0],c=l[o].split("=")[1];r[m]=c}a.name=r.address,a.lat=r.lat,a.lng=r.lng,a.city_id=r.city_id,AddressDataCenter.add(a),y.$searchConEl.val(r.address),y.$hiddenSearchPOI.val(a.lat+"-"+a.lng),d()}else window.location.href=s}),n.on("mousedown",".s-list li",function(){window.NOBLUR="YES"}),n.on("click",".clear-btn",function(e){u(e),AddressDataCenter.clearAll(),_historyHtml=null,a(),n.empty()}),$(document).on("click",a),n.hover(function(){$(document).unbind("click",a)},function(){$(document).on("click",a)}),t.hover(function(){$(document).unbind("click",a)},function(){$(document).on("click",a)})}var y={$resultEl:null,$searchConEl:null,$searchBtn:null,showHistoryTrg:null,hideHistoryTrg:null,NOListLiJump:null,$hiddenSearchPOI:null};return{initOption:e,initHtml:t,bindEvent:v}}();a.initOption(t),a.initHtml(),a.bindEvent(e),a=null};module.exports={init:function(e){new Search(this,e)}}});
;define("bigba:widget/common/nav/nav.js",function(require,exports,module){function hideSearch(){$searchEl.removeClass("s-active")}function showSearch(){$searchEl.addClass("s-active"),$searchEl.find(".s-second .s-con").val(""),$searchEl.find(".s-second .s-con").focus(),$(Search).trigger("show.history"),$(Search).trigger("address.hide.history")}function showCircle(e){var t=CookieDataCenter.getCity(t);t.hasaoi?($searchEl.addClass("s-active"),$searchEl.find(".s-second .s-con").val(""),$searchEl.find(".s-second .s-con").focus(),listener.trigger("city","hasaoi",t),$(Search).trigger("hide.history")):showSearch(),e&&e.stopPropagation()}function initEvent(){navList.on("click.nav",function(e){var t=$(this).attr("id"),a=this;return"order"===t?(e.preventDefault(),void require.async("bigba:widget/common/userinfo/UserMgr.js",function(e){e.login({url:$(a).find(".nav-item-link").prop("href")})})):void $(this).addClass("nav-item-active")}),$searchEl.find(".switch-action").on("click",showCircle),$searchEl.find(".s-first .s-con").on("click",showCircle),$searchEl.find(".s-second .s-con").on("click",showCircle),$searchEl.find("#s-con").on("keyup focus",function(e){var t=$(e.currentTarget),a=t.val(),i=CookieDataCenter.getCity();i.hasaoi&&""===a?setTimeout(function(){listener.trigger("city","hasaoi",i),$(Search).trigger("hide.history")},0):listener.trigger("city","hide")}),listener.on("muticities","selected",function(){showCircle()}),$(document).on("click",hideSearch),$searchEl.hover(function(){$(document).unbind("click",hideSearch)},function(){$(document).on("click",hideSearch)}),listener.on("city","select",function(){$(Search).trigger("hide.history")})}function initCityBar(){}var util=require("bigba:static/util.js"),CookieDataCenter=require("bigba:static/utils/CookieDataCenter.js"),CityBar=require("bigba:widget/common/ui/citybar/citybar.js"),Search=require("bigba:widget/common/ui/search/search.js"),navList=$(".header .nav .nav-item"),resultTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="search-title">    <div class="search-desc">请确定您的地址</div></div><div class="search-list s-list">    <ul>        ');for(var i=0,len=data.length;len>i;i++){var item=data[i];_template_fun_array.push('            <li data-uid = "',"undefined"==typeof item.uid?"":baidu.template._encodeHTML(item.uid),'" data-link = "/waimai?qt=shoplist&lat=',"undefined"==typeof item.latitude?"":baidu.template._encodeHTML(item.latitude),"&lng=","undefined"==typeof item.longitude?"":baidu.template._encodeHTML(item.longitude),"&address=","undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),"&city_id=","undefined"==typeof city_id?"":baidu.template._encodeHTML(city_id),'" data-msg = "',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),"$","undefined"==typeof(item.address?item.address:"")?"":baidu.template._encodeHTML(item.address?item.address:""),"$","undefined"==typeof item.latitude?"":baidu.template._encodeHTML(item.latitude),"$","undefined"==typeof item.longitude?"":baidu.template._encodeHTML(item.longitude),"$","undefined"==typeof item.shopnum?"":baidu.template._encodeHTML(item.shopnum),"$","undefined"==typeof city_id?"":baidu.template._encodeHTML(city_id),'" data-name="',"undefined"==typeof decodeURIComponent(item.name)?"":baidu.template._encodeHTML(decodeURIComponent(item.name)),'">                <div class="addr addr-icon"></div>                <div class="addr addr-content">                    <p class="addr-name">',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'</p>                    <p class="addr-desc">',"undefined"==typeof(item.address?item.address:"")?"":baidu.template._encodeHTML(item.address?item.address:""),"</p>                    "),item.shopnum&&0!==parseInt(item.shopnum,10)?_template_fun_array.push('                        <p class="addr-shop-num">',"undefined"==typeof item.shopnum?"":baidu.template._encodeHTML(item.shopnum),"家餐厅</p>                    "):_template_fun_array.push('                        <p class="addr-shop-num addr-no-open">暂无开通</p>                    '),_template_fun_array.push("                </div>            </li>        ")}_template_fun_array.push("    </ul></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],historyTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="s-list search-list">    <ul>        ');for(var i=0,len=data.length;len>i;i++){var item=data[i];_template_fun_array.push('        <li data-link = "/waimai?qt=shoplist&lat=',"undefined"==typeof item.lat?"":baidu.template._encodeHTML(item.lat),"&lng=","undefined"==typeof item.lng?"":baidu.template._encodeHTML(item.lng),"&address=","undefined"==typeof decodeURIComponent(item.name)?"":baidu.template._encodeHTML(decodeURIComponent(item.name)),"&city_id=","undefined"==typeof decodeURIComponent(item.city_id)?"":baidu.template._encodeHTML(decodeURIComponent(item.city_id)),'" data-name="',"undefined"==typeof decodeURIComponent(item.name)?"":baidu.template._encodeHTML(decodeURIComponent(item.name)),'">                <div class="addr his-icon"></div>                <div class="addr addr-content">                    <p class="addr-name">',"undefined"==typeof decodeURIComponent(item.name)?"":baidu.template._encodeHTML(decodeURIComponent(item.name)),'</p>                    <p class="addr-desc">',"undefined"==typeof decodeURIComponent(item.address)?"":baidu.template._encodeHTML(decodeURIComponent(item.address)),"</p>                    "),item.shopnum&&0!==parseInt(item.shopnum,10)?_template_fun_array.push('                        <p class="addr-shop-num">',"undefined"==typeof item.shopnum?"":baidu.template._encodeHTML(item.shopnum),"家外卖餐厅</p>                    "):_template_fun_array.push('                        <p class="addr-shop-num addr-no-open">暂无开通</p>                    '),_template_fun_array.push("                </div>            </li>        ")}_template_fun_array.push('    </ul></div><div class="search-history-clear">    <a class="clear-btn">清空历史记录</a></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],$el=$(".header"),$searchEl=$("#nav-search-section"),cityBarObj;module.exports={init:function(){cityBarObj=new CityBar({$el:$searchEl.find(".s-citybar"),init:initCityBar}),Search.init({$resultEl:$searchEl.find(".s-search-container1"),$searchConEl:$searchEl.find(".s-second .s-con")}),initEvent()},initSwitchaddr:function(){var e,t=CookieDataCenter.getAddr()||{};e=t.address||"",$("#nav-search-section input.s-con").val(util.encodeHTML(decodeURIComponent(e)))}}});
;define("bigba:widget/common/ui/address/address.js",function(require,exports,module){function Address(e){this.opt=$.extend({},_opt,e),this.bindEvent(),this.initList()}var Dialog=require("jsmod/ui/dialog"),listTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("");for(var i=0,len=data.length;len>i;i++){var item=data[i];_template_fun_array.push('<li class="addr-item" data-id="',"undefined"==typeof item.id?"":baidu.template._encodeHTML(item.id),'" data-msg = "',"undefined"==typeof item.user_name?"":baidu.template._encodeHTML(item.user_name),"$","undefined"==typeof item.gender?"":baidu.template._encodeHTML(item.gender),"$","undefined"==typeof item.user_phone?"":baidu.template._encodeHTML(item.user_phone),"$","undefined"==typeof item.sug_address?"":baidu.template._encodeHTML(item.sug_address),"$","undefined"==typeof item.detail_address?"":baidu.template._encodeHTML(item.detail_address),"$","undefined"==typeof item.location?"":baidu.template._encodeHTML(item.location),'">    <div class="addr-title">        <div class="addr-user">            <span class="name">',"undefined"==typeof item.user_name?"":baidu.template._encodeHTML(item.user_name),'</span>            <span class="sex">',"undefined"==typeof(2==item.gender?"女士":"先生")?"":baidu.template._encodeHTML(2==item.gender?"女士":"先生"),'</span>        </div>        <div class="addr-action">            <a class="addr-edit">编辑</a>            <a class="addr-remove">删除</a>        </div>    </div>    <div class="addr-con">        <p class="phone">',"undefined"==typeof item.user_phone?"":baidu.template._encodeHTML(item.user_phone),'</p>        <p class="addr-desc">',"undefined"==typeof item.address?"":baidu.template._encodeHTML(item.address),'</p>    </div>    <span class="select-ico"></span></li>')}_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],detailTeml=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="addr-detail" id="new-address-section">    <form>        <table class="addr-table" border="0">            <tr>                <td valign="top"><span class="l-label">姓&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名</span></td>                <td>                    <input type="hidden" value="',"undefined"==typeof data.id?"":baidu.template._encodeHTML(data.id),'" name="adrr_id">                    <div class="form-group">                        <div class="input-control">                            <input type="text" name="user_name" placeholder="您的姓名" value="',"undefined"==typeof data.user_name?"":baidu.template._encodeHTML(data.user_name),'" class="placeholder-con">                            <span class="star">*</span>                        </div>                        <div class="error-msg v-hide">请填写您的姓名，不能超过8个字符</div>                    </div>                    <div class="form-group">                        <div class="input-control">                                                        <input type="hidden" name="gender" value="',"undefined"==typeof(data.gender?data.gender:1)?"":baidu.template._encodeHTML(data.gender?data.gender:1),'">                            <div class="s-gender '),(1===parseInt(data.gender,10)||isNaN(parseInt(data.gender,10)))&&_template_fun_array.push(" selected "),_template_fun_array.push('" data-gender="1"  >                                <i></i><span>先生</span>                            </div>                            <div class="s-gender '),2==data.gender&&_template_fun_array.push(" selected "),_template_fun_array.push('" data-gender="2">                                <i></i><span>女士</span>                            </div>                        </div>                        <div class="error-msg v-hide">请选择您的性别</div>                    </div>                </td>            </tr>            <tr>                <td valign="top"><span class="l-label">电&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;话</span></td>                <td>                    <div class="form-group">                        <div class="input-control">                            <input type="text" name="user_phone" placeholder="11位手机号" value="',"undefined"==typeof data.user_phone?"":baidu.template._encodeHTML(data.user_phone),'" class="placeholder-con">                            <span class="star">*</span>                        </div>                        <div class="error-msg v-hide">请填写正确的手机号</div>                    </div>                </td>            </tr>            <tr>                <td valign="top"><span class="l-label">位&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;置</span></td>                <td>                    <div class="form-group">                        <div class="input-control poi_address">                            <i class="addr-icon-input"></i>                            <input type="text" name="sug_address" id="poi_address" placeholder="请输入小区、大厦或学校" value="',"undefined"==typeof data.sug_address?"":baidu.template._encodeHTML(data.sug_address),'" class="placeholder-con">                            <span class="star">*</span>                                                        <input type="hidden" name="hide_sug_address" value="',"undefined"==typeof data.lat?"":baidu.template._encodeHTML(data.lat),"-","undefined"==typeof data.lng?"":baidu.template._encodeHTML(data.lng),'" id="hide_poi_address">                        </div>                        <div class="error-msg v-hide">请输入地址并在下拉框中进行选择</div>                        <div class="s-search-container2"></div>                                            </div>                </td>            </tr>            <tr>                <td valign="top"><span class="l-label">详细地址</span></td>                <td>                    <div class="form-group">                        <div class="input-control">                                                        <input type="text" name="detail_address" placeholder="请输入门牌号等详细信息" value="',"undefined"==typeof data.detail_address?"":baidu.template._encodeHTML(data.detail_address),'" class="placeholder-con">                        </div>                        <div class="error-msg v-hide">请输入门牌号等详细信息</div>                    </div>                </td>            </tr>        </table>        <div class="form-group form-submit">            <input type="button" class="saveBtn" data-node="saveBtn" value="'),confirmTxt?_template_fun_array.push("","undefined"==typeof confirmTxt?"":baidu.template._encodeHTML(confirmTxt),""):_template_fun_array.push("保存"),_template_fun_array.push('">            '),noCancel||_template_fun_array.push('                <input type="button" class="escBtn versa" value="取消">            '),_template_fun_array.push("        </div>    </form></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],GlobalTips=require("bigba:static/utils/GlobalTips.js"),cacheDialog;window.NOBLUR="NOPE";var CookieDataCenter=require("bigba:static/utils/CookieDataCenter.js"),Search=require("bigba:widget/common/ui/search/search.js"),ADD_AJAX="/waimai?qt=addressmanage&type=add&display=json",UPDATE_AJAX="/waimai?qt=addressmanage&type=update&display=json",REMOVE_AJAX="/waimai?qt=addressmanage&type=del&display=json",SETDEFAULT_AJAX="/waimai?qt=addressmanage&type=set&display=json",_opt={data:[],$listEl:null,$addBtn:null,$detailEl:null,listComplete:null,itemRemove:null,dialogShow:null,saveSuccess:null,reForm:!0};$.extend(Address.prototype,{checkTotal:function(){var e=this.opt.$listEl.find("li.addr-item:not('.addr-add')").length;e>=10?this.opt.$addBtn.addClass("hide"):this.opt.$addBtn.removeClass("hide")},bindEvent:function(){var e=this.opt.$listEl,t=this;e.on("click",".addr-edit",function(e){var a={},i=$(this).closest("li").attr("data-msg"),d=i.split("$");a.id=$(this).closest("li").attr("data-id"),a.user_name=d[0],a.gender=d[1],a.user_phone=d[2],a.sug_address=d[3],a.detail_address=d[4],a.lng=d[5].split(",")[0],a.lat=d[5].split(",")[1],t.showDetailDialog(a),e.preventDefault(),e.stopPropagation()}),e.on("click",".addr-remove",function(e){t.removeAddress($(this).closest("li")),e.preventDefault(),e.stopPropagation()}),this.opt.$addBtn&&this.opt.$addBtn.on("click",function(){var e=t.opt.$listEl.find("li.addr-item:not('.addr-add')").length;return e>=10?void t.errorTip("最多只能添加10个送货地址"):void t.showDetailDialog()}),$(this).on("listComplete",function(){this.opt.listComplete&&this.opt.listComplete(t);var e=$("#new-address-section");this.initSugEvent(e),$(document).on("click",function(){e.find(".s-selected").hide(),e.find(".s-search-container2").hide()})}),$(this).on("dialogShow",function(){this.opt.dialogShow&&this.opt.dialogShow(t)}),this.opt.$detailEl&&(this.opt.$detailEl.on("click",".saveBtn",function(){t.saveAddress()}),this.opt.$detailEl.on("click",".escBtn",function(){t.cacheDialog.hide({fade:!0})})),$(this).on("saveSuccess",function(e,a){this.opt.saveSuccess?this.opt.saveSuccess(t,a):(t.cacheDialog.hide({fade:!0}),this.successTip("保存成功，正在刷新..."),setTimeout(function(){window.location.reload()},1500))}),$(this).on("itemRemove",function(e,a){this.opt.itemRemove&&t.opt.itemRemove(t,a)})},initList:function(){this.opt.data;this.opt.data&&this.opt.data.length>0&&this.opt.$listEl.prepend(listTmpl({data:this.opt.data})),$(this).trigger("listComplete")},initSugEvent:function(e){var t=this,a=e,i=a.find(".s-search-container2"),d=a.find("#poi_address"),s=a.find("#poi_address"),n=a.find("#hide_poi_address");Search.init({$resultEl:i,$searchConEl:d,showHistoryTrg:"address.show.history",hideHistoryTrg:"address.hide.history",NOListLiJump:"NOPE",$hiddenSearchPOI:n}),s.on("click",function(e){t.showSearch(a),e.stopPropagation()}),$(".mod-dialog-wrap").on("click",function(e){i.hide(),e.stopPropagation()}),d.on("blur",function(){"NOPE"==window.NOBLUR&&t.checkForm("SUG")})},showSearch:function(e){var t=e.find("#poi_address");t.focus(),$(Search).trigger("hide.history")},bindGenderEvent:function(e){e.on("click",".s-gender",function(){if(!$(this).hasClass("selected")){$(".s-gender").removeClass("selected"),$(this).addClass("selected");var e=$(this).attr("data-gender");$(this).parent().find("[name='gender']").val(e)}})},showDetailDialog:function(e){var t=e?e:{},a=detailTeml({data:t,noCancel:!1,confirmTxt:"保存"});this.cacheDialog=new Dialog({html:a,width:560,height:400}),this.cacheDialog.show({fade:!0}),this.opt.$detailEl=$(".addr-detail"),$(".placeholder-con").placeholder(),this.bindGenderEvent(this.opt.$detailEl),$(this).trigger("dialogShow"),this.initSugEvent(this.opt.$detailEl)},removeAddress:function(e){var t=e.attr("data-id");$.ajax({url:REMOVE_AJAX,type:"GET",dataType:"json",data:{id:t,bdstoken:$("#bdstoken").val()},context:this,success:function(a){if(0==a.error_no)e.fadeOut(),e.remove(),this.successTip("送餐地址删除成功"),$(this).trigger("itemRemove",t);else{var i=a.error_msg?a.error_msg:"服务器累了，请稍后重试";this.errorTip(i)}}})},saveAddress:function(){if(this.errorHide(),this.checkForm()){var e=this.getFormData();e.bdstoken=$("#bdstoken").val();var t=e.id?UPDATE_AJAX:ADD_AJAX;$.ajax({url:t,type:"POST",dataType:"json",data:e,context:this,success:function(t){if(0==t.error_no)e.__type=e.id?"update":"add",e.id=e.id||t.result.id||"",$(this).trigger("saveSuccess",e);else{var a=t.error_msg?t.error_msg:"服务器累了，请稍后重试";this.errorTip(a)}}})}},checkForm:function(e){var t=e?1:0;if(t){var a=this.getInputValue("sug_address"),i=this.opt.$detailEl.find("#hide_poi_address").val();return(!$.trim(a)||a.length>40||!i)&&this.errorShow("sug_address"),!1}var d=this.getInputValue("user_name");if(!$.trim(d)||d.length>8)return this.errorShow("user_name"),!1;var s=this.getInputValue("gender");if(!s)return this.errorShow("gender"),!1;var n=this.getInputValue("user_phone");if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(n))return this.errorShow("user_phone"),!1;var a=this.getInputValue("sug_address"),i=this.opt.$detailEl.find("#hide_poi_address").val();return!$.trim(a)||a.length>40||!i?(this.errorShow("sug_address"),!1):!0},getFormData:function(){for(var e=this.opt.$detailEl.find(".input-control"),t={},a=0,i=e.length;i>a;a++){var d=e.eq(a),s=d.find("input").length?d.find("input").attr("name"):d.find("textarea").attr("name");t[s]=this.getInputValue(s)}t.id=this.getInputValue("adrr_id");var n=e.find("#hide_poi_address").val();return t.lat=n.split("-")[0]?n.split("-")[0]:"",t.lng=n.split("-")[1]?n.split("-")[1]:"",t.address=t.sug_address+" "+t.detail_address,t},successTip:function(e){GlobalTips.tip(e)},errorTip:function(e){GlobalTips.tip(e)},errorShow:function(e){$("[name='"+e+"']").parent().next().removeClass("v-hide"),$("[name='"+e+"']").addClass("caution-line"),this.errorHide(2500,e)},errorHide:function(e,t){var e=e?e:0,t=t?t:"";return e?void setTimeout(function(){$(".error-msg").addClass("v-hide"),t&&$("[name='"+t+"']").removeClass("caution-line")},e):void $(".error-msg").addClass("v-hide")},getInputValue:function(e){var t=this.opt.$detailEl.find("[name='"+e+"']"),a=t.get(0).tagName.toLowerCase(),i=t.attr("type"),d=function(){var t=$(" input[name='"+e+"']").filter(":checked");return t.length?t.val():null},s=function(){var t=[],a=$(" input[name='"+e+"']:checkbox");if(len=a.length,len>0)for(var i=0;len>i;i++)a[i].checked&&t.push(a[i].value);return t},n=function(){return t.val()};switch(a){case"input":switch(i){case"radio":return d();case"checkbox":return s();default:return n()}break;case"select":return n();case"textarea":return n();default:return null}},addFormHtml:function(){return detailTeml({data:{},noCancel:!0,confirmTxt:"保存送餐信息"})},updateOpt:function(e){this.opt=$.extend({},this.opt,e)}}),module.exports=Address});
;define("bigba:widget/common/ui/feedback/feedback.js",function(require,exports,module){function Feedback(e){$.extend(opt,e),bindEvent(),initContent()}function bindEvent(){var e=opt.$el;e.on("saveSuccess",function(){opt.saveSuccess(e)}),e.on("click",".submitBtn",function(){commitForm()}),e.on("focus",".input",function(){var e=$(this).attr("name");removeError(e)})}function initContent(){var e=feedbackTmpl();opt.$el.append(e)}function showError(e,t){var a=opt.$el;a.find("[name='"+e+"']").parent().next().removeClass("v-hide").text(t)}function removeError(e){var t=opt.$el;t.find("[name='"+e+"']").parent().next().addClass("v-hide").empty()}function commitForm(){var e=opt.$el,t=e.find("[name='content']").val(),a=e.find("[name='contact']").val(),n="pc";return $.trim(t)?t.length>800?void showError("content","功能建议最多不能超过800个字"):checkContact(a)?void $.ajax({url:FEEDBACK_AJAX,type:"POST",dataType:"json",data:{content:t,contact:a,from:n},success:function(t){return 0==t.error_no?(e.trigger("saveSuccess"),void LISTENER.trigger("waimai-contact-feedback","feedback",{succ:!0})):(GlobalTips.tip(t.error_msg),!1)},error:function(){GlobalTips.tip("操作失败1")}}):void showError("contact","请填写正确的联系方式"):void showError("content","请填写功能建议")}function checkContact(e){var t=/(@.*@)|(\.\.)|(@\.)|(\.@)|(^\.)/,a=/^.+\@(\[?)[a-zA-Z0-9\-\.]+\.([a-zA-Z]{2,3}|[0-9]{1,3})(\]?)$/,n=/^1[3|4|5|7|8][0-9]\d{8}$/,o=/^0[\d]{2,3}-[\d]{7,8}/;return $.trim(e)?!t.test(e)&&a.test(e)?!0:n.test(e)?!0:o.test(e)?!0:!1:!1}var GlobalTips=require("bigba:static/utils/GlobalTips.js"),FEEDBACK_AJAX="/waimai?qt=feedback",feedbackTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="feedback-wrap">    <div class="f-form">        <div class="form-group">            <label>功能建议：</label>            <div class="input-control">                <textarea name="content" placeholder="百度外卖还在不断完善和成长，我们真诚的期望听到您的反馈和建议" class="input placeholder-con"></textarea>            </div>            <div class="error-msg v-hide"></div>        </div>        <div class="form-group">            <label>联系方式：</label>            <div class="input-control">                <input type="text" name="contact" placeholder="请留下您的手机号或邮箱" class="input placeholder-con"/>            </div>            <div class="error-msg  v-hide"></div>        </div>        <div class="form-submit">            <input type="button" value="提交" class="submitBtn"/>            <input type="button" value="取消" class="cancelBtn versa"/>        </div>    </div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],LISTENER=window.listener,opt={$el:null,saveSuccess:null};module.exports=Feedback});
;define("bigba:widget/common/ui/multiSetmeal/setmeal.js",function(require,exports,module){function setMeal(e){var t={data:[],$el:null,selectData:{},curGrp:0,selectBasic:{}};EventCenter=$({}),this.opt=$.extend(t,e),this.renderList(this.opt.data),this.bindEvent()}var cookie=require("bigba:static/utils/Cookie.js"),localStore=require("bigba:static/utils/store.js"),setMealTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="setMeal">    <div class="dish-title" data-node="setMeal-title">    </div>    <div class="content" data-node="setMeal-content">        <div class="groups" data-node="setMeal-content-groups">        </div>        <div class="dishes" data-node="setMeal-content-dishes">        </div>    </div>    <div class="bottom" data-node="setMeal-bottom">    </div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],setMealTitleTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<span class="closeBtn"></span><h2>',"undefined"==typeof data.itemName?"":baidu.template._encodeHTML(data.itemName),"</h2>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],setMealDishTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';if(eval(_template_varName),_template_fun_array.push('<div class="list-title">    <div class="big-tip">        '),_template_fun_array.push(parseInt(data.min_num)>=1?"            必选        ":"            可选        "),_template_fun_array.push("        "),parseInt(data.min_num)==parseInt(data.max_num)?(_template_fun_array.push("            "),1==data.min_num?_template_fun_array.push("            (单选)            "):_template_fun_array.push("            (多选 ","undefined"==typeof data.max_num?"":baidu.template._encodeHTML(data.max_num),"份)            "),_template_fun_array.push("        ")):_template_fun_array.push("            (多选 ","undefined"==typeof data.min_num?"":baidu.template._encodeHTML(data.min_num),"-","undefined"==typeof data.max_num?"":baidu.template._encodeHTML(data.max_num),"份)        "),_template_fun_array.push('    </div>    <span class="select-msg" data-node="selectmsg">&nbsp;            </span></div><div class="dishes-list '),selected&&selected.total&&selected.total.count>=data.max_num&&_template_fun_array.push(" enough"),_template_fun_array.push('">    '),data.ids.length>0){var len=data.ids.length,divider=Math.ceil(len/2)-1;_template_fun_array.push("        ");for(var i=0,len=data.ids.length;len>i;i++){var item=data.ids[i];if(_template_fun_array.push("            "),0==i&&_template_fun_array.push('                <div class="dish-c">            '),_template_fun_array.push("            "),parseInt(item.have_attr)||parseInt(item.have_feature)){_template_fun_array.push('            <div class="dish-item mutiple" data-id="',"undefined"==typeof item.item_id?"":baidu.template._encodeHTML(item.item_id),'" data-name="',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'" data-price="',"undefined"==typeof item.current_price?"":baidu.template._encodeHTML(item.current_price),'">                <div class="mutiple-title" data-node="mutipletitle">                    <span class="dish-name">',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'</span>                    <span class="right-side">                        <span class="mutiple-box">                            多规格                        </span>                        <span class="dish-cost" data-node="dishCost">￥'),selected&&selected[item.item_id]&&selected[item.item_id].realPrice?_template_fun_array.push("","undefined"==typeof selected[item.item_id].realPrice?"":baidu.template._encodeHTML(selected[item.item_id].realPrice),""):_template_fun_array.push("","undefined"==typeof item.current_price?"":baidu.template._encodeHTML(item.current_price),""),_template_fun_array.push('</span>                        <span class="select-icon"></span>                    </span>                </div>                <div class="mutiple-content">                    <table class="size-table" data-node="sizeTable">                        ');for(var da in item.dish_attr)item.dish_attr[da].mainK=1;_template_fun_array.push("                        ");var attrs=_.extend(item.dish_features,item.dish_attr);for(var att in attrs){_template_fun_array.push('                        <tr data-key="',"undefined"==typeof att?"":baidu.template._encodeHTML(att),'" data-maink="'),_template_fun_array.push(attrs[att].mainK?"1":"0"),_template_fun_array.push('">                            <td class="attr-title" valign="top">',"undefined"==typeof att?"":baidu.template._encodeHTML(att),"：</td>                            <td>                                ");for(var j=0,attrlen=attrs[att].length;attrlen>j;j++)_template_fun_array.push('                                    <span class="s-item '),selected&&selected[item.item_id]&&-1!=_.indexOf(selected[item.item_id].features,attrs[att][j].id)&&_template_fun_array.push(" sec"),_template_fun_array.push('" data-price="',"undefined"==typeof attrs[att][j].price?"":baidu.template._encodeHTML(attrs[att][j].price),'"  data-id="',"undefined"==typeof attrs[att][j].id?"":baidu.template._encodeHTML(attrs[att][j].id),'"  data-name="',"undefined"==typeof attrs[att][j].name?"":baidu.template._encodeHTML(attrs[att][j].name),'">',"undefined"==typeof attrs[att][j].name?"":baidu.template._encodeHTML(attrs[att][j].name),"</span>                                ");_template_fun_array.push("                            </td>                        </tr>                        ")}_template_fun_array.push('                        <tr>                            <td colspan="2">                                <span class="select-box">                                    '),selected&&selected[item.item_id]&&selected[item.item_id].count?_template_fun_array.push('                                        <span class="minusicon" data-node="minusIcon"></span>                                        <span class="select_count">',"undefined"==typeof selected[item.item_id].count?"":baidu.template._encodeHTML(selected[item.item_id].count),'</span>                                        <span class="addicon" data-node="addIcon"></span>                                    '):_template_fun_array.push('                                        <span class="minusicon v-hide" data-node="minusIcon"></span>                                        <span class="select_count v-hide">0</span>                                        <span class="addicon disable" data-node="addIcon"></span>                                    '),_template_fun_array.push("                                </span>                            </td>                        </tr>                    </table>                </div>            </div>            ")}else _template_fun_array.push('            <div class="dish-item" data-id="',"undefined"==typeof item.item_id?"":baidu.template._encodeHTML(item.item_id),'" data-name="',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'" data-price="',"undefined"==typeof item.current_price?"":baidu.template._encodeHTML(item.current_price),'">                <span class="dish-name">',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'</span>                <span class="right-side">                    <span class="select-box">                        '),selected&&selected[item.item_id]&&selected[item.item_id].count?_template_fun_array.push('                            <span class="minusicon" data-node="minusIcon"></span>                            <span class="select_count">',"undefined"==typeof selected[item.item_id].count?"":baidu.template._encodeHTML(selected[item.item_id].count),'</span>                            <span class="addicon" data-node="addIcon"></span>                        '):_template_fun_array.push('                            <span class="minusicon v-hide" data-node="minusIcon"></span>                            <span class="select_count v-hide">0</span>                            <span class="addicon" data-node="addIcon"></span>                        '),_template_fun_array.push('                    </span>                    <span class="dish-cost">￥',"undefined"==typeof item.current_price?"":baidu.template._encodeHTML(item.current_price),"</span>                </span>            </div>            ");_template_fun_array.push("            "),i==divider&&_template_fun_array.push('                </div><div class="dish-c">            '),_template_fun_array.push("            "),i==len-1&&_template_fun_array.push("                </div>            "),_template_fun_array.push("        ")}_template_fun_array.push("    ")}_template_fun_array.push("</div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],setMealGrpsTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("");for(var i=0,len=data.length;len>i;i++){var item=data[i];_template_fun_array.push('    <div class="group-item '),curIndex==i&&_template_fun_array.push(" select"),_template_fun_array.push('" data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'" data-grps-id="',"undefined"==typeof item.dish_group_id?"":baidu.template._encodeHTML(item.dish_group_id),'">        <span class="top-tip"></span>        '),_template_fun_array.push(parseInt(item.min_num)>0?'            <p class="gtitle">必选</p>        ':'            <p class="gtitle-not">可选</p>        '),_template_fun_array.push('        <p class="gname">',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),"</p>    </div>    "),len-1>i&&_template_fun_array.push('        <div class="group-divider">            +        </div>    '),_template_fun_array.push("")}_template_fun_array.push('<span class="group-arrow" data-node="groupArrow"></span>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],setMealBotmTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<table width="100%">    <tr>        <td width="300">            套餐价：<span class="price" data-node="bottomprice" data-type="',"undefined"==typeof data.isFixedPrice?"":baidu.template._encodeHTML(data.isFixedPrice),'">￥'),1==parseInt(data.isFixedPrice)?_template_fun_array.push("","undefined"==typeof data.itemPrice?"":baidu.template._encodeHTML(data.itemPrice),""):_template_fun_array.push("0"),_template_fun_array.push("</span>        </td>        <td>            "),data.itemStock<50&&_template_fun_array.push("库存","undefined"==typeof data.itemStock?"":baidu.template._encodeHTML(data.itemStock),"份"),_template_fun_array.push("            "),data.itemStock<50&&data.minOrderNumber>1&&_template_fun_array.push(" | "),_template_fun_array.push("            "),data.minOrderNumber>1&&_template_fun_array.push("","undefined"==typeof data.minOrderNumber?"":baidu.template._encodeHTML(data.minOrderNumber),"份起订"),_template_fun_array.push('        </td>        <td>            <div class="select-outer disable" data-node="selectouter">                <div class="select-con">                    <div class="select-inner">                        <strong class="minusfrcart" data-node="minusfrcart"></strong>                        <strong class="select_count" data-node="selectCount">',"undefined"==typeof data.minOrderNumber?"":baidu.template._encodeHTML(data.minOrderNumber),'</strong>                        <strong class="addtocart" data-node="addtocart"></strong>                    </div>                </div>            </div>        </td>        <td width="170" align="center"><span class="submit-btn disable"  data-node="submitBtn">加入购物车</span></td>    </tr></table>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],dishListClass=".dishes-list",dishItemClass=".dish-item",mulItemClass="mutiple",grpItemClass=".group-item",seboxItemCls=".select-box",countItemCls=".select_count",EventCenter,GlobalTips=require("bigba:static/utils/GlobalTips.js"),pindan_id=$("[data-node=pinDanId]").html();$.extend(setMeal.prototype,{renderList:function(e){var t=this.opt.$el;if(e&&e.groups.length>0){var a=setMealTmpl();t.html(a),t.find("[data-node=setMeal-title]").html(setMealTitleTmpl({data:e.basics})),t.find("[data-node=setMeal-content-groups]").html(setMealGrpsTmpl({data:e.groups,curIndex:this.opt.curGrp})),t.find("[data-node=setMeal-content-dishes]").html(setMealDishTmpl({data:e.groups[this.opt.curGrp],selected:{}})),t.find("[data-node=setMeal-bottom]").html(setMealBotmTmpl({data:e.basics})),$(this).trigger("list.complete")}},getRealLeftNum:function(){},bindEvent:function(){var e=this,t=e.opt.$el;t.find("[data-node=setMeal-title]").on("click",function(){}),t.find("[data-node=setMeal-content-groups]").on("click",grpItemClass,function(a){var n=$(a.currentTarget);e.switchGrps(n,t.find("[data-node=setMeal-content-groups]"))}),t.find("[data-node=setMeal-content-dishes]").on("click","[data-node=mutipletitle]","."+mulItemClass,function(e){var t=$(e.currentTarget);t.parents(dishItemClass).toggleClass("selected")}),t.find("[data-node=setMeal-content-dishes]").on("click","[data-node=sizeTable] .s-item","."+mulItemClass,function(t){var a=$(t.currentTarget);a.hasClass("sec")||(a.parents("tr").find(".s-item").removeClass("sec"),a.addClass("sec"),e.selectAttr(a),EventCenter.trigger("selectAttr"))}),t.find("[data-node=setMeal-bottom]").on("click","[data-node]",function(t){var a=$(t.currentTarget);e.handleBottomeClick(a)}),t.find("[data-node=setMeal-content-dishes]").on("click","[data-node=addIcon]",function(t){var a=$(t.currentTarget),n=a.parents(dishListClass);n.hasClass("enough")?GlobalTips.tip("已到达可选菜品上限"):a.hasClass("disable")&&GlobalTips.tip("多规格菜品需要先选择规格"),e.addIconClick(a)}),t.find("[data-node=setMeal-content-dishes]").on("click","[data-node=minusIcon]",function(t){var a=$(t.currentTarget);e.minusIconClick(a)}),EventCenter.on("selectAttr",function(){e.refreshSelectMsg(),e.refreshBottom()}),EventCenter.on("addDish",function(){e.onAddDish()}),EventCenter.on("minusDish",function(){e.onMinusDish()}),EventCenter.on("switchGrps",function(){e.refreshSelectMsg()})},switchGrps:function(e,t){var a=this,n=a.opt.$el,s=a.opt.data;t.find(grpItemClass).removeClass("select"),e.addClass("select"),a.opt.curGrp=e.data("index");var i=s.groups[a.opt.curGrp];n.find("[data-node=setMeal-content-dishes]").html(setMealDishTmpl({data:i,selected:a.opt.selectData[i.dish_group_id]})),a.setArrowPos(e),EventCenter.trigger("selectAttr")},setArrowPos:function(e){var t=this,a=t.opt.$el,n=e.position(),s=a.find("[data-node=groupArrow]");s.css({left:n.left+e.width()/2-s.width()/2+"px"})},selectAttr:function(e){var t=this,a=t.opt.data.groups[t.opt.curGrp],n=a.dish_group_id,s=t.opt.selectData[n]||{total:{count:0}},i=e.parents("[data-node=sizeTable]").find("[data-key]"),d=e.parents("[data-node=sizeTable]").find(".sec"),r=e.parents(dishItemClass).find("[data-node=dishCost]");if(d.length<i.length)return e.parents("[data-node=sizeTable]").find("[data-node=addIcon]").addClass("disable"),!1;e.parents("[data-node=sizeTable]").find("[data-node=addIcon]").removeClass("disable");var l=t.getItemInfo(e),o=l.id,p=[],u=[];s[o]=t.getItemSelectData(l,s[o]);for(var _=0,m=i.length;m>_;_++)"1"==$(i[_]).data("maink")&&(s[o].realId=$(i[_]).find(".sec").data("id")+"",s[o].realPrice=$(i[_]).find(".sec").data("price"),r.text("￥"+$(i[_]).find(".sec").data("price"))),p.push($(i[_]).find(".sec").data("id")+""),u.push($(i[_]).find(".sec").data("name"));return s[o].features=p,s[o].featueNames=u,"addIcon"==e.data("node")?s[o].count++:"minusIcon"==e.data("node")&&s[o].count--,t.opt.selectData[n]=s,!0},onAddDish:function(){var e=this;e.refreshTopTip(),e.refreshSelectMsg(),e.refreshBottom()},onMinusDish:function(){var e=this;e.refreshTopTip(),e.refreshSelectMsg(),e.refreshBottom()},refreshSelectMsg:function(){var e=this,t=e.opt.selectData,a=e.opt.data.groups,n=a[e.opt.curGrp],s=t[n.dish_group_id];s&&s.total&&parseInt(s.total.count)>=parseInt(n.max_num)?e.opt.$el.find(dishListClass).addClass("enough"):e.opt.$el.find(dishListClass).removeClass("enough");var i="&nbsp;";for(var d in s)"total"!=d&&s[d].count&&(i+=s[d].dname,s[d].featueNames&&s[d].featueNames.length&&(i+="_"+s[d].featueNames.join("_")),i+="*"+s[d].count+"、");e.opt.$el.find("[ data-node=selectmsg]").html(i)},refreshTopTip:function(){for(var e=this,t=e.opt.selectData,a=e.opt.data,n=0,s=a.groups.length;s>n;n++){var i=$("[data-grps-id="+a.groups[n].dish_group_id+"]").find(".top-tip");if(t[a.groups[n].dish_group_id]){var d=t[a.groups[n].dish_group_id].total.count;d&&a.groups[n].min_num<=d&&d<=a.groups[n].max_num?i.addClass("ready").text(t[a.groups[n].dish_group_id].total.count).show():d&&t[a.groups[n].dish_group_id].total.count>=0?i.removeClass("ready").text(t[a.groups[n].dish_group_id].total.count).show():i.hide()}}},refreshBottom:function(){for(var e=this,t=e.opt.$el,a=t.find("[data-node=bottomprice]"),n=t.find("[data-node=selectouter]"),s=t.find("[data-node=submitBtn]"),i=e.opt.selectData,d=e.opt.data.groups,r=[],l=0,o=0,p=d.length;p>o;o++)parseInt(d[o].min_num)&&r.push(i[d[o].dish_group_id]&&i[d[o].dish_group_id].total.count>=d[o].min_num?1:0),1===Math.min.apply(null,r)?(n.removeClass("disable"),s.removeClass("disable")):(n.addClass("disable"),s.addClass("disable"));if(1!==parseInt(a.data("type"))){for(var u in i){var _=i[u];if(_.total.count)for(var m in _)"total"!==m&&_[m].count&&(l+=parseFloat(_[m].realPrice||_[m].price)*parseInt(_[m].count))}a.html("￥"+l.toFixed(2)),e.opt.selectBasic.price=l}else e.opt.selectBasic.price=e.opt.data.basics.itemPrice},refreshSelectArea:function(e,t,a){var n=e.parent();t[a.id].count>0?(n.find("[data-node=minusIcon]").removeClass("v-hide"),n.find(countItemCls).text(t[a.id].count).removeClass("v-hide")):(e.parent().find(countItemCls).text(t[a.id].count).addClass("v-hide"),n.find("[data-node=minusIcon]").addClass("v-hide"))},addIconClick:function(e){var t=this,a=t.opt.data.groups[t.opt.curGrp],n=parseInt(a.max_num),s=a.dish_group_id,i=t.opt.selectData[s]||{total:{count:0}},d=t.getItemInfo(e);if(i[d.id]=t.getItemSelectData(d,i[d.id]),e.parents(dishItemClass).hasClass(mulItemClass)&&i.total.count<n)t.selectAttr(e)&&i.total.count++;else{if(!(i.total.count<n))return;i.total.count++,i[d.id].count++}t.refreshSelectArea(e,i,d),t.opt.selectData[s]=i,EventCenter.trigger("addDish")},getItemSelectData:function(e,t){return t=t||{count:0,dname:e.name,price:e.price}},getItemInfo:function(e){var t=e.parents(dishItemClass),a="";a=t.data("id")+"";var n=t.data("name"),s=t.data("price");return{id:a,name:n,price:s,count:0}},minusIconClick:function(e){var t=this,a=t.opt.data.groups[t.opt.curGrp],n=(parseInt(a.min_num),a.dish_group_id),s=t.opt.selectData[n]||{total:{count:0}},i=t.getItemInfo(e);if(s[i.id]=t.getItemSelectData(i,s[i.id]),e.parents(dishItemClass).hasClass(mulItemClass)&&s[i.id].count>=1)t.selectAttr(e)&&s.total.count--;else{if(s[i.id].count<=0)return void(s[i.id].count=0);s.total.count--,s[i.id].count--}t.refreshSelectArea(e,s,i),t.opt.selectData[n]=s,EventCenter.trigger("minusDish")},handleBottomeClick:function(e){var t=this,a=t.opt.data.basics,n=e.data("node"),s=t.opt.$el.find("[data-node=selectCount]"),i=parseInt(s.html())||0;"addtocart"===n?i&&i<a.itemStock?s.html(++i):i||s.html(a.minOrderNumber):"minusfrcart"===n&&s.html(i<=a.minOrderNumber?0:--i),t.opt.data.basics.itemCount=i,"submitBtn"===n&&!e.hasClass("disable")&&t.submitSetMeal()},adjustDataStructure:function(e){e.orignItemId=e.itemId,e.grpsInfo.basic.id=e.itemId,e.itemPrice=e.grpsInfo.basic.price,e.type="append";var t=[],a=[],n=[];for(var s in e.grpsInfo.data){var i=e.grpsInfo.data[s];t.push(s+"_p"+i.total.count);for(var d in i)"total"!==d&&(a.push(d+"_p"+i[d].count),i[d].features&&i[d].features.length&&n.concat(i[d].features))}e.itemId=t.sort().join("__")+"___"+a.sort().join("__")+"___"+n.sort().join("__")},saveGrpsData:function(e){e.grpsInfo&&localStore.set("p"+pindan_id+e.itemId+"p",e.grpsInfo)},submitSetMeal:function(){var e=this,t={};t=$.extend(t,e.opt.data.basics),t.grpsInfo={basic:e.opt.selectBasic,data:e.opt.selectData},e.adjustDataStructure(t),e.saveGrpsData(t),e.opt.onSubmitBtn(t)}}),module.exports=setMeal});
;define("bigba:widget/common/ui/muticities/muti.js",function(require,exports,module){function Muti(){this.$el=$("#muti-aois"),this.aois={}}var CookieDataCenter=require("bigba:static/utils/CookieDataCenter.js"),citiesTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="cities" data-node="cities">    '),maybe_city.name&&_template_fun_array.push('    <div class="guess-city">        <dl>            <dt>猜你在</dt>            <dd>                <a data-node="nav_city" href="javascript:void(0);" data-cityid="',"undefined"==typeof maybe_city.code?"":baidu.template._encodeHTML(maybe_city.code),'" data-hasAoi="',"undefined"==typeof maybe_city.isHaveAoi?"":baidu.template._encodeHTML(maybe_city.isHaveAoi),'">',"undefined"==typeof maybe_city.name?"":baidu.template._encodeHTML(maybe_city.name),"</a>            </dd>        </dl>    </div>    "),_template_fun_array.push("    ");for(var i in city_list){_template_fun_array.push('    <dl class="cities-group">        <dt>            ',"undefined"==typeof i?"":baidu.template._encodeHTML(i),"        </dt>        <dd>            <ul>            ");for(var j in city_list[i])_template_fun_array.push('                <li>                    <a data-node="nav_city" href="javascript:void(0);" data-cityid="',"undefined"==typeof city_list[i][j].code?"":baidu.template._encodeHTML(city_list[i][j].code),'" data-hasAoi="',"undefined"==typeof city_list[i][j].isHaveAoi?"":baidu.template._encodeHTML(city_list[i][j].isHaveAoi),'">                        ',"undefined"==typeof city_list[i][j].name?"":baidu.template._encodeHTML(city_list[i][j].name),"                    </a>                </li>            ");_template_fun_array.push("            </ul>        </dd>    </dl>    ")}_template_fun_array.push("</div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],aoisTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="aois" data-node="aois">    ');for(var i in aois){_template_fun_array.push('    <dl class="aoi-group">        <dt>',"undefined"==typeof i?"":baidu.template._encodeHTML(i),"</dt>        <dd>            <ul>            ");for(var j in aois[i])_template_fun_array.push('                <li>                    <a title="',"undefined"==typeof aois[i][j].name?"":baidu.template._encodeHTML(aois[i][j].name),'" data-node="nav_aoi" href="/waimai?qt=shoplist&lat=',"undefined"==typeof aois[i][j].lat?"":baidu.template._encodeHTML(aois[i][j].lat),"&lng=","undefined"==typeof aois[i][j].lng?"":baidu.template._encodeHTML(aois[i][j].lng),"&address=","undefined"==typeof aois[i][j].name?"":baidu.template._encodeHTML(aois[i][j].name),"&city_id=","undefined"==typeof city_id?"":baidu.template._encodeHTML(city_id),'">                        ',"undefined"==typeof aois[i][j].name?"":baidu.template._encodeHTML(aois[i][j].name),"                    </a>                </li>            ");_template_fun_array.push("            </ul>        </dd>    </dl>    ")}_template_fun_array.push("</div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];$.extend(Muti.prototype,{init:function(){var e=this;e.initEvents()},initCities:function(){var e=this;e.showCities()},initEvents:function(){var e=this;e.$el.on("click",function(e){e.stopPropagation()}),e.$el.delegate('[data-node="nav_city"]',"click",function(e){var t=$(e.currentTarget),i=t.data("cityid"),a=$.trim(t.html()),n=t.data("hasaoi"),o={name:a,code:i,hasaoi:n};CookieDataCenter.setCity(o),listener.trigger("muticities","selected",o),e.stopPropagation()}),e.$el.delegate('[data-node="nav_aoi"]',"click",function(e){var t=$(e.currentTarget),i=$.trim(t.html());listener.trigger("mutiaois","selected",{aoiname:i}),e.stopPropagation()}),listener.on("city","select",function(){e.hide(),e.showCities(),listener.trigger("muticities","show")}),listener.on("city","hide",function(){e.hide()}),listener.on("city","hasaoi",function(t,i){e.showAoi(i)})},showCities:function(){var e=this;return e.cities?void e._htmlCities(e.cities):void $.ajax({url:"/waimai?qt=getcitylist&format=1",data:{t:(new Date).getTime()},dataType:"json",beforeSend:function(){e.$el.empty().addClass("loading").show()},success:function(t){if(t.result){var i=t.result;e.cities=i,setTimeout(function(){e._htmlCities(i)},0)}},error:function(){}})},_htmlCities:function(e){var t=this,i=citiesTpl(e);t.$el.removeClass("loading").html(i).show()},_htmlAois:function(e){var t=this,i=aoisTpl(e);t.$el.html(i).removeClass("loading").show(),listener.trigger("mask","show")},hide:function(){var e=this;e.$el.hide().empty()},showAoi:function(e){var t=this;return t.aois[e.code]?void t._htmlAois(t.aois[e.code]):void $.ajax({url:"/waimai?qt=getcitylist",data:{city_id:e.code,t:(new Date).getTime()},dataType:"json",beforeSend:function(){},success:function(i){if(i.result){var a=i.result;t.aois[e.code]=a,setTimeout(function(){t._htmlAois(a)},0)}},error:function(){}})}}),module.exports=new Muti});
;define("bigba:widget/common/ui/noresult/noresult.js",function(require,exports,module){var tmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="no-result">    <div class="no-result-image" style="padding:80px 0 20px;">        <img src="" alt="无结果" style="display:block;margin:auto;">    </div>    <div class="no-result-notice" style="text-align:center;padding-bottom: 50px;"></div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],img_src="/static/images/noresult.png";module.exports={show:function(t,e,a){a&&(img_src=a),$container=$(e),$container.html(tmpl()).find(".no-result-notice").html(t),$container.find("img").attr("src",img_src),this.$container=$container},hide:function(){this.$container.find(".no-result").remove()}}});
;define("bigba:widget/common/ui/popCarousel/popCarousel.js",function(require,exports,module){function popCarousel(i){this.opt=$.extend({},_opt,i),currentIndex=i.index||0,this.initBigPic(),this.bindEvent()}var Dialog=require("jsmod/ui/dialog"),Carousel=require("jsmod/ui/carousel"),detailTeml=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="pop-con">    <div class="closeBtn"></div><div class="side"><div class="icon-con" data-node="prev"><span class="icon-prev"></span></div></div>    <div class="big-pic" data-node="popContent">        </div>    <div class="side">    <div class="icon-con" data-node="next">    <span class="icon-next"></span>    </div>    </div>    <div class="clearfix"></div>    <div class="pic-list">    <div class="icons-con"  data-node="prevp">    <span class="icon-prev"></span>    </div>    <div class="list-con" data-node="listContent">    </div>    <div class="icons-con" data-node="nextp">    <span class="icon-next"></span>    </div>    </div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],cacheDialog,bigPic,listPic,currentIndex=0,listCount=3,ADD_AJAX="/waimai?qt=addressmanage&type=add&display=json",UPDATE_AJAX="/waimai?qt=addressmanage&type=update&display=json",REMOVE_AJAX="/waimai?qt=addressmanage&type=del&display=json",SETDEFAULT_AJAX="/waimai?qt=addressmanage&type=set&display=json",_opt={data:[],$bigPicEl:null,$addBtn:null,$detailEl:null,listComplete:null,itemRemove:null,dialogShow:null,saveSuccess:null,reForm:!0};$.extend(popCarousel.prototype,{bindEvent:function(){var i=cacheDialog.getElement();i.on("click","[data-node=next]",function(){bigPic.next()}),i.on("click","[data-node=prev]",function(){bigPic.pre()}),i.on("click","[data-node=nextp]",function(){listPic.cur(currentIndex+listCount,void 0,!0)}),i.on("click","[data-node=prevp]",function(){listPic.cur(currentIndex-listCount,void 0,!0)})},initBigPic:function(){var i=this.opt.data,e=[],t=[];cacheDialog=new Dialog({html:detailTeml()});for(var a=cacheDialog.getElement(),n=0,o=i.length;o>n;n++)e.push('<div class="image-content"><img onerror="util.errorImg(this);" data-src="'+i[n].rsrc+'"></div>'),t.push('<div class="image-content"><img onerror="util.errorImg(this);" src="'+i[n].src+'" width="167" height="100"></div>');bigPic=new Carousel(a.find('[data-node="popContent"]'),{count:1,htmls:e}),cacheDialog.show(),$(bigPic).on("active",function(i){currentIndex=i.index;var e=this.getItem(i.index).find("img");e.prop("src",e.data("src")),listPic.cur(currentIndex)}),listPic=new Carousel(a.find('[data-node="listContent"]'),{count:3,htmls:t}),$('[data-node="listContent"]').on("click",".mod-carousel-item",function(){var i=$(this).data("index");bigPic.cur(i),listPic.cur(i)}),bigPic.cur(currentIndex)},successTip:function(i){GlobalTips.tip(i)},errorTip:function(i){GlobalTips.tip(i)},updateOpt:function(i){this.opt=$.extend({},this.opt,i)}}),module.exports=popCarousel});
;define("bigba:widget/common/ui/setmeal/setmeal.js",function(require,exports,module){function setMeal(e){var t={data:[],$el:null,selectData:{},curGrp:0,selectBasic:{}};EventCenter=$({}),this.opt=$.extend(t,e),this.renderList(this.opt.data),this.bindEvent()}var cookie=require("bigba:static/utils/Cookie.js"),localStore=require("bigba:static/utils/store.js"),setMealTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="setMeal">    <div class="dish-title" data-node="setMeal-title">    </div>    <div class="content" data-node="setMeal-content">        <div class="groups" data-node="setMeal-content-groups">        </div>        <div class="dishes" data-node="setMeal-content-dishes">        </div>    </div>    <div class="bottom" data-node="setMeal-bottom">    </div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],setMealTitleTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<span class="closeBtn"></span><h2>',"undefined"==typeof data.itemName?"":baidu.template._encodeHTML(data.itemName),"</h2>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],setMealDishTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';if(eval(_template_varName),_template_fun_array.push('<div class="list-title">    <div class="big-tip">        '),_template_fun_array.push(parseInt(data.min_num)>=1?"            必选        ":"            可选        "),_template_fun_array.push("        "),parseInt(data.min_num)==parseInt(data.max_num)?(_template_fun_array.push("            "),1==data.min_num?_template_fun_array.push("            (单选)            "):_template_fun_array.push("            (多选 ","undefined"==typeof data.max_num?"":baidu.template._encodeHTML(data.max_num),"份)            "),_template_fun_array.push("        ")):_template_fun_array.push("            (多选 ","undefined"==typeof data.min_num?"":baidu.template._encodeHTML(data.min_num),"-","undefined"==typeof data.max_num?"":baidu.template._encodeHTML(data.max_num),"份)        "),_template_fun_array.push('    </div>    <span class="select-msg" data-node="selectmsg">&nbsp;            </span></div><div class="dishes-list '),selected&&selected.total&&selected.total.count>=data.max_num&&_template_fun_array.push(" enough"),_template_fun_array.push('">    '),data.ids.length>0){var len=data.ids.length,divider=Math.ceil(len/2)-1;_template_fun_array.push("        ");for(var i=0,len=data.ids.length;len>i;i++){var item=data.ids[i];if(_template_fun_array.push("            "),0==i&&_template_fun_array.push('                <div class="dish-c">            '),_template_fun_array.push("            "),parseInt(item.have_attr)||parseInt(item.have_feature)){_template_fun_array.push('            <div class="dish-item mutiple" data-id="',"undefined"==typeof item.item_id?"":baidu.template._encodeHTML(item.item_id),'" data-name="',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'" data-price="',"undefined"==typeof item.current_price?"":baidu.template._encodeHTML(item.current_price),'">                <div class="mutiple-title" data-node="mutipletitle">                    <span class="dish-name">',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'</span>                    <span class="right-side">                        <span class="mutiple-box">                            多规格                        </span>                        <span class="dish-cost" data-node="dishCost">￥'),selected&&selected[item.item_id]&&selected[item.item_id].realPrice?_template_fun_array.push("","undefined"==typeof selected[item.item_id].realPrice?"":baidu.template._encodeHTML(selected[item.item_id].realPrice),""):_template_fun_array.push("","undefined"==typeof item.current_price?"":baidu.template._encodeHTML(item.current_price),""),_template_fun_array.push('</span>                        <span class="select-icon"></span>                    </span>                </div>                <div class="mutiple-content">                    <table class="size-table" data-node="sizeTable">                        ');for(var da in item.dish_attr)item.dish_attr[da].mainK=1;_template_fun_array.push("                        ");var attrs=_.extend(item.dish_features,item.dish_attr);for(var att in attrs){_template_fun_array.push('                        <tr data-key="',"undefined"==typeof att?"":baidu.template._encodeHTML(att),'" data-maink="'),_template_fun_array.push(attrs[att].mainK?"1":"0"),_template_fun_array.push('">                            <td class="attr-title" valign="top">',"undefined"==typeof att?"":baidu.template._encodeHTML(att),"：</td>                            <td>                                ");for(var j=0,attrlen=attrs[att].length;attrlen>j;j++)_template_fun_array.push('                                    <span class="s-item '),selected&&selected[item.item_id]&&-1!=_.indexOf(selected[item.item_id].features,attrs[att][j].id)&&_template_fun_array.push(" sec"),_template_fun_array.push('" data-price="',"undefined"==typeof attrs[att][j].price?"":baidu.template._encodeHTML(attrs[att][j].price),'"  data-id="',"undefined"==typeof attrs[att][j].id?"":baidu.template._encodeHTML(attrs[att][j].id),'"  data-name="',"undefined"==typeof attrs[att][j].name?"":baidu.template._encodeHTML(attrs[att][j].name),'">',"undefined"==typeof attrs[att][j].name?"":baidu.template._encodeHTML(attrs[att][j].name),"</span>                                ");_template_fun_array.push("                            </td>                        </tr>                        ")}_template_fun_array.push('                        <tr>                            <td colspan="2">                                <span class="select-box">                                    '),selected&&selected[item.item_id]&&selected[item.item_id].count?_template_fun_array.push('                                        <span class="minusicon" data-node="minusIcon"></span>                                        <span class="select_count">',"undefined"==typeof selected[item.item_id].count?"":baidu.template._encodeHTML(selected[item.item_id].count),'</span>                                        <span class="addicon" data-node="addIcon"></span>                                    '):_template_fun_array.push('                                        <span class="minusicon v-hide" data-node="minusIcon"></span>                                        <span class="select_count v-hide">0</span>                                        <span class="addicon disable" data-node="addIcon"></span>                                    '),_template_fun_array.push("                                </span>                            </td>                        </tr>                    </table>                </div>            </div>            ")}else _template_fun_array.push('            <div class="dish-item" data-id="',"undefined"==typeof item.item_id?"":baidu.template._encodeHTML(item.item_id),'" data-name="',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'" data-price="',"undefined"==typeof item.current_price?"":baidu.template._encodeHTML(item.current_price),'">                <span class="dish-name">',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),'</span>                <span class="right-side">                    <span class="select-box">                        '),selected&&selected[item.item_id]&&selected[item.item_id].count?_template_fun_array.push('                            <span class="minusicon" data-node="minusIcon"></span>                            <span class="select_count">',"undefined"==typeof selected[item.item_id].count?"":baidu.template._encodeHTML(selected[item.item_id].count),'</span>                            <span class="addicon" data-node="addIcon"></span>                        '):_template_fun_array.push('                            <span class="minusicon v-hide" data-node="minusIcon"></span>                            <span class="select_count v-hide">0</span>                            <span class="addicon" data-node="addIcon"></span>                        '),_template_fun_array.push('                    </span>                    <span class="dish-cost">￥',"undefined"==typeof item.current_price?"":baidu.template._encodeHTML(item.current_price),"</span>                </span>            </div>            ");_template_fun_array.push("            "),i==divider&&_template_fun_array.push('                </div><div class="dish-c">            '),_template_fun_array.push("            "),i==len-1&&_template_fun_array.push("                </div>            "),_template_fun_array.push("        ")}_template_fun_array.push("    ")}_template_fun_array.push("</div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],setMealGrpsTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("");for(var i=0,len=data.length;len>i;i++){var item=data[i];_template_fun_array.push('    <div class="group-item '),curIndex==i&&_template_fun_array.push(" select"),_template_fun_array.push('" data-index="',"undefined"==typeof i?"":baidu.template._encodeHTML(i),'" data-grps-id="',"undefined"==typeof item.dish_group_id?"":baidu.template._encodeHTML(item.dish_group_id),'">        <span class="top-tip"></span>        '),_template_fun_array.push(parseInt(item.min_num)>0?'            <p class="gtitle">必选</p>        ':'            <p class="gtitle-not">可选</p>        '),_template_fun_array.push('        <p class="gname">',"undefined"==typeof item.name?"":baidu.template._encodeHTML(item.name),"</p>    </div>    "),len-1>i&&_template_fun_array.push('        <div class="group-divider">            +        </div>    '),_template_fun_array.push("")}_template_fun_array.push('<span class="group-arrow" data-node="groupArrow"></span>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],setMealBotmTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<table width="100%">    <tr>        <td width="300">            套餐价：<span class="price" data-node="bottomprice" data-type="',"undefined"==typeof data.isFixedPrice?"":baidu.template._encodeHTML(data.isFixedPrice),'">￥'),1==parseInt(data.isFixedPrice)?_template_fun_array.push("","undefined"==typeof data.itemPrice?"":baidu.template._encodeHTML(data.itemPrice),""):_template_fun_array.push("0"),_template_fun_array.push("</span>        </td>        <td>            "),data.itemStock<50&&_template_fun_array.push("库存","undefined"==typeof data.itemStock?"":baidu.template._encodeHTML(data.itemStock),"份"),_template_fun_array.push("            "),data.itemStock<50&&data.minOrderNumber>1&&_template_fun_array.push(" | "),_template_fun_array.push("            "),data.minOrderNumber>1&&_template_fun_array.push("","undefined"==typeof data.minOrderNumber?"":baidu.template._encodeHTML(data.minOrderNumber),"份起订"),_template_fun_array.push('        </td>        <td>            <div class="select-outer disable" data-node="selectouter">                <div class="select-con">                    <div class="select-inner">                        <strong class="minusfrcart" data-node="minusfrcart"></strong>                        <strong class="select_count" data-node="selectCount">',"undefined"==typeof data.minOrderNumber?"":baidu.template._encodeHTML(data.minOrderNumber),'</strong>                        <strong class="addtocart" data-node="addtocart"></strong>                    </div>                </div>            </div>        </td>        <td width="170" align="center"><span class="submit-btn disable"  data-node="submitBtn">加入购物车</span></td>    </tr></table>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],dishListClass=".dishes-list",dishItemClass=".dish-item",mulItemClass="mutiple",grpItemClass=".group-item",seboxItemCls=".select-box",countItemCls=".select_count",EventCenter,GlobalTips=require("bigba:static/utils/GlobalTips.js");$.extend(setMeal.prototype,{renderList:function(e){var t=this.opt.$el;if(e&&e.groups.length>0){var a=setMealTmpl();t.html(a),t.find("[data-node=setMeal-title]").html(setMealTitleTmpl({data:e.basics})),t.find("[data-node=setMeal-content-groups]").html(setMealGrpsTmpl({data:e.groups,curIndex:this.opt.curGrp})),t.find("[data-node=setMeal-content-dishes]").html(setMealDishTmpl({data:e.groups[this.opt.curGrp],selected:{}})),t.find("[data-node=setMeal-bottom]").html(setMealBotmTmpl({data:e.basics})),$(this).trigger("list.complete")}},getRealLeftNum:function(){},bindEvent:function(){var e=this,t=e.opt.$el;t.find("[data-node=setMeal-title]").on("click",function(){}),t.find("[data-node=setMeal-content-groups]").on("click",grpItemClass,function(a){var n=$(a.currentTarget);e.switchGrps(n,t.find("[data-node=setMeal-content-groups]"))}),t.find("[data-node=setMeal-content-dishes]").on("click","[data-node=mutipletitle]","."+mulItemClass,function(e){var t=$(e.currentTarget);t.parents(dishItemClass).toggleClass("selected")}),t.find("[data-node=setMeal-content-dishes]").on("click","[data-node=sizeTable] .s-item","."+mulItemClass,function(t){var a=$(t.currentTarget);a.hasClass("sec")||(a.parents("tr").find(".s-item").removeClass("sec"),a.addClass("sec"),e.selectAttr(a),EventCenter.trigger("selectAttr"))}),t.find("[data-node=setMeal-bottom]").on("click","[data-node]",function(t){var a=$(t.currentTarget);e.handleBottomeClick(a)}),t.find("[data-node=setMeal-content-dishes]").on("click","[data-node=addIcon]",function(t){var a=$(t.currentTarget),n=a.parents(dishListClass);n.hasClass("enough")?GlobalTips.tip("已到达可选菜品上限"):a.hasClass("disable")&&GlobalTips.tip("多规格菜品需要先选择规格"),e.addIconClick(a)}),t.find("[data-node=setMeal-content-dishes]").on("click","[data-node=minusIcon]",function(t){var a=$(t.currentTarget);e.minusIconClick(a)}),EventCenter.on("selectAttr",function(){e.refreshSelectMsg(),e.refreshBottom()}),EventCenter.on("addDish",function(){e.onAddDish()}),EventCenter.on("minusDish",function(){e.onMinusDish()}),EventCenter.on("switchGrps",function(){e.refreshSelectMsg()})},switchGrps:function(e,t){var a=this,n=a.opt.$el,s=a.opt.data;t.find(grpItemClass).removeClass("select"),e.addClass("select"),a.opt.curGrp=e.data("index");var i=s.groups[a.opt.curGrp];n.find("[data-node=setMeal-content-dishes]").html(setMealDishTmpl({data:i,selected:a.opt.selectData[i.dish_group_id]})),a.setArrowPos(e),EventCenter.trigger("selectAttr")},setArrowPos:function(e){var t=this,a=t.opt.$el,n=e.position(),s=a.find("[data-node=groupArrow]");s.css({left:n.left+e.width()/2-s.width()/2+"px"})},selectAttr:function(e){var t=this,a=t.opt.data.groups[t.opt.curGrp],n=a.dish_group_id,s=t.opt.selectData[n]||{total:{count:0}},i=e.parents("[data-node=sizeTable]").find("[data-key]"),d=e.parents("[data-node=sizeTable]").find(".sec"),r=e.parents(dishItemClass).find("[data-node=dishCost]");if(d.length<i.length)return e.parents("[data-node=sizeTable]").find("[data-node=addIcon]").addClass("disable"),!1;e.parents("[data-node=sizeTable]").find("[data-node=addIcon]").removeClass("disable");var l=t.getItemInfo(e),o=l.id,p=[],u=[];s[o]=t.getItemSelectData(l,s[o]);for(var _=0,m=i.length;m>_;_++)"1"==$(i[_]).data("maink")&&(s[o].realId=$(i[_]).find(".sec").data("id")+"",s[o].realPrice=$(i[_]).find(".sec").data("price"),r.text("￥"+$(i[_]).find(".sec").data("price"))),p.push($(i[_]).find(".sec").data("id")+""),u.push($(i[_]).find(".sec").data("name"));return s[o].features=p,s[o].featueNames=u,"addIcon"==e.data("node")?s[o].count++:"minusIcon"==e.data("node")&&s[o].count--,t.opt.selectData[n]=s,!0},onAddDish:function(){var e=this;e.refreshTopTip(),e.refreshSelectMsg(),e.refreshBottom()},onMinusDish:function(){var e=this;e.refreshTopTip(),e.refreshSelectMsg(),e.refreshBottom()},refreshSelectMsg:function(){var e=this,t=e.opt.selectData,a=e.opt.data.groups,n=a[e.opt.curGrp],s=t[n.dish_group_id];s&&s.total&&parseInt(s.total.count)>=parseInt(n.max_num)?e.opt.$el.find(dishListClass).addClass("enough"):e.opt.$el.find(dishListClass).removeClass("enough");var i="&nbsp;";for(var d in s)"total"!=d&&s[d].count&&(i+=s[d].dname,s[d].featueNames&&s[d].featueNames.length&&(i+="_"+s[d].featueNames.join("_")),i+="*"+s[d].count+"、");e.opt.$el.find("[ data-node=selectmsg]").html(i)},refreshTopTip:function(){for(var e=this,t=e.opt.selectData,a=e.opt.data,n=0,s=a.groups.length;s>n;n++){var i=$("[data-grps-id="+a.groups[n].dish_group_id+"]").find(".top-tip");if(t[a.groups[n].dish_group_id]){var d=t[a.groups[n].dish_group_id].total.count;d&&a.groups[n].min_num<=d&&d<=a.groups[n].max_num?i.addClass("ready").text(t[a.groups[n].dish_group_id].total.count).show():d&&t[a.groups[n].dish_group_id].total.count>=0?i.removeClass("ready").text(t[a.groups[n].dish_group_id].total.count).show():i.hide()}}},refreshBottom:function(){for(var e=this,t=e.opt.$el,a=t.find("[data-node=bottomprice]"),n=t.find("[data-node=selectouter]"),s=t.find("[data-node=submitBtn]"),i=e.opt.selectData,d=e.opt.data.groups,r=[],l=0,o=0,p=d.length;p>o;o++)parseInt(d[o].min_num)&&r.push(i[d[o].dish_group_id]&&i[d[o].dish_group_id].total.count>=d[o].min_num?1:0),1===Math.min.apply(null,r)?(n.removeClass("disable"),s.removeClass("disable")):(n.addClass("disable"),s.addClass("disable"));if(1!==parseInt(a.data("type"))){for(var u in i){var _=i[u];if(_.total.count)for(var m in _)"total"!==m&&_[m].count&&(l+=parseFloat(_[m].realPrice||_[m].price)*parseInt(_[m].count))}a.html("￥"+l.toFixed(2)),e.opt.selectBasic.price=l}else e.opt.selectBasic.price=e.opt.data.basics.itemPrice},refreshSelectArea:function(e,t,a){var n=e.parent();t[a.id].count>0?(n.find("[data-node=minusIcon]").removeClass("v-hide"),n.find(countItemCls).text(t[a.id].count).removeClass("v-hide")):(e.parent().find(countItemCls).text(t[a.id].count).addClass("v-hide"),n.find("[data-node=minusIcon]").addClass("v-hide"))},addIconClick:function(e){var t=this,a=t.opt.data.groups[t.opt.curGrp],n=parseInt(a.max_num),s=a.dish_group_id,i=t.opt.selectData[s]||{total:{count:0}},d=t.getItemInfo(e);if(i[d.id]=t.getItemSelectData(d,i[d.id]),e.parents(dishItemClass).hasClass(mulItemClass)&&i.total.count<n)t.selectAttr(e)&&i.total.count++;else{if(!(i.total.count<n))return;i.total.count++,i[d.id].count++}t.refreshSelectArea(e,i,d),t.opt.selectData[s]=i,EventCenter.trigger("addDish")},getItemSelectData:function(e,t){return t=t||{count:0,dname:e.name,price:e.price}},getItemInfo:function(e){var t=e.parents(dishItemClass),a="";a=t.data("id")+"";var n=t.data("name"),s=t.data("price");return{id:a,name:n,price:s,count:0}},minusIconClick:function(e){var t=this,a=t.opt.data.groups[t.opt.curGrp],n=(parseInt(a.min_num),a.dish_group_id),s=t.opt.selectData[n]||{total:{count:0}},i=t.getItemInfo(e);if(s[i.id]=t.getItemSelectData(i,s[i.id]),e.parents(dishItemClass).hasClass(mulItemClass)&&s[i.id].count>=1)t.selectAttr(e)&&s.total.count--;else{if(s[i.id].count<=0)return void(s[i.id].count=0);s.total.count--,s[i.id].count--}t.refreshSelectArea(e,s,i),t.opt.selectData[n]=s,EventCenter.trigger("minusDish")},handleBottomeClick:function(e){var t=this,a=t.opt.data.basics,n=e.data("node"),s=t.opt.$el.find("[data-node=selectCount]"),i=parseInt(s.html())||0;"addtocart"===n?i&&i<a.itemStock?s.html(++i):i||s.html(a.minOrderNumber):"minusfrcart"===n&&s.html(i<=a.minOrderNumber?0:--i),t.opt.data.basics.itemCount=i,"submitBtn"===n&&!e.hasClass("disable")&&t.submitSetMeal()},adjustDataStructure:function(e){e.orignItemId=e.itemId,e.grpsInfo.basic.id=e.itemId,e.itemPrice=e.grpsInfo.basic.price,e.type="append";var t=[],a=[],n=[];for(var s in e.grpsInfo.data){var i=e.grpsInfo.data[s];t.push(s+"_p"+i.total.count);for(var d in i)"total"!==d&&(a.push(d+"_p"+i[d].count),i[d].features&&i[d].features.length&&n.concat(i[d].features))}e.itemId=t.sort().join("__")+"___"+a.sort().join("__")+"___"+n.sort().join("__")},saveGrpsData:function(e){e.grpsInfo&&localStore.set("s"+e.itemId+"s",e.grpsInfo)},submitSetMeal:function(){var e=this,t={};t=$.extend(t,e.opt.data.basics),t.grpsInfo={basic:e.opt.selectBasic,data:e.opt.selectData},e.adjustDataStructure(t),e.saveGrpsData(t),e.opt.onSubmitBtn(t)}}),module.exports=setMeal});
;define("bigba:widget/common/ui/shopcard/shopcard.js",function(require,exports,module){function ShopCard(e){this.opt=$.extend(_opt,e),this.bindEvent(),this.renderList(this.opt.data,this.opt.display_new_shop,this.opt.server_time)}var shopCardTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("    ");var __default_src="/static/images/shopcard_loading.png";_template_fun_array.push("    ");for(var i=0,len=data.length;len>i;i++){var shop=data[i];_template_fun_array.push('    <li class="list-item shopcard '),_template_fun_array.push(0==shop.is_online?" offline ":" online "),_template_fun_array.push('" data="',"undefined"==typeof shop.release_id?"":baidu.template._encodeHTML(shop.release_id),'" > '),0==shop.is_online&&(_template_fun_array.push(""),1==shop.bussiness_status?_template_fun_array.push('            <figure class="shop-rest-icon">            </figure>'):4==shop.bussiness_status&&_template_fun_array.push('<figure class="shop-closed-icon">            </figure>        '),_template_fun_array.push("")),_template_fun_array.push("");var is_new=shop.is_new;_template_fun_array.push(""),display_new_shop&&0!=shop.is_online&&(_template_fun_array.push(""),is_new&&_template_fun_array.push('<div class="newshop"><span>新店</span></div>'),_template_fun_array.push("")),_template_fun_array.push('        <div class="shopimg">            ');var url=shop.shop_logo?shop.shop_logo:shop.logo_url;_template_fun_array.push("");var is_collected=shop.is_collected;_template_fun_array.push("            "),url?_template_fun_array.push('                <img width="228" height="140" data-src="http://webmap',"undefined"==typeof parseInt(3*Math.random())?"":baidu.template._encodeHTML(parseInt(3*Math.random())),".map.bdimg.com/maps/services/thumbnails?width=228&height=140&align=center,center&quality=100&src=","undefined"==typeof encodeURI(url)?"":baidu.template._encodeHTML(encodeURI(url)),'" alt="',"undefined"==typeof shop.shop_name?"":baidu.template._encodeHTML(shop.shop_name),'" onerror="this.src=&#39;',"undefined"==typeof __default_src?"":baidu.template._encodeHTML(__default_src),'&#39;" src="',baidu.template._encodeHTML("/static/images/shopcard_loading.png"),'"/>            '):_template_fun_array.push('                <img width="228" height="140" src="',baidu.template._encodeHTML("/static/images/shopcard_default_bg.png"),'"/>            '),_template_fun_array.push(""),is_collected&&_template_fun_array.push('<div class="collected">&nbsp; </div>'),_template_fun_array.push("            "),shop.start_time&&(_template_fun_array.push('                <div class="shopdesc">'),2==shop.bussiness_status?_template_fun_array.push("<span>接受预订&nbsp;</span>","undefined"==typeof shop.start_time?"":baidu.template._encodeHTML(shop.start_time),"开始配送"):3==shop.bussiness_status&&_template_fun_array.push("","undefined"==typeof shop.start_time?"":baidu.template._encodeHTML(shop.start_time),"开始营业"),_template_fun_array.push("</div>            ")),_template_fun_array.push('        </div>        <div class="title" title="',"undefined"==typeof shop.shop_name?"":baidu.template._encodeHTML(shop.shop_name),'">            '),shop.shop_name&&_template_fun_array.push("","undefined"==typeof(shop.shop_name.length<=11?shop.shop_name:shop.shop_name.slice(0,11)+"...")?"":baidu.template._encodeHTML(shop.shop_name.length<=11?shop.shop_name:shop.shop_name.slice(0,11)+"..."),""),_template_fun_array.push(""),shop.is_certificated&&_template_fun_array.push('<span class="cert-icon"><img src="http://waimai.baidu.com/static/forpc/certificated_s.png"/></span>'),_template_fun_array.push("        </div>        ");var score=shop.comment_num?shop.comment_num>=10?shop.average_score:0:shop.average_score;_template_fun_array.push('        <div class="info s-info clearfix">            <div class="f-col f-star star-control" data-star="',"undefined"==typeof score?"":baidu.template._encodeHTML(score),'">                <span class="rate">                    <span class="rate-inner" style="width:',"undefined"==typeof(14.4*score)?"":baidu.template._encodeHTML(14.4*score),'px"></span>                </span>            </div>            <div class="f-col f-sale">                已售<span>',"undefined"==typeof shop.saled?"":baidu.template._encodeHTML(shop.saled),'</span>份            </div>        </div>        <div class="info f-info clearfix">            <div class="f-col f-price">                <span class="item-label">起送:</span>                <span class="item-value">&#165;',"undefined"==typeof shop.takeout_price?"":baidu.template._encodeHTML(shop.takeout_price),'</span>            </div>            <div class="f-col f-cost">                <span class="item-label">配送:</span>                <span class="item-value">                    &#165;',"undefined"==typeof shop.takeout_cost?"":baidu.template._encodeHTML(shop.takeout_cost),"                    ");for(var j=0,welfareLen=shop.welfare_info.length;welfareLen>j;j++){var welfareItem=shop.welfare_info[j];_template_fun_array.push("                        "),"mian"==welfareItem.type&&_template_fun_array.push('                        <i class="item-line"></i>                        '),_template_fun_array.push("                    ")}_template_fun_array.push('                </span>            </div>            <div class="f-col f-time">                '),shop.delivery_time&&""!=shop.delivery_time&&"0"!=shop.delivery_time?(_template_fun_array.push(""),shop.delivery_time>=1440?_template_fun_array.push("","undefined"==typeof Math.floor(shop.delivery_time/1440)?"":baidu.template._encodeHTML(Math.floor(shop.delivery_time/1440)),"天"):shop.delivery_time>=60?(_template_fun_array.push(""),shop.delivery_time%60==0?_template_fun_array.push("","undefined"==typeof(shop.delivery_time/60)?"":baidu.template._encodeHTML(shop.delivery_time/60),"小时"):_template_fun_array.push("","undefined"==typeof Math.floor(shop.delivery_time/60)?"":baidu.template._encodeHTML(Math.floor(shop.delivery_time/60)),"小时","undefined"==typeof(shop.delivery_time%60)?"":baidu.template._encodeHTML(shop.delivery_time%60),"分钟"),_template_fun_array.push("")):_template_fun_array.push("","undefined"==typeof shop.delivery_time?"":baidu.template._encodeHTML(shop.delivery_time),"分钟"),_template_fun_array.push("                                    ")):_template_fun_array.push("                    暂无                "),_template_fun_array.push('            </div>        </div>        <div class="feature">            ');for(var j=0,welfareLen=shop.welfare_info.length;welfareLen>j;j++){var welfareItem=shop.welfare_info[j];_template_fun_array.push('                <em class="',"undefined"==typeof welfareItem.type?"":baidu.template._encodeHTML(welfareItem.type),'-min-icon premium-icon" data-msg="',"undefined"==typeof welfareItem.msg?"":baidu.template._encodeHTML(welfareItem.msg),'"><img src="http://waimai.baidu.com/static/forpc/',"undefined"==typeof welfareItem.type?"":baidu.template._encodeHTML(welfareItem.type),'_s.png" /></em>            ')}if(_template_fun_array.push('        </div>        <div class="overlay">            <div class="o-con">                <div class="shop-title">                    <p>',"undefined"==typeof shop.shop_name?"":baidu.template._encodeHTML(shop.shop_name),""),shop.is_certificated&&_template_fun_array.push('<span class="cert-icon"><img src="http://waimai.baidu.com/static/forpc/certificated_s.png"/></span>'),_template_fun_array.push("</p>                    "),shop.is_certificated&&_template_fun_array.push('<p class="cert-pah">支持查看政府认可的资质证照</p>'),_template_fun_array.push("                </div>                "),shop.welfare_info.length){_template_fun_array.push('                <div class="shop-feature">                    <ul>                        ');for(var j=0,welfareLen=shop.welfare_info.length;welfareLen>j;j++){var welfareItem=shop.welfare_info[j];_template_fun_array.push('                            <li>                                <em class="',"undefined"==typeof welfareItem.type?"":baidu.template._encodeHTML(welfareItem.type),'-min-icon premium-icon"><img src="http://waimai.baidu.com/static/forpc/',"undefined"==typeof welfareItem.type?"":baidu.template._encodeHTML(welfareItem.type),'_s.png"  /></em>                                <p '),"pay"==welfareItem.type&&_template_fun_array.push(' style="width:150px;"'),_template_fun_array.push(">","undefined"==typeof welfareItem.msg?"":baidu.template._encodeHTML(welfareItem.msg),"</p>                            </li>                        ")}_template_fun_array.push("                    </ul>                </div>                ")}_template_fun_array.push('                <div class="shop-notice">                    <h2>商家公告</h2>                    <p>                        '),shop.shop_announcement?_template_fun_array.push("                            ","undefined"==typeof shop.shop_announcement?"":shop.shop_announcement,"                        "):_template_fun_array.push("                            本店欢迎您下单，用餐高峰请提前下单，谢谢！                        "),_template_fun_array.push('                    </p>                </div>            </div>            <div class="o-arrow"></div>        </div>    </li>    ')}_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],_opt={data:[],$el:null,listComplete:null};$.extend(ShopCard.prototype,{renderList:function(e,a,t){var s=this.opt.$el;if(e&&e.length>0){var p=shopCardTmpl({data:e,display_new_shop:a,server_time:t});"ul"==s.get(0).tagName.toLowerCase()?(s.addClass("shopcards-list"),s.append(p)):s.find("ul.shopcards-list").length?s.find("ul.shopcards-list").append(p):(s.append("<ul class='shopcards-list'></ul>"),s.find("ul.shopcards-list").append(p)),$(this).trigger("list.complete")}},bindEvent:function(){var e=this.opt.$el;e.on("click","li.list-item",function(){addNStat({da_src:"ShopListBk.ShopItemBtn",da_act:"click",da_trd:"waimai"});var e=$(this).attr("data");stat.trackEvent("shoplist","click",e),window.open("/waimai/shop/"+e)}),$(this).on("list.complete",function(){this.opt.listComplete&&this.opt.listComplete(this.opt)})}}),module.exports=ShopCard});
;define("bigba:widget/common/ui/topbar/topbar.js",function(i,n,o){o.exports={init:function(){}}});
;define("bigba:widget/common/userinfo/UserMgr.js",function(o,e,i){!function(o){function e(e){var i=c+(new Date).getTime(),e=e||{},n=e.url||o.location.href;if(sucCallBack=e.sucessCB||function(){},m){m.show();var t=$("#place-login-tips");t.length&&(v.getParam("tip")?t.show():t.hide())}else{var a,s=function(){var e={tangram:!0,id:"login",cache:!0,apiOpt:{product:"ma",staticPage:p,u:n,sms:2},authsite:g,authsiteCfg:{act:"implicit",u:n},onSubmitStart:function(){v.getParam("purl")&&(a=o.open("about:blank"))},onLoginSuccess:function(o){var e=$.Event("onLoginSuccess");sucCallBack(),$(v).trigger(e),e.isDefaultPrevented()?o.returnValue=!1:a&&(a.location.href=v.getParam("purl"))},onSubmitedErr:function(){a&&a.close()}},i=window.passport||null;i&&i.pop&&(m=i.pop.init(e),m.show(),function(){var o=$("#passport-login-pop"),e=arguments,i=(v.getParam("purl"),v.getParam("tip"));o.length&&i?setTimeout(function(){$('<div id="place-login-tips" class="place-login-tips">'+i+"</div>").appendTo(o)},100):setTimeout(function(){e.callee()},10)}())};baidu.phoenix.require(g,{target:"otherLogin",tpl:"map",act:"implicit",u:location.href}),$.ajax({url:i,type:"get",dataType:"script",crossDomain:!0,data:null,async:!0,error:function(){},success:function(){s()}})}}function n(o){if(!o)return"";var e="",i=o.uName||o.displayname,n=o.email,t=o.mobile;i?e=i:(n||t)&&(e=n||t);var a=['<ul class="login_info"><li id="usernameInfo" class="uname mn-lk-w">'];return a.push(i?'<a id="username" class="mn-lk" href="/waimai/trade/orderlist">你好，'+e+"</a>":'<a id="username" class="mn-lk" href="https:/passport.baidu.com/v2/?ucenteradduname">'+e+"</a>"),a.push('<div id="popUserInfoId" class="mn-tip"><div class="top-arrow"></div><ul class="mn">'),a.push('<li><a class="my-info" href="/waimai?qt=orderlist&type=wait"><span class="icon order-icon"></span>我的订单</a></li>'),a.push('<li><a class="my-info" href="/waimai?qt=addressmanage&type=select"><span class="icon address-icon"></span>送餐地址</a></li>'),a.push('<li><a class="my-info" href="/waimai?qt=myfavorite"><span class="icon favorite-icon"></span>收藏夹</a></li>'),a.push('<li><a class="my-info" href="/waimai?qt=couponinfo"><span class="icon coupon-icon"></span>代金券</a></li>'),a.push('<li><a class="my-info" href="/trade/refundlist"><span class="icon refund-icon"></span>我的退款</a></li>'),a.push('<li><a id="logout" class="logout" href="javascript:void(0)"><span class="icon account-icon"></span>退出</a></li>'),a.push("</ul></div>"),a.join("")}function t(o,e){var i="",n=e?"&"+encodeURIComponent(e):"";switch(o){case"login":i=s+l;break;case"logout":i=u}return a+i+r+encodeURIComponent(n)}var a="https://passport.baidu.com",s="v2/",r="&tpl=ma",l="?login",u="?logout";T_ORDER_LIST=['<ul class="order-list">','<li><a target="_blank" class="order-list-cater" href="/detail?qt=orderlist&type=cater&detail=order_list">餐饮订单</a></li>','<li><a target="_blank" class="order-list-movie" href="/detail?qt=orderlist&type=movie">电影订单</a></li>',"</ul>"].join("");var c=a+"/passApi/js/uni_login_wrapper.js?cdnversion=",p="http://"+o.location.host+"/static/common/widget/userinfo/v3Jump.html",d="/waimai/checklogin";USER_CENTER_HREF="http://passport.baidu.com/center",USER_STATE_LOGIN="1",USER_STATE_LOGOUT="0";var f={},m=null,g=[],h=!1,v={init:function(){var o;h||(this.update({onsuccess:function(){}}),$("#user_info").delegate(".book-order","mouseenter.order",function(){var e,i=$(this).find(".order-list");e=v.userState&&v.userState.isOnline||"0",o&&clearTimeout(o),0==i.length&&(i=$(this).append($(T_ORDER_LIST))),i.show(),i.find(".order-list-hotel").attr("stat","click|{da_src:inf.order_hotel, user: "+e+"}")}).delegate(".book-order","mouseleave.order",function(){var e=$(this).find(".order-list");e.length>0&&(o=setTimeout(function(){e.hide()},50))}),h=!0)},setSearchOrder:function(o){$(this).on("setlogin",function(){$("#user_info .book-order").html(o)}),$("#user_info .book-order").html(o),setTimeout(function(){$("#user_info").undelegate(".book-order","mouseenter.order").undelegate(".book-order","mouseleave.order")},100)},update:function(o){o=o||{},this.getState(function(e){if(e){v.userState=e;var i=this,n=o.onsuccess,t=o.scope;switch(e.isOnline){case USER_STATE_LOGIN:i.isLogin(e);break;case USER_STATE_LOGOUT:i.isLogout(e)}o&&n&&t&&n.call(t,e)}})},getState:function(o){$.ajax({url:d,type:"get",dataType:"jsonp",crossDomain:!0,data:null,async:!0,error:function(){},success:function(o){v._getState(o)}}),this._getStateCBK=o},_getState:function(o){o&&this._getStateCBK&&this._getStateCBK(o)},bindEvents:function(){var e=this,i=function(){e.tipTimer=setTimeout(function(){$("#popUserInfoId").css("visibility","hidden")},200)};$("#username").on("mouseover",function(){$("#popUserInfoId").css({display:"none",visibility:"visible"}).fadeIn()}),$("#popUserInfoId").on("mouseover",function(){o.clearTimeout(e.tipTimer)}),$("#username").on("mouseout",i),$("#popUserInfoId").on("mouseout",i),$("#logout").on("click",function(){return v.logout(),!1})},addLoginEvt:function(){var o=this;$("#login").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),o.removeAll(),o.login()})},login:function(o){o=o||{},v.userState&&"0"==v.userState.isOnline?e(o):o.url&&(location.href=o.url)},logout:function(){o.location.href=t("logout",{u:o.location.href})},isLogin:function(o){var e=this,i=$("#logout_user_info"),t=$("#login_user_info");i&&i.hide(),t&&(t.show(),t.html(n(o))),$(e).trigger("setlogin"),this.bindEvents()},isLogout:function(){var o=$("#logout_user_info"),e=$("#login_user_info");o&&o.show(),e&&e.hide(),this.addLoginEvt()},clickPage:function(o,e){"normal"==o?($("#loginIframe_iph"+e).hide(),$("#passports"+e).show(),$("#normal_login"+e).addClass("login_hover"),$("#phone_login"+e).removeClass("login_hover")):"iph"==o&&($("#loginIframe_iph"+e).show(),$("#passports"+e).hide(),$("#phone_login"+e).addClass("login_hover"),$("#normal_login"+e).removeClass("login_hover"))},setParam:function(o,e){f[o]=e},getParam:function(o){return f[o]},removeParam:function(o){for(var e,i=0;e=o[i];i++)delete f[e]},removeAll:function(){f={}}};i.exports=v}(window)});
;define("bigba:widget/common/verifyphone/verifyphone.js",function(n,e,o){function t(n){var e=(DataHelper(n).prop("result.first_order_status"),""),o="";return e=l("wm_succbind_tpl",{desc:o,url:window.location.href})}function i(n){var e=t(n);f.disableKeyEvent(),d=new f({html:e}),d.show({fade:!0}),setTimeout(function(){window.location.href=window.location.href},2e3)}function r(){function n(n){c.html(n),setTimeout(function(){c.html("")},3e3)}function e(){var n=t.val(),e=new RegExp("^\\d{11}$");return n&&e.test(n)?n:(t.next(".error-input").removeClass("v-hide"),!1)}var o=$("#common_verifyphone"),t=o.find(".verify-phone"),r=o.find(".verify-code"),a=o.find(".verify-btn"),c=o.find(".error-msg");o.find(".verify-btn").on("click",function(){var o=e();a.hasClass("btn-disable")||o!==!1&&$.ajax({url:"/waimai?qt=sendphonecode",data:{mobile:o},dataType:"json",success:function(e){var o=60;return 0!=e.error_no?void n(e.error_msg):void function(){0>=o?a.removeClass("btn-disable").html("发送动态码"):(a.addClass("btn-disable").html("重新发送"+o--),setTimeout(arguments.callee,1e3))}()}})}),o.find(".commit-btn").on("click",function(){var o=r.val(),t=e();if(t!==!1)return o?void $.ajax({url:"/waimai?qt=verifyphonecode",data:{mobile:t,code:o,from:u},dataType:"json",success:function(e){return 0!=e.error_no?void n(e.error_msg):void i(e)}}):void r.parent().find(".error-input").removeClass("v-hide")}),t.focus(function(){$(this).next(".error-input").addClass("v-hide")}),r.focus(function(){$(this).parent().find(".error-input").addClass("v-hide")})}function a(n){var e=n&&n.cancel_text?n.cancel_text:"取消",o=l("wm_bindphone_tpl",{cancel_text:e});return o}function c(){if(passport&&passport.pop){var n=$("#bindstoken").val(),e=passport.pop.ArmorWidget("bindmobile",{token:n,title:"绑定手机",msg:"",auth_title:"绑定手机",auth_msg:"为了保证您的帐号安全，绑定手机前请先进行安全验证",onSubmitSuccess:function(n,e){window.location.reload()},onSubmitFail:function(){},onHide:function(){}});e.show()}}function s(n){n&&n.from&&(u=n.from)}var d,u,l=n("bigba:static/utils/Template.js"),f=(n("jsmod/ui/pagination"),n("bigba:static/util.js"),n("jsmod/ui/dialog"));o.exports={bindPhone:function(n){var e=function(n){n.hide({fade:!0})},o=a(n),t=n&&n.cancelCb?n.cancelCb:e,i=new f({html:o});i.getElement().delegate("#common_verifyphone .cancel-btn","click",function(){t(i)}),i.show({fade:!0}),setTimeout(function(){$(".placeholder-con").placeholder()},0),s(n),r()},bindPhoneWidget:function(n){c(n)}}});
;var GlobalErrorMonitor=require("bigba:static/utils/GlobalErrorMonitor.js"),Dialog=require("jsmod/ui/dialog");$("#content").css("min-height",$(window).height()-290),window.onerror1=function(){return GlobalErrorMonitor.error.apply(GlobalErrorMonitor,arguments),!0},window.onresize=function(){$("#content").css("min-height",$(window).height()-290)},$(function(){Dialog&&Dialog.setOpacity(.55),$(".placeholder-con").placeholder()});