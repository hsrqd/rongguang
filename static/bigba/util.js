define("bigba:static/util.js",function(e,t,n){var s={format:function(e,t){return e.replace(/\{(\w+)\}/g,function(e,n){return"undefined"==typeof t[n]||null==t[n]?"":t[n]})},getNoPicUrl:function(){return"images/nopic.gif"},stretchImg:function(e,t,n,i,a){var r=new Image;e.onerror=function(){this.src=s.getNoPicUrl(),this.style.display=""},r.onload=function(){var s,r,o,c,l=this.width,d=this.height,u=Math.max(t/l,n/d);a&&(u=Math.min(t/l,n/d)),s=parseInt(u*l,10)||t,r=parseInt(u*d,10)||n,e.style.width=s+"px",e.style.height=r+"px",c=parseInt((n-r)/2,10),o=parseInt((t-s)/2,10),i&&$(e).css({"margin-top":c,"margin-left":o}),e.style.display=""},r.src=e.src},reloadImg:function(e){function t(e){s.css("visibility","visible").show().attr("src",e)}var n=this,s=e.find("img");s=s[0]?s:e,s.css("visibility","hidden").hide();var i=s.attr("src"),a=new Image;a.onload=function(){t(i)},a.onerror=function(){t(n.getNoPicUrl())},a.src=i},errorImg:function(e){e.src=s.getNoPicUrl()},getPartnerslink:function(e,t,n){return e&&t&&n?t+"&"+$.param($.extend({},n,{from:"inf",fun:e})):t||""},parseGeo:function(e){if("string"==typeof e){var t=e.split("|"),n=parseInt(t[0]),s=t[1],i=t[2],a=i.split(";"),r=[];switch(n){case 1:r.push(a[0]);break;case 2:case 3:for(var o=0;o<a.length-1;o++){var c=a[o];if(c.length>100)c=c.replace(/([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*)(,)/g,"$1,$2;"),r.push(c);else{for(var l=[],d=c.split(","),u=0;u<d.length;u+=2){var h=d[u],g=d[u+1];l.push(h+","+g)}r.push(l.join(";"))}}}return r.length<=1&&(r=r.toString()),{type:n,bound:s,points:r}}},getPointByStr:function(e,t){if("string"==typeof e){var n=e.split(",");if(!(n.length<2)){var s=new BMap.Pixel(n[0],n[1]),t=t||window.map;return t.getMapType().getProjection().pointToLngLat(s)}}},loadJs:function(e,t){var n=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.src=e,s.onload=s.onreadystatechange=function(){s.onload=s.onreadystatechange=null,t()},n.appendChild(s)},loadCss:function(e,t){var n=document.getElementsByTagName("head")[0],s=document.createElement("link"),t=t||function(){};s.type="text/css",s.href=e,s.rel="stylesheet",n.appendChild(s),"sheet"in s?(sheet="sheet",cssRules="cssRules"):(sheet="styleSheet",cssRules="rules");var i=setInterval(function(){try{s[sheet]&&s[sheet][cssRules].length&&(clearInterval(i),clearTimeout(a),t())}catch(e){}finally{}},20),a=setTimeout(function(){clearInterval(i),clearTimeout(a),t()},1e3)},dateFormat:function(e,t){var n=e,s={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in s)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[i]:("00"+s[i]).substr((""+s[i]).length)));return t},jstime:function(e){e?(this.__start&&(this.__time=this.__time||[],this.__time.push(e+":"+((new Date).getTime()-this.__start)+"ms")),this.__start=(new Date).getTime()):alert(this.__time.join("\n"))},getStrLength:function(e){var t=e.match(/[^\x00-\xff]/gi);return e.length+(null==t?0:t.length)},SubString:function(e,t){var n=/[^\x00-\xff]/g;if(e.replace(n,"mm").length<=t)return e;for(var s=Math.floor(t/2),i=s;i<e.length;i++)if(e.substr(0,i).replace(n,"mm").length>=t)return e.substr(0,i);return e},scrollController:function(e,t){var n=$(e)[0].getBoundingClientRect().bottom-Math.min(document.documentElement.clientHeight,document.body.clientHeight),s=document.body.scrollTop,i=document.documentElement.scrollTop,a=0,r=(new Date).getTime(),o=1,c=setInterval(function(){var e=(new Date).getTime(),l=Math.min(1,(e-r)/t),d=a+(n-a)*l;document.body.scrollTop=s+d,document.documentElement.scrollTop=i+d,l>=o&&(clearInterval(c),document.body.scrollTop=s+n,document.documentElement.scrollTop=i+n)},15)},bdshare:function(e,t,n,i){var a=[];if(a.push('<span class="bds_more">分享到：</span>'),a.push('<a title="分享到新浪微博" class="bds_tsina" href="#"></a>'),a.push('<a title="分享到QQ空间" class="bds_qzone" href="#"></a>'),a.push('<a title="分享到腾讯微博" class="bds_tqq" href="#"></a>'),a.push('<a title="分享到人人网" class="bds_renren" href="#"></a>'),a.push('<a title="分享到百度空间" href="#" class="bds_hi bdkj"></a>'),a.push('<span class="bds_more">更多</span>'),$("#bdshare").html(a.join("")).addClass("bdshare_t bds_tools get-codes-bdshare hide").attr("data","{url:'"+e+"'}"),window.bds_config=window.bds_config||{},window.bds_config.bdText=t,window.bds_config.bdDesc=i?i:"",window.bds_config.bdPic=n?n:"http://map.baidu.com/image/newlogo.png",window.bdShare)window.bdShare.fn.init(),$("#bdshare").removeClass("hide");else{$("#bdshare").append('<script id="bdshare_js" data="type=tools&amp;uid=797188"></script><script id="bdshell_js"></script>');var r=function(){setTimeout(function(){window.bdShare&&(window.bdShare.fn.init(),$("#bdshare").removeClass("hide"))},50)};s.loadCss("http://bdimg.share.baidu.com/static/css/bdsstyle.css?cdnversion="+Math.ceil(new Date/36e5)),s.loadJs("http://bdimg.share.baidu.com/static/js/logger.js?cdnversion="+Math.ceil(new Date/36e5),r),s.loadJs("http://bdimg.share.baidu.com/static/js/bds_s_v2.js?cdnversion="+Math.ceil(new Date/36e5),r)}},getNearData:function(e,t,n,s){var i="/detail?qt=recommend",a=[];return t?void $.ajax({url:i,data:{uid:t||0,c:s||0,detail:n||""},type:"GET",dataType:"json",success:function(t){a=t.data,e(t)},error:function(){e(a)}}):!1},getParams:function(e){var t,n,s,i={};if(e=e||window.location.href,-1==e.indexOf("?"))return i;for(n=e.slice(e.indexOf("?")+1).split("&"),s=0;s<n.length;s++)n[s]&&-1!=n[s].indexOf("=")&&(t=n[s].split("="),i[t[0]]=-1!=t[1].indexOf("#")?t[1].slice(0,t[1].indexOf("#")):t[1]);return i},getParam:function(e,t){return this.getParams(t)[e]},now:function(){return(new Date).getTime()},getRandomCDN:function(){return"http://webmap"+Math.floor(3*Math.random())+".map.bdimg.com"},thumbnails:function(e){var t,n;return e=$.extend({width:100,height:100,align:"center,center",quality:80,cdn:!0},e),t=e.cdn,delete e.cdn,n="/maps/services/thumbnails?"+$.param(e),t?this.getRandomCDN()+n:n},encodeHTML:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}};n.exports=s});